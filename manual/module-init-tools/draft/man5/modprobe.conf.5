.\" This manpage has been automatically generated by docbook2man
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/>
.\" Please send any bug reports, improvements, comments, patches,
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.\"
.\" Japanese Version Copyright (C) 2005 Suzuki Takashi
.\"         all rights reserved.
.\" Translated Sun Jul 10 22:56:20 JST 2005
.\"         by Suzuki Takashi <JM@linux.or.jp>.
.\"
.\"WORD:        insert          登録する
.\"
.TH "MODPROBE.CONF" "5" "1 June 2005" "" ""

.\"O .SH NAME
.SH "名前"
.\"O modprobe.conf, modprobe.d \- Configuration file/directory for modprobe
modprobe.conf, modprobe.d \- modprobe の設定ファイル・ディレクトリ
.\"O .SH "DESCRIPTION"
.SH "説明"
.PP
.\"O Because the \fBmodprobe\fR command can add or
.\"O remove extra more than one module, due to module dependencies,
.\"O we need a method of specifying what options are to be used with
.\"O those modules.  \fI/etc/modprobe.conf\fR (or, if that does not exist, all files under the \fI/etc/modprobe.d\fR directory) specifies
.\"O those options, as required.  It can also be used to create
.\"O convenient aliases: alternate names for a module.  Finally, it
.\"O can override the normal \fBmodprobe\fR behavior
.\"O altogether, for those with very special requirements (such as
.\"O inserting more than one module).
\fBmodprobe\fR コマンドはモジュールの依存関係に応じて
複数のモジュールを追加したり削除したりできるため、
これらのモジュールにどのオプションを使うかを指定する手段が必要である。
\fI/etc/modprobe.conf\fR (または \fI/etc/modprobe.conf\fR が存在しない場合、
\fI/etc/modprobe.d\fR ディレクトリ以下のすべてのファイル) は
必要に応じてこれらのオプションを指定する。
また、便利なようにエイリアス (モジュールの別名) を作成するためにも用いられる。
最後に、
(複数のモジュールを登録するなどの) 特別な要求に応えるために、
\fBmodprobe\fR の通常の振る舞いを完全に無効にして乗っ取ることができる。
.PP
.\"O Note that module and alias names (like other module names) can
.\"O have - or _ in them: both are interchangable throughout all the
.\"O module commands.
モジュール名やエイリアス名には (他のモジュール名と同様に)
\- や _ を含めることができる。
ここで、 \- と _ はすべてのモジュールコマンドにおいて、
互いに入れ替え可能である (区別されない) ことに注意。
.PP
.\"O The format of \fImodprobe.conf\fR and files under \fImodprobe.d\fR is simple: one
.\"O command per line, with blank lines and lines starting with #
.\"O ignored (useful for adding comments).  A \\ at the end of a line
.\"O causes it to continue on the next line, which makes the file a
.\"O bit neater.
\fImodprobe.conf\fR や \fImodprobe.d\fR 以下のファイルの形式は単純である。
1 行に 1 コマンドで、
空行と # で始まる行は無視される (コメントを追加するのに使える) 。
行末の \\ は次の行に続くことを意味し、これを使えばファイルが少し見やすくなる。
.PP
.\"O The syntax is a simplification of \fImodules.conf\fR, used in 2.4 kernels and earlier.
書式は 2.4 以前のカーネルで使われていた \fImodules.conf\fR を
簡単にしたものである。
.\"O .SH "COMMANDS"
.SH "コマンド"
.TP
\fBalias \fIwildcard\fB \fImodulename\fB \fR
.\"O This allows you to give alternate names for a module.  For
.\"O example: "alias my-mod really_long_modulename"
.\"O means you can use "modprobe my-mod" instead of "modprobe
.\"O really_long_modulename".  You can also use shell-style
.\"O wildcards, so "alias my-mod* really_long_modulename"
.\"O means that "modprobe my-mod-something" has the same
.\"O effect.  You can't have aliases to other aliases (that
.\"O way lies madness), but aliases can have options, which
.\"O will be added to any other options.
モジュールの別名を付ける。
例えば、 "alias my-mod really_long_modulename" とすると、
"modprobe really_long_modulename" の代わりに
"modprobe my-mod" を使うことができる。
シェル形式のワイルドカードも使うことができ、
"alias my-mod* really_long_modulename" とすると
"modprobe my-mod-something" も同じ効果となる。
他のエイリアスに対するエイリアスを設定することはできない
(正しく動作しない) が、
エイリアスにオプションを設定することができ、
それらは他のオプションに追加される。
.\"O Note that modules can also contain their own aliases,
.\"O which you can see using \fBmodinfo\fR.  These
.\"O aliases are used as a last resort (ie. if there is no real
.\"O module, \fBinstall\fR,
.\"O \fBremove\fR, or \fBalias\fR
.\"O command in the configuration).
モジュールはそれ自身にエイリアスを持つことができる点に注意。
それらは \fBmodinfo\fR で見ることができる。
これらのエイリアスは最後の望みとして使われる
(つまり、その名前の実モジュールもなく、設定ファイル中に
その名前の \fBinstall\fR, \fBremove\fR, \fBalias\fR コマンドが
存在しない場合に使われる) 。
.TP
\fBoptions \fImodulename\fB \fIoption...\fB \fR
.\"O This command allows you to add options to the module
.\"O \fImodulename\fR (which might be an
.\"O alias) every time it is inserted into the kernel: whether
.\"O directly (using \fBmodprobe\fR
.\"O \fImodulename\fR, or because the
.\"O module being inserted depends on this module.
このコマンドで
モジュール \fImodulename\fR (エイリアスも可) に
オプションを追加することができる。
ここで設定されたオプションは
カーネルに登録される際に毎回使われ、
(\fBmodprobe\fR \fImodulename\fR で) 直接登録される場合にも
そのモジュールに依存するモジュールと一緒に登録される場合にも
使われる。

.\"O All options are added together: they can come from an
.\"O \fBoption\fR for the module itself, for an
.\"O alias, and on the command line.
モジュール自身に対する \fBoption\fR 、
エイリアスに対する \fBoption\fR 、
コマンドラインのオプションは、
全てのオプションがいっしょに渡される。
.TP
\fBinstall \fImodulename\fB \fIcommand...\fB \fR
.\"O This is the most powerful primitive in
.\"O \fImodprobe.conf\fR: it tells
.\"O \fBmodprobe\fR to run your command instead of
.\"O inserting the module in the kernel as normal.  The command
.\"O can be any shell command: this allows you to do any kind
.\"O of complex processing you might wish.  For example, if the
.\"O module "fred" worked better with the module "barney"
.\"O already installed (but it didn't depend on it, so
.\"O \fBmodprobe\fR won't automatically load it),
.\"O you could say "install fred /sbin/modprobe barney;
.\"O /sbin/modprobe --ignore-install fred", which would do what
.\"O you wanted.  Note the \fB--ignore-install\fR,
.\"O which stops the second \fBmodprobe\fR from
.\"O re-running the same \fBinstall\fR command.
.\"O See also \fBremove\fR below
\fImodprobe.conf\fR の中でもっとも強力なコマンドである。
\fBmodprobe\fR は、
通常はカーネルにモジュールを登録するが、
install コマンドを記述すると、
代わりにここで指定された command を実行する。
command はどんなシェルコマンドでもよい。
そのため、どんな複雑な処理でも思いどおりに指定できる。
例えば、モジュール "fred" が、
"barney" がインストールされている状態のほうが
うまく動作する (が依存関係にないので
\fBmodprobe\fR が自動的にロードしない) 場合、
"install fred /sbin/modprobe barney;
/sbin/modprobe --ignore-install fred" と書けば、
望みどおりのことをさせることができる。
ここで、 \fB--ignore-install\fR は
2 番目の \fBmodprobe\fR が同じ \fBinstall\fR コマンドを
再び実行しないようにするためのものである。
\fBremove\fR も参照。

.\"O You can also use \fBinstall\fR to make up
.\"O modules which don't otherwise exist.  For example:
.\"O "install probe-ethernet /sbin/modprobe e100 ||
.\"O /sbin/modprobe eepro100", which will try first the e100
.\"O driver, then the eepro100 driver, when you do "modprobe
.\"O probe-ethernet".
\fBinstall\fR を使って、
実際には存在しないモジュールを作ることもできる。
例えば、
"install probe-ethernet /sbin/modprobe e100 ||
/sbin/modprobe eepro100" と書けば、
"modprobe probe-ethernet" としたときに、
まず e100 ドライバを試し、次に eepro100 を試す。

.\"O If you use the string "$CMDLINE_OPTS" in the command, it
.\"O will be replaced by any options specified on the modprobe
.\"O command line.  This can be useful because users expect
.\"O "modprobe fred opt=1" to pass the "opt=1" arg to the
.\"O module, even if there's an install command in the
.\"O configuration file.  So our above example becomes "install
.\"O fred /sbin/modprobe barney; /sbin/modprobe
.\"O --ignore-install fred $CMDLINE_OPTS"
コマンドの中で "$CMDLINE_OPTS" という文字列を使うと、
modprobe のコマンドラインで指定したオプションに置き換えられる。
これを使うと、
設定ファイルに install コマンドが存在していても、
ユーザは "modprobe fred opt=1" というコマンドラインで
モジュールに "opt=1" というオプションを渡すことができ、便利である。
つまり、上の例では設定ファイルに
"install
fred /sbin/modprobe barney; /sbin/modprobe
--ignore-install fred $CMDLINE_OPTS" のように書けばよい。
.TP
\fBremove \fImodulename\fB \fIcommand...\fB \fR
.\"O This is similar to the \fBinstall\fR command
.\"O above, except it is invoked when "modprobe -r" is run.
.\"O The removal counterparts to the two examples above would
.\"O be: "remove fred /sbin/modprobe -r --ignore-remove fred &&
.\"O /sbin/modprobe -r barney", and "remove probe-ethernet
.\"O /sbin/modprobe -r eepro100 || /sbin/modprobe -r e100".
上の \fBinstall\fR コマンドと同様であるが、
"modprobe -r" が呼び出されたときに実行される。
上の 2 つの例を削除にあてはめると、
"remove fred /sbin/modprobe -r --ignore-remove fred &&
/sbin/modprobe -r barney" および
"remove probe-ethernet
/sbin/modprobe -r eepro100 || /sbin/modprobe -r e100" のようになる。
.TP
\fBinclude \fIfilename\fB \fR
.\"O Using this command, you can include other configuration
.\"O files, or whole directories, which is occasionally useful.  Note that aliases in
.\"O the included file will override aliases previously
.\"O declared in the current file.
このコマンドを使うと、
他の設定ファイルまたはディレクトリ全体を読み込むことができ、
これが便利なこともある。
読み込まれたファイル中のエイリアスは
現在のファイルで定義されたエイリアスを上書きすることに注意。
.TP
\fBblacklist \fImodulename\fB \fR
.\"O Modules can contain their own aliases: usually these are
.\"O aliases describing the devices they support, such as
.\"O "pci:123...".  These "internal" aliases can be overridden
.\"O by normal "alias" keywords, but there are cases where two
.\"O or more modules both support the same devices, or a module
.\"O invalidly claims to support a device: the
.\"O \fBblacklist\fR keyword indicates that all of
.\"O a particular module's internal aliases are to be ignored.
モジュールはそれ自身にエイリアスを持つことができる。
通常、これらは "pci:123..." といったように、
サポートするデバイスを表すエイリアスである。
これらの「内部」エイリアスは
通常の "alias" キーワードで上書きすることができる。
しかし、 2 つ以上のモジュールが同じデバイスをサポートする場合や、
モジュールがサポートしないデバイスをサポートするとしている場合もある。
このような場合、 \fBblacklist\fR キーワードを使って、
あるモジュールのすべての内部エイリアスを無視させることができる。
.\"O .SH "BACKWARDS COMPATIBILITY"
.SH "下位互換性"
.PP
.\"O There is a \fBgenerate_modprobe.conf\fR program
.\"O which should do a reasonable job of generating
.\"O \fImodprobe.conf\fR from your current (2.4 or
.\"O 2.2) modules setup.
現在の (2.4 または 2.2 の) モジュール設定から
\fImodprobe.conf\fR を生成してくれる
\fBgenerate_modprobe.conf\fR というプログラムがある。
.PP
.\"O Although the syntax is similar to the older
.\"O \fI/etc/modules.conf\fR, there are many features
.\"O missing.  There are two reasons for this: firstly, install and
.\"O remove commands can do just about anything, and secondly, the
.\"O module-init-tools modprobe is designed to be simple enough that
.\"O it can be easily replaced.
書式は以前の \fI/etc/modules.conf\fR と似ているが、
多くの機能が削除されている。
これには 2 つの理由がある:
まず、 install および remove コマンドでほとんど何でもできる。
二つ目に、 module-init-tools の modprobe は
他のツールで簡単に置き換えることができるよう、
十分単純になるように設計されている。
.PP
.\"O With the complexity of actual module insertion reduced to three
.\"O system calls (open, read, init_module), and the
.\"O \fImodules.dep\fR file being simple and open,
.\"O producing a more powerful modprobe variant can be done
.\"O independently if there is a need.
実際のモジュールの登録の複雑さが
3 つのシステムコール (open, read, init_module) で軽減され、
\fImodules.dep\fR ファイルが単純でオープンであるおかげで、
もし必要があればもっと強力な改良版の modprobe を作ることも可能である。
.\"O .SH "COPYRIGHT"
.SH "著作権"
.PP
.\"O This manual page Copyright 2004, Rusty Russell, IBM Corporation.
このマニュアルページの著作権表示は Copyright 2004, Rusty Russell, IBM Corporation.
.\"O .SH "SEE ALSO"
.SH "関連項目"
.PP
\fBmodprobe\fR(8),
\fBmodules.dep\fR(5)
