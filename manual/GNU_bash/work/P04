.\"O .SH EXPANSION
.SH 展開
.\"O Expansion is performed on the command line after it has been split into
.\"O words.  There are seven kinds of expansion performed:
.\"O .IR "brace expansion" ,
.\"O .IR "tilde expansion" ,
.\"O .IR "parameter and variable expansion" ,
.\"O .IR "command substitution" ,
.\"O .IR "arithmetic expansion" ,
.\"O .IR "word splitting" ,
.\"O and
.\"O .IR "pathname expansion" .
展開はコマンドライン上で、単語への分割の後に行われます。行われる展開は
7 種類あります:
.IR "ブレースの展開 (brace expansion)" ,
.IR "チルダの展開 (tilde expansion)" ,
.IR "パラメータと変数の展開 (parameter and variable expansion)" ,
.IR "コマンド置換 (command substitution)" ,
.IR "算術式展開 (arithmetic expansion)" ,
.IR "単語の分割 (word splitting)" ,
.IR "パス名の展開 (pathname expansion)" 。
.PP
.\"O The order of expansions is: brace expansion, tilde expansion,
.\"O parameter, variable and arithmetic expansion and
.\"O command substitution
.\"O (done in a left-to-right fashion), word splitting, and pathname
.\"O expansion.
展開の順序は次のようになります: ブレース展開、チルダ展開、パラメータ・
変数・算術式展開、コマンド置換 (左から右へ)、単語分割、パス名展開。
.PP
.\"O On systems that can support it, there is an additional expansion
.\"O available: \fIprocess substitution\fP.
これらに加えて \fIプロセス置換 (process substitution)\fP をサポートでき
るシステムもあります。
.PP
.\"O Only brace expansion, word splitting, and pathname expansion
.\"O can change the number of words of the expansion; other expansions
.\"O expand a single word to a single word.
.\"O The only exceptions to this are the expansions of
.\"O "\fB$@\fP" and "\fB${\fP\fIname\fP\fB[@]}\fP"
.\"O as explained above (see
.\"O .SM
.\"O .BR PARAMETERS ).
展開した部分の単語の数が変化することがあるのは、ブレース展開、単語の
分割、パス名展開だけです。他の展開では、1 つの単語は 1 つの単語に展開
されます。この規則の唯一の例外は先に説明した
 "\fB$@\fP" と "\fB${\fP\fIname\fP\fB[@]}\fP" の展開 (
.SM
.B パラメータ
を参照) だけです。
.\"O .SS Brace Expansion
.SS ブレース展開
.PP
.\"O .I "Brace expansion"
.\"O is a mechanism by which arbitrary strings
.\"O may be generated.  This mechanism is similar to
.\"O \fIpathname expansion\fP, but the filenames generated
.\"O need not exist.  Patterns to be brace expanded take
.\"O the form of an optional
.\"O .IR preamble ,
.\"O followed by a series of comma-separated strings
.\"O between a pair of braces, followed by an optional
.\"O .IR postscript .
.\"O The preamble is prefixed to each string contained
.\"O within the braces, and the postscript is then appended
.\"O to each resulting string, expanding left to right.
.I "ブレース展開 (brace expansion)"
は、任意の文字列を生成することができる機構です。この機構は
\fIパス名展開\fPに似ていますが、生成されたファイル名が実在する必要はあ
りません。展開されるブレースになるパターンは、
省略可能な
.IR "前置部分 (preamble)" 、
対になるブレースの間にコンマで区切って並べた文字列、
省略可能な
.I 後置部分 (postscript)
を順に並べたものです。前置部分はブレース内にある文字列それぞれの先頭部
分に追加され、後置部分は左から右に順に展開されて得られたそれぞれの文字列
の末尾に追加されます。
.PP
.\"O Brace expansions may be nested.  The results of each expanded
.\"O string are not sorted; left to right order is preserved.
.\"O For example, a\fB{\fPd,c,b\fB}\fPe expands into `ade ace abe'.
ブレースの展開は入れ子にすることができます。展開して得られた文字列はソー
トされず、左から右への順番がそのまま残ります。例えば、
a\fB{\fPd,c,b\fB}\fPe は `ade ace abe' と展開されます。
.PP
.\"O Brace expansion is performed before any other expansions,
.\"O and any characters special to other expansions are preserved
.\"O in the result.  It is strictly textual.
.\"O .B Bash
.\"O does not apply any syntactic interpretation to the context of the
.\"O expansion or the text between the braces.
ブレースの展開は他のどの展開よりも前に実行されます。また、他の展開にお
いて特殊な意味を持つ文字もそのまま結果に残ります。つまり、厳密にテキス
ト操作だけを行います。
.B bash
は、展開の文脈やブレースの間のテキストに対して文法的な解釈を適用するこ
とは一切ありません。
.PP
.\"O A correctly-formed brace expansion must contain unquoted opening
.\"O and closing braces, and at least one unquoted comma.
.\"O Any incorrectly formed brace expansion is left unchanged.
.\"O A \fB{\fP or \fB,\fP may be quoted with a backslash to prevent its
.\"O being considered part of a brace expression.
正しい形のブレース展開には、クォートされていない開きブレースと閉じブレー
ス、また少なくとも 1 つのクォートされていないコンマが含まれていなけれ
ばなりません。正しい形でないブレース展開は全て、変更されないでそのまま
残ります。\fB{\fP や \fB,\fP をバックスラッシュでクォートすれば、ブレー
ス展開の一部と解釈されないようにすることができます。
.\"O To avoid conflicts with parameter expansion, the string \fB${\fP
.\"O is not considered eligible for brace expansion.
パラメータ展開との衝突を避けるため、文字列 \fB${\fP
はブレース展開の対象とは解釈されません。
.PP
.\"O This construct is typically used as shorthand when the common
.\"O prefix of the strings to be generated is longer than in the
.\"O above example:
この仕組みは、生成される文字列の共通先頭部分が、上記の例より長い場合
に、短縮表現としてよく使用されます:
.RS
.PP
mkdir /usr/local/src/bash/{old,new,dist,bugs}
.RE
.\"O or
あるいは
.RS
chown root /usr/{ucb/{ex,edit},lib/{ex?.?*,how_ex}}
.RE
.PP
.\"O Brace expansion introduces a slight incompatibility with
.\"O historical versions of
.\"O .BR sh .
.\"O .B sh
.\"O does not treat opening or closing braces specially when they
.\"O appear as part of a word, and preserves them in the output.
ブレース展開の導入によって、伝統的な
.B sh
とは少し非互換になった部分があります。
.B sh
は単語の一部として開きブレースや閉じブレースが現われても特別扱いはせず、
そのまま出力に残します。
.\"O .B Bash
.\"O removes braces from words as a consequence of brace
.\"O expansion.  For example, a word entered to
.\"O .B sh
.\"O as \fIfile{1,2}\fP
.\"O appears identically in the output.  The same word is
.\"O output as
.\"O .I file1 file2
.\"O after expansion by
.\"O .BR bash .
.B bash
はブレース展開の結果として単語からブレースを取り除きます。例えば、
.B sh
に \fIfile{1,2}\fP のように入力された単語は、そのままの形で出力されま
す。
.BR bash
の場合には、これと同じ単語は展開されて
.I file1 file2
のように出力されます。
.\"O If strict compatibility with
.\"O .B sh
.\"O is desired, start
.\"O .B bash
.\"O with the
.\"O .B +B 
.\"O option or disable brace expansion with the
.\"O .B +B
.\"O option to the
.\"O .B set
.\"O command (see
.\"O .SM
.\"O .B SHELL BUILTIN COMMANDS
.\"O below).
厳密に
.B sh
と互換にしたければ、
.B bash
を
.B +B 
オプションを付けて起動するか、
.B set
コマンドに
.B +B
を指定してブレース展開を無効にしてください
(後述する
.SM
.B シェル組み込みコマンド
を参照)。
.\"O .SS Tilde Expansion
.SS チルダ展開
.PP
.\"O If a word begins with an unquoted tilde character (`\fB~\fP'), all of
.\"O the characters preceding the first unquoted slash (or all characters,
.\"O if there is no unquoted slash) are considered a \fItilde-prefix\fP.
クォートされていないチルダ (`\fB~\fP') で単語が始まった場合、クォートさ
れていないスラッシュよりも前にある文字すべて (クォートされていないスラッ
シュが無ければすべての文字) はチルダプレフィックス (\fItilde-prefix\fP) と
解釈されます。
.\"O If none of the characters in the tilde-prefix are quoted, the
.\"O characters in the tilde-prefix following the tilde are treated as a
.\"O possible \fIlogin name\fP.
.\"O If this login name is the null string, the tilde is replaced with the
.\"O value of the shell parameter
.\"O .SM
.\"O .BR HOME .
クォートされている文字がチルダプレフィックス中に無ければ、
チルダプレフィックス中のチルダ以降の文字は、\fIログイン名 (login
name)\fP になる可能性がある文字列として扱われます。このログイン名が
空文字列ならば、チルダはシェルパラメータ
.SM
.B HOME
の値に置き換えられます。
.\"O If
.\"O .SM
.\"O .B HOME
.\"O is unset, the home directory of the user executing the shell is
.\"O substituted instead.
.\"O Otherwise, the tilde-prefix is replaced with the home directory
.\"O associated with the specified login name.
.SM
.B HOME
が設定されていない場合は、代わりにシェルを実行しているユーザのホー
ムディレクトリに置き換えられます。そうでない場合は、チルダプレフィック
スは指定されたログイン名に対応するホームディレクトリに置き換えられます。
.PP
.\"O If the tilde-prefix is a `~+', the value of the shell variable
.\"O .SM
.\"O .B PWD
.\"O replaces the tilde-prefix.
チルダプレフィックスが `~+' ならば、チルダプレフィックスはシェル変数
.SM
.B PWD
の値に置き換えられます。
.\"O If the tilde-prefix is a `~\-', the value of the shell variable
.\"O .SM
.\"O .BR OLDPWD ,
.\"O if it is set, is substituted.
チルダプレフィックスが `~\-' ならば、シェル変数
.SM
.B OLDPWD
の値に置き換えられます (値が設定されていれば)。
.\"O If the characters following the tilde in the tilde-prefix consist
.\"O of a number \fIN\fP, optionally prefixed
.\"O by a `+' or a `\-', the tilde-prefix is replaced with the corresponding
.\"O element from the directory stack, as it would be displayed by the
.\"O .B dirs
.\"O builtin invoked with the tilde-prefix as an argument.
.\"O If the characters following the tilde in the tilde-prefix consist of a
.\"O number without a leading `+' or `\-', `+' is assumed.
チルダプレフィックス中のチルダより後の文字が数値 \fIN\fP であれば (
数値の前に `+' や `\-' を置くこともできます)、チルダプレフィックスはディ
レクトリスタック内の対応する要素に置換されます。
置換される要素は、チルダプレフィックスを引き数として組み込みコマンド
.B dirs
を実行したときに表示されるものです。
チルダプレフィックスにおけるチルダ以降の文字が、先行する `+' や `-' のない
数値である場合は、`+' であるとみなされます。
.PP
.\"O If the login name is invalid, or the tilde expansion fails, the word
.\"O is unchanged.
ログイン名が有効でない場合や、チルダ展開が失敗した場合には、単語は置き
換えられません。
.PP
.\"O Each variable assignment is checked for unquoted tilde-prefixes immediately
.\"O following a
.\"O .B :
.\"O or
.\"O .BR = .
.\"O In these cases, tilde expansion is also performed.
全ての変数代入において
.B :
や
.B =
の直後にあるクォートされていないチルダプレフィックスのチェックが行われ
ます。もし見つかった場合にはこれらもチルダ展開されます。
.\"O Consequently, one may use file names with tildes in assignments to
.\"O .SM
.\"O .BR PATH ,
.\"O .SM
.\"O .BR MAILPATH ,
.\"O and
.\"O .SM
.\"O .BR CDPATH ,
.\"O and the shell assigns the expanded value.
したがって、
.SM
.BR PATH ,
.SM
.BR MAILPATH ,
.SM
.BR CDPATH
への代入にチルダを含むファイル名を使い、展開された値をシェルに代入させ
ることができます。
.\"O .SS Parameter Expansion
.SS パラメータの展開
.PP
.\"O The `\fB$\fP' character introduces parameter expansion,
.\"O command substitution, or arithmetic expansion.  The parameter name
.\"O or symbol to be expanded may be enclosed in braces, which
.\"O are optional but serve to protect the variable to be expanded from
.\"O characters immediately following it which could be
.\"O interpreted as part of the name.
`\fB$\fP' 文字があると、パラメータ展開、コマンド置換、算術式展開が行わ
れます。展開されるパラメータ名やシンボルは、ブレースで括ることもできま
す。ブレースは省略可能ですが、変数の直後にあり、その名前の一部と解釈す
ることができる文字と一緒に変数が展開されることを防ぐ方法として用意され
ています。
.PP
.\"O When braces are used, the matching ending brace is the first `\fB}\fP'
.\"O not escaped by a backslash or within a quoted string, and not within an
.\"O embedded arithmetic expansion, command substitution, or paramter
.\"O expansion.
ブレースを使った場合、マッチングを終えるブレースは最初の `\fB}\fP' で
す。ただし、バックスラッシュでエスケープされているものやクォートされて
いる文字列中のものは含まれませんし、算術式展開やコマンド置換、パラメー
タ展開に入っているものも含まれません。
.PP
.PD 0
.TP
${\fIparameter\fP}
.\"O The value of \fIparameter\fP is substituted.  The braces are required
.\"O when
.\"O .I parameter
.\"O is a positional parameter with more than one digit,
.\"O or when
.\"O .I parameter
.\"O is followed by a character which is not to be
.\"O interpreted as part of its name.
\fIparameter\fP の値が置換されます。ブレースが必要になるのは、
.I parameter
が 2 桁以上の数字を持つ位置付きパラメータの場合や、
.I parameter
の直後の文字を名前の一部として解釈させたくない場合です。
.PD
.PP
.\"O If the first character of \fIparameter\fP is an exclamation point,
.\"O a level of variable indirection is introduced.
.\"O \fBBash\fP uses the value of the variable formed from the rest of
.\"O \fIparameter\fP as the name of the variable; this variable is then
.\"O expanded and that value is used in the rest of the substitution, rather
.\"O than the value of \fIparameter\fP itself.
.\"O This is known as \fIindirect expansion\fP.
\fIparameter\fP の最初の文字が感嘆符である場合、間接変数レベル
(level of variable indirection) という概念が導入されます。\fBbash\fP は、
展開に \fIparameter\fP  そのものの値を使用するのでなく、
\fIparameter\fP の感嘆符を除いた残りの文字を変数名として扱い、その変数
の値をその後展開に使用します。これが\fI間接展開 (indirect expansion)\fP
と呼ばれるものです。
.\"O The exception to this is the expansion of ${!\fIprefix\fP*}
.\"O described below.
ただし例外として、以下で説明する ${!\fIprefix\fP*} の展開があります。
.PP
.\"O In each of the cases below, \fIword\fP is subject to tilde expansion,
.\"O parameter expansion, command substitution, and arithmetic expansion.
.\"O When not performing substring expansion, \fBbash\fP tests for a parameter
.\"O that is unset or null; omitting the colon results in a test only for a
.\"O parameter that is unset.
以下に示すそれぞれの場合、\fIword\fP に対してチルダ展開、パラメータ展
開、コマンド置換、算術式展開が行われます。部分文字列展開以外の場合、 
\fBbash\fP はパラメータが設定されているか、空ではないかを調べます。コ
ロンを省略した場合には設定されているかどうかのみを調べます。
.PP
.PD 0
.TP
${\fIparameter\fP\fB:\-\fP\fIword\fP}
.\"O \fBUse Default Values\fP.  If
.\"O .I parameter
.\"O is unset or null, the expansion of
.\"O .I word
.\"O is substituted.  Otherwise, the value of
.\"O .I parameter
.\"O is substituted.
\fBデフォルトの値を使います\fP。
.I parameter
が設定されていないか空文字列であれば、
.I word
を展開したものに置換されます。そうでなければ、
.I parameter
の値に置換されます。
.TP
${\fIparameter\fP\fB:=\fP\fIword\fP}
.\"O \fBAssign Default Values\fP.
\fBデフォルト値を代入します\fP。
.\"O If
.\"O .I parameter
.\"O is unset or null, the expansion of
.\"O .I word
.\"O is assigned to
.\"O .IR parameter .
.\"O The value of
.\"O .I parameter
.\"O is then substituted.  Positional parameters and special parameters may
.\"O not be assigned to in this way.
.I parameter
が設定されていないか空文字列であれば、
.I word
を展開したものが
.I parameter
に代入されます。それから
.I parameter
の値への置換が行われます。位置付きパラメータや特殊パラメータへの代
入をこのように行うことはできません。
.TP
${\fIparameter\fP\fB:?\fP\fIword\fP}
.\"O \fBDisplay Error if Null or Unset\fP.
\fB空文字列または設定されてされていない場合にエラーを表示します\fP。
.\"O If
.\"O .I parameter
.\"O is null or unset, the expansion of \fIword\fP (or a message to that effect
.\"O if
.\"O .I word
.\"O is not present) is written to the standard error and the shell, if it
.\"O is not interactive, exits.  Otherwise, the value of \fIparameter\fP is
.\"O substituted.
.I parameter
が空文字列または設定されていない場合、\fIword\fP を展開したもの (
.I word
がなければ、パラメータが空文字列または設定されていないことを示すメッセー
ジ) が標準エラー出力に出力されます。シェルが対話的でなければ、シェルは
終了します。パラメータに空文字列以外が設定されていれば、
\fIparameter\fP の値への置換が行われます。
.TP
${\fIparameter\fP\fB:+\fP\fIword\fP}
.\"O \fBUse Alternate Value\fP.
\fB別の値を使用します\fP。
.\"O If
.\"O .I parameter
.\"O is null or unset, nothing is substituted, otherwise the expansion of
.\"O .I word
.\"O is substituted.
.I parameter
が空文字列または設定されていなければ、空文字列に置換されます。そうでな
ければ、
.I word
を展開したものに置換されます。
.TP
.PD 0
${\fIparameter\fP\fB:\fP\fIoffset\fP}
.TP
${\fIparameter\fP\fB:\fP\fIoffset\fP\fB:\fP\fIlength\fP}
.PD
.\"O \fBSubstring Expansion.\fP
\fB部分文字列展開\fP。
.\"O Expands to up to \fIlength\fP characters of \fIparameter\fP
.\"O starting at the character specified by \fIoffset\fP.
.\"O If \fIlength\fP is omitted, expands to the substring of
.\"O \fIparameter\fP, starting at the character specified by \fIoffset\fP.
.\"O \fIlength\fP and \fIoffset\fP are arithmetic expressions (see
.\"O .SM
.\"O .B
.\"O ARITHMETIC EVALUATION
.\"O below).
\fIparameter\fP を展開したものから最大 \fIlength\fP 文字を取り出します。
先頭の文字は \fIoffset\fP で指定します。\fIlength\fP を省略すると、
\fIoffset\fP で指定した文字を先頭にして、\fIparameter\fP の残り全部が
含まれる部分文字列に展開します。\fIlength\fP と \fIoffset\fP は算術式
です (後述の
.SM
.B 算術式評価
を参照)。
.\"O \fIlength\fP must evaluate to a number greater than or equal to zero.
.\"O If \fIoffset\fP evaluates to a number less than zero, the value
.\"O is used as an offset from the end of the value of \fIparameter\fP.
\fIlength\fP の評価結果は 0 以上の数でなければなりません。
\fIoffset\fP を評価すると 0 未満の数になる場合、この値は
\fIparameter\fP の値の末尾からのオフセットとして使われます。
.\"O If \fIparameter\fP is \fB@\fP, the result is \fIlength\fP positional
.\"O parameters beginning at \fIoffset\fP.
.\"O If \fIparameter\fP is an array name indexed by @ or *,
.\"O the result is the \fIlength\fP
.\"O members of the array beginning with ${\fIparameter\fP[\fIoffset\fP]}.
.\"O Substring indexing is zero-based unless the positional parameters 
.\"O are used, in which case the indexing starts at 1.
\fIparameter\fP が \fB@\fP ならば、結果は \fIoffset\fP から始まる
\fIlength\fP 個の位置付きパラメータになります。
\fIparameter\fP が @ または * のインデックスが付いている配列名ならば、
結果は配列の ${\fIparameter\fP[\fIoffset\fP]} を先頭とする要素
\fIlength\fP 個となります。位置付きパラメータを使う場合以外は、部分文
字列のインデックスは 0 から始まります。位置付きパラメータの場合には、
インデックスは 1 から始まります。
.TP
${\fB!\fP\fIprefix\fP\fB*\fP}
.\"O Expands to the names of variables whose names begin with \fIprefix\fP,
.\"O separated by the first character of the
.\"O .SM
.\"O .B IFS
.\"O special variable.
\fIprefix\fP で始まるすべての変数の名前に展開して、
.SM
.B IFS
特殊変数の最初の文字によって区切ります。
.TP
${\fB#\fP\fIparameter\fP}
.\"O The length in characters of the value of \fIparameter\fP is substituted.
.\"O If
.\"O .I parameter
.\"O is
.\"O .B *
.\"O or 
.\"O .BR @ ,
.\"O the value substituted is the number of positional parameters.
.\"O If
.\"O .I parameter
.\"O is an array name subscripted by
.\"O .B *
.\"O or
.\"O .BR @ ,
.\"O the value substituted is the number of elements in the array.
\fIparameter\fP の値に含まれる文字数に置換されます。
.I parameter
が
.B *
または
.B @
ならば、位置付きパラメータの数に置換されます。
.I parameter
が
.B *
または
.B @
が添字になっている配列名ならば、配列中の要素数に置換されます。
.TP
.PD 0
${\fIparameter\fP\fB#\fP\fIword\fP}
.TP
${\fIparameter\fP\fB##\fP\fIword\fP}
.PD
.\"O The 
.\"O .I word
.\"O is expanded to produce a pattern just as in pathname
.\"O expansion.  If the pattern matches the beginning of
.\"O the value of
.\"O .IR parameter ,
.\"O then the result of the expansion is the expanded value of
.\"O .I parameter
.\"O with the shortest matching pattern (the ``\fB#\fP'' case) or the
.\"O longest matching pattern (the ``\fB##\fP'' case) deleted.
.I word
が展開され、パス名展開の場合と同じようなパターンを作ります。こ
のパターンが
.I parameter
の値の先頭部分とマッチする場合、展開して得られる値は
.I parameter
を展開した値から最短一致パターン (``\fB#\fP''の場合) または最長一致パター
ン (``\fB##\fP'' の場合) を取り除いたものになります。
.\"O If
.\"O .I parameter
.\"O is
.\"O .B @
.\"O or
.\"O .BR * ,
.\"O the pattern removal operation is applied to each positional
.\"O parameter in turn, and the expansion is the resultant list.
.I parameter
が
.B @
または
.BR *
である場合、パターンを削除する操作は全ての位置付きパラメータに順番に適
用され、展開結果はリストとして得られます。
.\"O If
.\"O .I parameter
.\"O is an array variable subscripted with
.\"O .B @
.\"O or
.\"O .BR * ,
.\"O the pattern removal operation is applied to each member of the
.\"O array in turn, and the expansion is the resultant list.
.I parameter
が
.B @
または
.B *
が添字になっている配列変数である場合、パターンを削除する操作は配列の全
ての要素に順番に適用され、展開結果はリストとして得られます。
.TP
.PD 0
${\fIparameter\fP\fB%\fP\fIword\fP}
.TP
${\fIparameter\fP\fB%%\fP\fIword\fP}
.PD
.\"O The \fIword\fP is expanded to produce a pattern just as in
.\"O pathname expansion.
.\"O If the pattern matches a trailing portion of the expanded value of
.\"O .IR parameter ,
.\"O then the result of the expansion is the expanded value of
.\"O .I parameter
.\"O with the shortest matching pattern (the ``\fB%\fP'' case) or the
.\"O longest matching pattern (the ``\fB%%\fP'' case) deleted.
.I word
が展開され、パス名展開の場合と同じようなパターンを作ります。こ
のパターンが
.I parameter
を展開した値の末尾の部分とマッチする場合、展開結果は
.I parameter
を展開した値から最短一致パターン (``\fB%\fP'' の場合) または最長一致パター
ン (``\fB%%\fP'' の場合) を取り除いたものになります。
.\"O If
.\"O .I parameter
.\"O is
.\"O .B @
.\"O or
.\"O .BR * ,
.\"O the pattern removal operation is applied to each positional
.\"O parameter in turn, and the expansion is the resultant list.
.I parameter
が
.B @
または
.B *
である場合、パターンを削除する操作は全ての位置付きパラメータに順番に適
用され、展開結果はリストとして得られます。
.\"O If
.\"O .I parameter
.\"O is an array variable subscripted with
.\"O .B @
.\"O or
.\"O .BR * ,
.\"O the pattern removal operation is applied to each member of the
.\"O array in turn, and the expansion is the resultant list.
.I parameter
が
.B @
または
.B *
が添字になっている配列変数である場合、パターンを削除する操作は配列の全
ての要素に順番に適用され、展開結果はリストとして得られます。
.TP
.PD 0
${\fIparameter\fP\fB/\fP\fIpattern\fP\fB/\fP\fIstring\fP}
.TP
${\fIparameter\fP\fB//\fP\fIpattern\fP\fB/\fP\fIstring\fP}
.PD
.\"O The \fIpattern\fP is expanded to produce a pattern just as in
.\"O pathname expansion.
\fIpattern\fP が展開され、パス名展開の場合と同じようなパターン
を作ります。
.\"O \fIParameter\fP is expanded and the longest match of \fIpattern\fP
.\"O against its value is replaced with \fIstring\fP.
\fIparameter\fP の展開が行われ、その値のうち \fIpattern\fP に最長一致
する部分が \fIstring\fP に置換されます。
.\"O In the first form, only the first match is replaced.
前者の形式の場合には、最初にマッチした部分だけが置換されます。
.\"O The second form causes all matches of \fIpattern\fP to be
.\"O replaced with \fIstring\fP.
後者の形式の場合には、マッチした部分は全て \fIstring\fP に置換されます。
.\"O If \fIpattern\fP begins with \fB#\fP, it must match at the beginning
.\"O of the expanded value of \fIparameter\fP.
\fIpattern\fP が \fB#\fP で始まる場合には、パターンは \fIparameter\fP 
を展開した値の先頭にマッチしなければなりません。
.\"O If \fIpattern\fP begins with \fB%\fP, it must match at the end
.\"O of the expanded value of \fIparameter\fP.
\fIpattern\fP が \fB%\fP で始まる場合には、パターンは \fIparameter\fP 
を展開した値の末尾にマッチしなければなりません。
.\"O If \fIstring\fP is null, matches of \fIpattern\fP are deleted
.\"O and the \fB/\fP following \fIpattern\fP may be omitted.
\fIstring\fP が空の場合には \fIpattern\fP にマッチした部分は削除されま
す。またこの場合には、\fIpattern\fP の後に続く \fB/\fP は省略可能です。
.\"O If
.\"O .I parameter
.\"O is
.\"O .B @
.\"O or
.\"O .BR * ,
.\"O the substitution operation is applied to each positional
.\"O parameter in turn, and the expansion is the resultant list.
.I parameter
が
.B @
または
.B *
である場合、置換操作は全ての位置付きパラメータに順番に適用され、展開結
果はリストとして得られます。
.\"O If
.\"O .I parameter
.\"O is an array variable subscripted with
.\"O .B @
.\"O or
.\"O .BR * ,
.\"O the substitution operation is applied to each member of the
.\"O array in turn, and the expansion is the resultant list.
.I parameter
が
.B @
または
.B *
が添字になっている配列変数である場合、置換操作は配列の全ての要素に順番
に適用され、展開結果はリストとして得られます。
.\"O .SS Command Substitution
.SS コマンド置換
.PP
.\"O \fICommand substitution\fP allows the output of a command to replace
.\"O the command name.  There are two forms:
\fIコマンド置換 (command substitution)\fP を用いると、コマンド名をコマン
ドの出力で置き換えることができます。コマンド置換には以下の 2 つの形式
があります:
.PP
.RS
.PP
\fB$(\fP\fIcommand\fP\|\fB)\fP
.RE
.\"O or
または
.RS
\fB`\fP\fIcommand\fP\fB`\fP
.RE
.PP
.\"O .B Bash
.\"O performs the expansion by executing \fIcommand\fP and
.\"O replacing the command substitution with the standard output of the
.\"O command, with any trailing newlines deleted.
.\"O Embedded newlines are not deleted, but they may be removed during
.\"O word splitting.
.\"O The command substitution \fB$(cat \fIfile\fP)\fR can be replaced by
.\"O the equivalent but faster \fB$(< \fIfile\fP)\fR.
.B bash
による展開は、\fIcommand\fP の実行およびコマンド置換の部分をコマンドの
標準出力と置換することにより実行されます。この際、末尾の改行文字は削除
されます。文字列の途中にある改行文字は削除されませんが、単語分割の際に
削除されることがあります。コマンド置換 \fB$(cat \fIfile\fP)\fR は、同
じ意味を持ち、しかも高速な \fB$(< \fIfile\fP)\fR に置き換えることがで
きます。
.PP
.\"O When the old-style backquote form of substitution is used,
.\"O backslash retains its literal meaning except when followed by
.\"O .BR $ ,
.\"O .BR ` ,
.\"O or
.\"O .BR \e .
.\"O The first backquote not preceded by a backslash terminates the
.\"O command substitution.
.\"O When using the $(\^\fIcommand\fP\|) form, all characters between the
.\"O parentheses make up the command; none are treated specially.
バッククォートを使う古い形式の置換を用いたとき、バックスラッシュは文字
通りの意味を保ちますが、
.BR $ ,
.BR ` ,
.B \e
の前にある場合は例外となります。バックスラッシュが前に置かれていない最
初のバッククォートがあるとコマンド置換は閉じられます。
$(\^\fIcommand\fP\|) という形式を用いたときは、括弧の間にある全ての文
字がコマンドとなります。特別扱いされる文字はありません。
.PP
.\"O Command substitutions may be nested.  To nest when using the backquoted form,
.\"O escape the inner backquotes with backslashes.
コマンド置換は入れ子にすることができます。バッククォート形式の時に入れ
子を行うには、内側のバッククォートをバックスラッシュでエスケープします。
.PP
.\"O If the substitution appears within double quotes, word splitting and
.\"O pathname expansion are not performed on the results.
置換がダブルクォート内部にある場合には、置換の結果に対する単語分割と
パス名展開は行われません。
.\"O .SS Arithmetic Expansion
.SS 算術式展開
.PP
.\"O Arithmetic expansion allows the evaluation of an arithmetic expression
.\"O and the substitution of the result.  The format for arithmetic expansion is:
算術式展開を使うと、算術式を評価して、その結果に置換することができます。
算術式展開のフォーマットを次に示します:
.RS
.PP
\fB$((\fP\fIexpression\fP\fB))\fP
.RE
.PP
.\"O The
.\"O .I expression
.\"O is treated as if it were within double quotes, but a double quote
.\"O inside the parentheses is not treated specially.
.\"O All tokens in the expression undergo parameter expansion, string
.\"O expansion, command substitution, and quote removal.
.\"O Arithmetic substitutions may be nested.
.I expression
はダブルクォート内部にある場合と同様に扱われますが、括弧の内側のダブル
クォートが特別扱いされることはありません。式に含まれる全てのトークンに
対して、パラメータ展開、文字列展開、コマンド置換、クォートの削除が行わ
れます。算術式置換は入れ子にすることができます。
.PP
.\"O The evaluation is performed according to the rules listed below under
.\"O .SM
.\"O .BR "ARITHMETIC EVALUATION" .
.\"O If
.\"O .I expression
.\"O is invalid,
.\"O .B bash
.\"O prints a message indicating failure and no substitution occurs.
評価は後述の
.SM
.B "算術式評価"
で示す規則に基づいて行われます。
.I expression
が不正であれば、
.B bash
は評価の失敗を示すメッセージを出力し、置換を全く行いません。
.\"O .SS Process Substitution
.SS プロセス置換
.PP
.\"O \fIProcess substitution\fP is supported on systems that support named
.\"O pipes (\fIFIFOs\fP) or the \fB/dev/fd\fP method of naming open files.
.\"O It takes the form of
.\"O \fB<(\fP\fIlist\^\fP\fB)\fP
.\"O or
.\"O \fB>(\fP\fIlist\^\fP\fB)\fP.
\fIプロセス置換 (process substitution)\fP がサポートされるのは、名前付き
パイプ (\fIFIFO\fP) または名前付きオープンファイルの \fB/dev/fd\fP メソッ
ドをサポートしているシステムです。これは
\fB<(\fP\fIlist\^\fP\fB)\fP
または
\fB>(\fP\fIlist\^\fP\fB)\fP
の形になります。
.\"O [確認] naming open file の訳語
.\"O The process \fIlist\fP is run with its input or output connected to a
.\"O \fIFIFO\fP or some file in \fB/dev/fd\fP.  The name of this file is
.\"O passed as an argument to the current command as the result of the
.\"O expansion.  If the \fB>(\fP\fIlist\^\fP\fB)\fP form is used, writing to
.\"O the file will provide input for \fIlist\fP.  If the
.\"O \fB<(\fP\fIlist\^\fP\fB)\fP form is used, the file passed as an
.\"O argument should be read to obtain the output of \fIlist\fP.
プロセスのリスト \fIlist\fP の実行時には、その入力または出力は、
\fIFIFO\fP または \fB/dev/fd\fP 中の何らかのファイルに接続されています。
このファイルの名前は展開の結果として、引き数として現在のコマンドに渡さ
れます。\fB>(\fP\fIlist\^\fP\fB)\fP の形式を使った場合、ファイルへの書
き込みは \fIlist\fP への入力となります。\fB<(\fP\fIlist\^\fP\fB)\fP の
形式を使った場合、引き数として渡されたファイルは \fIlist\fP の出力を得
るために読み込まれます。
.PP
.\"O When available, process substitution is performed
.\"O simultaneously with parameter and variable expansion, 
.\"O command substitution,
.\"O and arithmetic expansion.
利用可能であれば、プロセス置換 (process substitution) は、
パラメータ展開や変数展開、コマンド置換、算術式展開と同時に行われます。
.\"O .SS Word Splitting
.SS 単語の分割
.PP
.\"O The shell scans the results of
.\"O parameter expansion,
.\"O command substitution,
.\"O and
.\"O arithmetic expansion
.\"O that did not occur within double quotes for
.\"O .IR "word splitting" .
シェルはパラメータ展開とコマンド置換、算術式展開の結果をスキャンします。
ダブルクォートの内部では、これらの展開は
.I "単語分割"
に対して行われません。
.\"O The shell treats each character of
.\"O .SM
.\"O .B IFS
.\"O as a delimiter, and splits the results of the other
.\"O expansions into words on these characters.  If
.\"O .SM
.\"O .B IFS
.\"O is unset, or its
.\"O value is exactly
.\"O .BR <space><tab><newline> ,
.\"O the default, then
.\"O any sequence of
.\"O .SM
.\"O .B IFS
.\"O characters serves to delimit words.  If
.\"O .SM
.\"O .B IFS
.\"O has a value other than the default, then sequences of
.\"O the whitespace characters
.\"O .B space
.\"O and
.\"O .B tab
.\"O are ignored at the beginning and end of the
.\"O word, as long as the whitespace character is in the
.\"O value of
.\"O .SM
.\"O .BR IFS
.\"O (an
.\"O .SM
.\"O .B IFS
.\"O whitespace character).
シェルは
.SM
.B IFS
のそれぞれの文字を区切り文字として扱い、他の展開の結果をこれらの文字によって
単語に分割します。
.SM
.B IFS
が設定されていないか、その値が正確にデフォルト値の
.BR <スペース><タブ><改行>
ならば、
.SM
.B IFS
文字の任意の列で単語が区切られます。
.SM
.B IFS
がデフォルト以外の値を持っていれば、空白文字 (
.B スペース
および
.B タブ
) の列は単語の先頭と末尾では無視されます。これは空白文字が
.SM
.BR IFS
の値 (
.SM
.B IFS
空白文字) に含まれる限り成り立ちます。
.\"O Any character in
.\"O .SM
.\"O .B IFS
.\"O that is not
.\"O .SM
.\"O .B IFS
.\"O whitespace, along with any adjacent
.\"O .SM
.\"O .B IFS
.\"O whitespace characters, delimits a field.
.SM
.B IFS
に含まれ、
.SM
.B IFS
空白文字ではない文字は全て、隣接する任意の
.SM
.B IFS
空白文字と一緒になってフィールドの区切りとなります。
.\"O A sequence of
.\"O .SM
.\"O .B IFS
.\"O whitespace characters is also treated as a delimiter.
.\"O If the value of
.\"O .SM
.\"O .B IFS
.\"O is null, no word splitting occurs.
.SM
.B IFS
空白文字の列も区切り文字として扱われます。
.SM
.B IFS
の値が空文字列であれば、単語分割は全く行われません。
.PP
.\"O Explicit null arguments (\^\f3"\^"\fP or \^\f3'\^'\fP\^) are retained.
.\"O Unquoted implicit null arguments, resulting from the expansion of
.\"O parameters that have no values, are removed.
.\"O If a parameter with no value is expanded within double quotes, a
.\"O null argument results and is retained.
明示的に指定した空の引き数(\^\f3"\^"\fP または \^\f3'\^'\fP\^)は削除さ
れずに残ります。クォートされていない、暗黙的に指定された空の引き数は、
値を持たないパラメータを展開した結果として得られますが、これらは削除されます。
値を持たないパラメータがダブルクォート内部で展開されると、
これは空である引き数となり、消されずに残ります。
.PP
.\"O Note that if no expansion occurs, no splitting
.\"O is performed.
展開が行われなければ単語分割も行われない点に注意してください。
.\"O .SS Pathname Expansion
.SS パス名展開
.PP
.\"O After word splitting,
.\"O unless the
.\"O .B \-f
.\"O option has been set,
.\"O .B bash
.\"O scans each word for the characters
.\"O .BR * ,
.\"O .BR ? ,
.\"O and
.\"O .BR [ .
.B \-f
オプションが指定されていなければ、単語分割を行った後に
.B bash
はそれぞれの単語が
.BR * ,
.BR ? ,
.B [
を含んでいるかどうか調べます。
.\"O If one of these characters appears, then the word is
.\"O regarded as a
.\"O .IR pattern ,
.\"O and replaced with an alphabetically sorted list of
.\"O file names matching the pattern.
これらの文字のいずれかが見つかると、その単語は
.IR パターン
と見なされ、パターンにマッチするファイル名をアルファベット順にソートし
たリストに置換されます。
.\"O If no matching file names are found,
.\"O and the shell option
.\"O .B nullglob
.\"O is disabled, the word is left unchanged.
マッチするファイル名が見つからず、かつシェルのオプション
.B nullglob
が無効ならば、その単語は変更されずにそのまま残ります。
.\"O If the 
.\"O .B nullglob
.\"O option is set, and no matches are found,
.\"O the word is removed.
.B nullglob
オプションが設定されていて、かつマッチするファイル名が見つからなければ、その
単語は削除されます。
.\"O If the shell option
.\"O .B nocaseglob
.\"O is enabled, the match is performed without regard to the case
.\"O of alphabetic characters.
シェルのオプション
.B nocaseglob
が有効ならば、マッチングにおいてアルファベットの大文字と小文字は区別さ
れません。
.\"O When a pattern is used for pathname expansion,
.\"O the character
.\"O .B ``.''
.\"O at the start of a name or immediately following a slash
.\"O must be matched explicitly, unless the shell option
.\"O .B dotglob
.\"O is set.
パターンをパス名展開に使うとき、名前の先頭やスラッシュの直後の
.B ``.''
は明示的にマッチさせなければなりません。ただし、シェルのオプション
.B dotglob
が設定されている場合は除きます。
.\"O When matching a pathname, the slash character must always be
.\"O matched explicitly.
.\"O In other cases, the
.\"O .B ``.''
.\"O character is not treated specially.
パス名のマッチングを行うとき、スラッシュ文字は必ず明示的にマッチさせな
ければなりません。これ以外の場合には、
.B ``.''
が特別扱いされることはありません。
.\"O See the description of
.\"O .B shopt
.\"O below under
.\"O .SM
.\"O .B SHELL BUILTIN COMMANDS
.\"O for a description of the
.\"O .BR nocaseglob ,
.\"O .BR nullglob ,
.\"O and
.\"O .B dotglob
.\"O shell options.
シェルのオプション
.BR nocaseglob ,
.BR nullglob ,
.B dotglob
の詳しい説明については、後述の
.SM
.B シェルの組み込みコマンド
に書かれている
.B shopt
の説明を参照してください。
.PP
.\"O The
.\"O .SM
.\"O .B GLOBIGNORE
.\"O shell variable may be used to restrict the set of file names matching a
.\"O .IR pattern .
シェル変数
.SM
.B GLOBIGNORE
を使って、
.I パターン
にマッチするファイル名の集合を制限することができます。
.\"O If
.\"O .SM
.\"O .B GLOBIGNORE
.\"O is set, each matching file name that also matches one of the patterns in
.\"O .SM
.\"O .B GLOBIGNORE
.\"O is removed from the list of matches.
.SM
.B GLOBIGNORE
が設定されていれば、マッチするファイル名のうち
.SM
.B GLOBIGNORE
中のパターンにもマッチしたものは、マッチしたもののリストから取り除かれ
ます。
.\"O The file names
.\"O .B ``.''
.\"O and
.\"O .B ``..''
.\"O are always ignored, even when
.\"O .SM
.\"O .B GLOBIGNORE
.\"O is set.  However, setting
.\"O .SM
.\"O .B GLOBIGNORE
.\"O has the effect of enabling the
.\"O .B dotglob
.\"O shell option, so all other file names beginning with a
.\"O .B ``.''
.\"O will match.
ファイル名
.B ``.''
と
.B ``..''
は必ず無視されます。これは
.SM
.B GLOBIGNORE
が設定されていても同じです。しかし、
.SM
.B GLOBIGNORE
を設定するとシェルオプションの
.B dotglob
が有効になるので、
.B ``.''
で始まる他のファイル名は全てマッチします。
.\"O To get the old behavior of ignoring file names beginning with a
.\"O .BR ``.'' ,
.\"O make
.\"O .B ``.*''
.\"O one of the patterns in
.\"O .SM
.\"O .BR GLOBIGNORE .
.B ``.''
で始めるファイル名を無視する古い動作をさせるには、
.B ``.*''
を
.SM
.B GLOBIGNORE
のパターンに含めてください。
.\"O The
.\"O .B dotglob
.\"O option is disabled when
.\"O .SM
.\"O .B GLOBIGNORE
.\"O is unset.
.SM
.B GLOBIGNORE
が設定されていなければ、
.B dotglob
オプションは無効になります。
.PP
.\"O \fBPattern Matching\fP
\fBパターンマッチング\fP
.PP
.\"O Any character that appears in a pattern, other than the special pattern
.\"O characters described below, matches itself.  The NUL character may not
.\"O occur in a pattern.  The special pattern characters must be quoted if
.\"O they are to be matched literally.
パターンに含まれる文字のうち、後述する特殊パターン文字以外の文字は、自
分自身にマッチします。NUL 文字がパターン中に現われてはいけません。特殊
パターン文字をその文字そのものにマッチさせるためには、クォートしなけれ
ばなりません。
.PP
.\"O The special pattern characters have the following meanings:
特殊パターン文字は以下の意味を持っています:
.PP
.PD 0
.TP
.B *
.\"O Matches any string, including the null string.
空文字列を含む、任意の文字列にマッチします。
.TP
.B ?
.\"O Matches any single character.
任意の 1 文字にマッチします。
.TP
.B [...]
.\"O Matches any one of the enclosed characters.  A pair of characters
.\"O separated by a minus sign denotes a
.\"O .IR range ;
.\"O any character lexically between those two characters, inclusive,
.\"O is matched.  If the first character following the
.\"O .B [
.\"O is a
.\"O .B !
.\"O or a
.\"O .B ^
.\"O then any character not enclosed is matched.
括られた文字のうち任意の 1 文字にマッチします。2 つの文字の間にマイナ
ス記号を入れたものは、
.I 範囲
を表します。つまり、辞書的に 2 つの文字の間になる任意の文字と、両端の
 2 文字がマッチします。
.B [
の次の文字が
.B !
または
.B ^
ならば、括られた文字に含まれない任意の文字がマッチします。
.\"O A 
.\"O .B \-
.\"O may be matched by including it as the first or last character
.\"O in the set.
.B \-
は、文字集合の最初または最後の文字として含めるとマッチングの対象にする
ことができます。
.\"O A
.\"O .B ]
.\"O may be matched by including it as the first character
.\"O in the set.
.B ]
は、文字集合の最初の文字として含めるとマッチングの対象にすることができ
ます。
.br
.if t .sp 0.5
.if n .sp 1
.\"O Within
.\"O .B [
.\"O and
.\"O .BR ] ,
.\"O \fIcharacter classes\fP can be specified using the syntax
.\"O \fB[:\fP\fIclass\fP\fB:]\fP, where \fIclass\fP is one of the
.\"O following classes defined in the POSIX.2 standard:
.B [
と
.B ]
の間では、\fI文字クラス (character classes)\fP を指定することができます。
指定には \fB[:\fP\fIclass\fP\fB:]\fP という記法を使います。ここで、
\fIclass\fP は POSIX.2 標準で定義されている以下のクラスのいずれかです:
.PP
.RS
.B
.if n alnum alpha ascii blank cntrl digit graph lower print punct space upper xdigit
.if t alnum   alpha   ascii   blank   cntrl   digit   graph   lower   print   punct   space   upper   xdigit
.br
.\"O A character class matches any character belonging to that class.
文字クラスは、そのクラスの属する任意の文字にマッチします。
.br
.if t .sp 0.5
.if n .sp 1
.\"O Within
.\"O .B [
.\"O and 
.\"O .BR ] ,
.\"O an \fIequivalence class\fP can be specified using the syntax
.\"O \fB[=\fP\fIc\fP\fB=]\fP, which matches all characters with the
.\"O same collation weight (as defined by the current locale) as
.\"O the character \fIc\fP.
.B [
と
.B ]
の間では、\fI同値クラス (equivalence class)\fP を指定することができます。
指定には \fB[=\fP\fIc\fP\fB=]\fP という記法を使います。これは \fIc\fP 
と同じ照合の重み付け (collation weight, 現在のロケールで定義されている
値が使用されます) を持つ全ての文字にマッチします。
.br
.if t .sp 0.5
.if n .sp 1
.\"O Within
.\"O .B [
.\"O and 
.\"O .BR ] ,
.\"O the syntax \fB[.\fP\fIsymbol\fP\fB.]\fP matches the collating symbol
.\"O \fIsymbol\fP.
.B [
と
.B ]
の間では、\fB[.\fP\fIsymbol\fP\fB.]\fP という記述は照合シンボル
\fIsymbol\fP にマッチします。
.\"O WORD: collating symbol	照合シンボル
.RE
.PD
.PP
.\"O If the \fBextglob\fP shell option is enabled using the \fBshopt\fP
.\"O builtin, several extended pattern matching operators are recognized.
.\"O In the following description, a \fIpattern-list\fP is a list of one
.\"O or more patterns separated by a \fB|\fP.
.\"O Composite patterns may be formed using one or more of the following
.\"O sub-patterns:
組み込みコマンドの \fBshopt\fP を使ってシェルのオプション
\fBextglob\fP が有効にされていると、拡張パターンマッチング演算子がいく
つか認識されるようになります。以下の説明では、\fIpattern-list\fP は
\fB|\fP で区切られた 1 つ以上のパターンのリストであるものとします。以
下のサブパターンを 1 つあるいは複数使うことにより、複合パターンを作る
ことができます。
.\"O WORD: composite pattern	複合パターン
.\"O WORD: sub-pattern	サブパターン
.sp 1
.PD 0
.RS
.TP
\fB?(\fP\^\fIpattern-list\^\fP\fB)\fP
.\"O Matches zero or one occurrence of the given patterns
与えられたパターンが 0 回または 1 回現われるとマッチします。
.TP
\fB*(\fP\^\fIpattern-list\^\fP\fB)\fP
.\"O Matches zero or more occurrences of the given patterns
与えられたパターンが 0 回以上現われるとマッチします。
.TP
\fB+(\fP\^\fIpattern-list\^\fP\fB)\fP
.\"O Matches one or more occurrences of the given patterns
与えられたパターンが 1 回以上現われるとマッチします。
.TP
\fB@(\fP\^\fIpattern-list\^\fP\fB)\fP
.\"O Matches exactly one of the given patterns
与えられたパターンのうち 1 つだけにマッチします。
.TP
\fB!(\fP\^\fIpattern-list\^\fP\fB)\fP
.\"O Matches anything except one of the given patterns
与えられたパターンいずれにも含まれないもの全てにマッチします。
.RE
.PD
.\"O .SS Quote Removal
.SS クォートの削除
.PP
.\"O After the preceding expansions, all unquoted occurrences of the
.\"O characters
.\"O .BR \e ,
.\"O .BR ' ,
.\"O and \^\f3"\fP\^ that did not result from one of the above
.\"O expansions are removed.
先に処理される展開の後、クォートされていない
.BR \e ,
.BR ' ,
\^\f3"\fP\^ 
のうち、先の展開の結果でないものは全て削除されます。
