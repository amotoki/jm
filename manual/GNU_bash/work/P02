.\"O .SH "SHELL GRAMMAR"
.SH シェルの文法
.\"O .SS Simple Commands
.SS 単純なコマンド(Simple Commands)
.PP
.\"O A \fIsimple command\fP is a sequence of optional variable assignments
.\"O followed by \fBblank\fP-separated words and redirections, and
.\"O terminated by a \fIcontrol operator\fP.  The first word
.\"O specifies the command to be executed.  The remaining words are
.\"O passed as arguments to the invoked command.
単純なコマンド(\fIsimple command\fP)とは、変数の代入を並べたもの(これ
は省略可能です)の後に、ブランク区切りの単語とリダイレクションを記述し、
最後に制御演算子を置いたものです。最初の単語は実行するコマンドを指定し
ます。残りの単語は起動されるコマンドに引き数として渡されます。
.PP
.\"O The return value of a \fIsimple command\fP is its exit status, or
.\"O 128+\fIn\^\fP if the command is terminated by signal
.\"O .IR n .
単純なコマンドの返り値はコマンドの終了コードですが、シグナル
.IR n
を受けてコマンドが終了した場合には 128+\fIn\^\fP となります。
.\"O .SS Pipelines
.SS パイプライン(Pipeline)
.PP
.\"O A \fIpipeline\fP is a sequence of one or more commands separated by
.\"O the character
.\"O .BR | .
.\"O The format for a pipeline is:
\fIパイプライン(pipeline)\fPは、記号
.BR |
で区切った 1 つ以上のコマンド列です。パイプラインのフォーマットを以下
に示します:
.RS
.PP
[\fBtime\fP [\fB\-p\fP]] [ ! ] \fIcommand\fP [ \fB|\fP \fIcommand2\fP ... ]
.RE
.PP
.\"O The standard output of
.\"O .I command
.\"O is connected to the standard input of
.\"O .IR command2 .
.\"O This connection is performed before any redirections specified by the
.\"O command (see
.\"O .SM
.\"O .B REDIRECTION
.\"O below).
.I command
の標準出力は
.IR command2
に標準入力に接続されます。この接続は、コマンドで指定したどのリダイレク
ションよりも先に実行されます(後述の
.SM
.B リダイレクション
を参照)。
.PP
.\"O If the reserved word
.\"O .B !
.\"O precedes a pipeline, the exit status of that
.\"O pipeline is the logical NOT of the exit status of the last command.
.\"O Otherwise, the status of the pipeline is the exit status of the last
.\"O command.
.\"O The shell waits for all commands in the pipeline to
.\"O terminate before returning a value.
パイプラインの前に予約語である
.B !
がある場合、そのパイプラインの終了ステータスは最後のコマンドの終了ステー
タスの論理値の NOT を取ったものになります。それ以外の場合には、パイプ
ラインのステータスは最後のコマンドの終了ステータスになります。値を返す
前に、シェルはパイプライン中の全てのコマンドが終了するのを待ちます。
.PP
.\"O If the
.\"O .B time
.\"O reserved word precedes a pipeline, the elapsed as well as user and
.\"O system time consumed by its execution are reported when the pipeline
.\"O terminates.
パイプラインの前に予約語
.B time
がある場合、コマンドの実行にかかった経過時間とユーザ時間、システム時間
がパイプラインの終了時に報告されます。
.\"O The \fB\-p\fP option changes the output format to that specified by POSIX.
\fB\-p\fP オプションを指定すると、出力フォーマットが POSIX 仕様に変わ
ります。
.\"O The
.\"O .SM
.\"O .B TIMEFORMAT
.\"O variable may be set to a format string that specifies how the timing
.\"O information should be displayed; see the description of
.\"O .SM
.\"O .B TIMEFORMAT
.\"O under
.\"O .B "Shell Variables"
.\"O below.
変数
.SM
.B TIMEFORMAT
には、経過時間情報の表示の仕方を指定するフォーマット文字列を設定するこ
とができます。後述の
.B シェル変数
の項の
.SM
.B TIMEFORMAT
に関する説明を参照してください。
.PP
.\"O Each command in a pipeline is executed as a separate process (i.e., in a
.\"O subshell).
パイプライン中の各コマンドは、それぞれ別のプロセスとして(つまりサブシェ
ル内で)実行されます。
.\"O .SS Lists
.SS リスト
.PP
.\"O A \fIlist\fP is a sequence of one or more pipelines separated by one
.\"O of the operators
.\"O .BR ; ,
.\"O .BR & ,
.\"O .BR && ,
.\"O or
.\"O .BR \(bv\(bv ,
.\"O and optionally terminated by one of
.\"O .BR ; ,
.\"O .BR & ,
.\"O or
.\"O .BR <newline> .
\fIリスト(list)\fPとは、1つ以上のパイプラインを演算子
.BR ; ,
.BR & ,
.BR && ,
.BR \(bv\(bv
のいずれかで区切って並べ、最後に
.BR ; ,
.BR & ,
.BR <newline> 
のいずれか(これは省略可能です)を置いたものです。
.PP
.\"O Of these list operators,
.\"O .B &&
.\"O and
.\"O .B \(bv\(bv
.\"O have equal precedence, followed by
.\"O .B ;
.\"O and
.\"O .BR &,
.\"O which have equal precedence.
リスト演算子のうち、
.B &&
と
.B \(bv\(bv
の優先順位は同じです。これらの次に、
.B ;
と
.BR &
が同じ優先順位で続きます。
.PP
.\"O If a command is terminated by the control operator
.\"O .BR & ,
.\"O the shell executes the command in the \fIbackground\fP
.\"O in a subshell.  The shell does not wait for the command to
.\"O finish, and the return status is 0.  Commands separated by a
.\"O .B ;
.\"O are executed sequentially; the shell waits for each
.\"O command to terminate in turn.  The return status is the
.\"O exit status of the last command executed.
コマンドが制御演算子
.BR &
で終わっている場合、シェルはコマンドをサブシェル内で
\fIバックグラウンド(background)\fPで実行します。シェルはコマンドが終了
するのを待たずに、返却ステータス 0 を返します。コマンドを
.B ;
で区切った場合には、これらは順番に実行されます。シェルはそれぞれのコマ
ンドが終了するのを順番に待ちます。返されるステータスは、最後に実行した
コマンドの終了ステータスです。
.PP
.\"O The control operators
.\"O .B &&
.\"O and
.\"O .B \(bv\(bv
.\"O denote AND lists and OR lists, respectively.
制御演算子
.B &&
は AND リストを示し、
.B \(bv\(bv
は OR リストを示します。
.\"O An AND list has the form
AND リストは
.RS
.PP
\fIcommand1\fP \fB&&\fP \fIcommand2\fP
.RE
.PP
という形式であり、
.\"O .I command2
.\"O is executed if, and only if,
.\"O .I command1
.\"O returns an exit status of zero.
.I command1
が終了ステータス 0 を返した場合に限り
.I command2
が実行されます。
.PP
.\"O An OR list has the form
OR リストは
.RS
.PP
\fIcommand1\fP \fB\(bv\(bv\fP \fIcommand2\fP
.PP
.RE
.PP
という形式であり、
.\"O .I command2
.\"O is executed if and only if
.\"O .I command1
.\"O returns a non-zero exit status.  The return status of
.\"O AND and OR lists is the exit status of the last command
.\"O executed in the list.
.I command1
が 0 以外の終了ステータスを返した場合に限り
.I command2
が実行されます。AND リストと OR リストの返却ステータスは、リスト中で
最後に実行されたコマンドの終了ステータスです。
.\"O .SS Compound Commands
.SS 複合コマンド(Compound Commands)
.PP
.\"O A \fIcompound command\fP is one of the following:
\fI複合コマンド(compound command)\fPを以下に示します:
.TP
(\fIlist\fP)
.\"O \fIlist\fP is executed in a subshell.  Variable assignments and builtin
.\"O commands that affect the shell's environment do not remain in effect
.\"O after the command completes.  The return status is the exit status of
.\"O \fIlist\fP.
\fIlist\fP はサブシェル内で実行されます。シェルの環境に影響を与えるよ
うな変数の代入や組み込みコマンドは、コマンドの終了後に影響を残しません。
返却ステータスは \fIlist\fP の終了ステータスです。
.TP
{ \fIlist\fP; }
.\"O \fIlist\fP is simply executed in the current shell environment.
.\"O \fIlist\fP must be terminated with a newline or semicolon.
.\"O This is known as a \fIgroup command\fP.
.\"O The return status is the exit status of
.\"O \fIlist\fP.
\fIlist\fP が単に現在のシェル環境で実行されます。\fIlist\fP の最後は改
行文字かセミコロンでなければなりません。これは
\fIグループコマンド(group command)\fP と呼ばれます。返却ステータスは
\fIlist\fP の終了ステータスです。
.TP
((\fIexpression\fP))
.\"O The \fIexpression\fP is evaluated according to the rules described
.\"O below under
.\"O .SM
.\"O .BR "ARITHMETIC EVALUATION" .
\fIexpression\fP が後述の
.SM
.BR 算術式評価
で説明される規則に従って評価されます。
.\"O If the value of the expression is non-zero, the return status is 0;
.\"O otherwise the return status is 1.  This is exactly equivalent to
.\"O \fBlet "\fIexpression\fP"\fR.
式の値が 0 でない場合、返却ステータスは 0 になります。そうでない場合、
返されるステータスは 1 になります。これは \fBlet "\fIexpression\fP"\fR
と全く同じものです。
.TP
\fB[[\fP \fIexpression\fP \fB]]\fP
.\"O Return a status of 0 or 1 depending on the evaluation of
.\"O the conditional expression \fIexpression\fP.
.\"O Expressions are composed of the primaries described below under
.\"O .SM
.\"O .BR "CONDITIONAL EXPRESSIONS" .
条件式 \fIexpression\fP の評価値に従って 0 または 1 を返します。
式は後述の
.SM
.BR 条件式
で説明する、プライマリによって構成されます。
.\"O Word splitting and pathname expansion are not performed on the words
.\"O between the \fB[[\fP and \fB]]\fP; tilde expansion, parameter and
.\"O variable expansion, arithmetic expansion, command substitution, process
.\"O substitution, and quote removal are performed.
単語分割とパス名展開は \fB[[\fP と \fB]]\fP の間の単語に対しては行われ
ません。チルダ展開、パラメータと変数の展開、算術式展開、コマンド置換、
プロセス置換、クォート除去は実行されます。
.if t .sp 0.5
.if n .sp 1
.\"O When the \fB==\fP and \fB!=\fP operators are used, the string to the
.\"O right of the operator is considered a pattern and matched according
.\"O to the rules described below under \fBPattern Matching\fP.
.\"O The return value is 0 if the string matches or does not match
.\"O the pattern, respectively, and 1 otherwise.
.\"O Any part of the pattern may be quoted to force it to be matched as a
.\"O string.
\fB==\fP 演算子と \fB!=\fP 演算子が使われたとき、演算子の右の文字列は
パターンと解釈され、後述の\fBパターンマッチング\fPで説明する規則に従っ
てマッチングが行われます。文字列がパターンにマッチすれば返り値は 0 で
あり、マッチしなければ返り値は 1 になります。パターンの任意の部分を
クォートして、文字列としてマッチさせることもできます。
.if t .sp 0.5
.if n .sp 1
.\"O Expressions may be combined using the following operators, listed
.\"O in decreasing order of precedence:
式は以下の演算子を使って繋げることができます。以下に演算子を優先度の順
に示します:
.if t .sp 0.5
.if n .sp 1
.RS
.PD 0
.TP
.B ( \fIexpression\fP )
.\"O Returns the value of \fIexpression\fP.
.\"O This may be used to override the normal precedence of operators.
\fIexpression\fP の値を返します。これを用いて、演算子の通常の優先度を
変更することができます。
.TP
.B ! \fIexpression\fP
.\"O True if
.\"O .I expression
.\"O is false.
.I expression
が偽ならば真になります。
.TP
\fIexpression1\fP \fB&&\fP \fIexpression2\fP
.\"O True if both
.\"O .I expression1
.\"O and
.\"O .I expression2
.\"O are true.
.I expression1
と
.I expression2
が両方とも真であれば真になります。
.TP
.if t \fIexpression1\fP \fB\(bv\(bv\fP \fIexpression2\fP
.if n \fIexpression1\fP \fB||\fP \fIexpression2\fP
.\"O True if either
.\"O .I expression1
.\"O or
.\"O .I expression2
.\"O is true.
.I expression1
と
.I expression2
のどちらかが真であれば真となります。
.PD
.RE
.LP
.\"O The \fB&&\fP and
.\"O .if t \fB\(bv\(bv\fP
.\"O .if n \fB||\fP
.\"O operators do not execute \fIexpression2\fP if the value of
.\"O \fIexpression1\fP is sufficient to determine the return value of
.\"O the entire conditional expression.
\fIexpression1\fP の値だけで条件式全体の返り値が決定できれば、
\fB&&\fP 演算子と
.if t \fB\(bv\(bv\fP
.if n \fB||\fP
演算子は \fIexpression2\fP を実行しません。
.TP
\fBfor\fP \fIname\fP [ \fBin\fP \fIword\fP ] ; \fBdo\fP \fIlist\fP ; \fBdone\fP
.\"O The list of words following \fBin\fP is expanded, generating a list
.\"O of items.
.\"O The variable \fIname\fP is set to each element of this list
.\"O in turn, and \fIlist\fP is executed each time.
.\"O If the \fBin\fP \fIword\fP is omitted, the \fBfor\fP command executes
.\"O \fIlist\fP once for each positional parameter that is set (see
.\"O .SM
.\"O .B PARAMETERS
.\"O below).
\fBin\fP に続く単語のリストが展開され、要素のリストが生成されます。変
数 \fIname\fP には、このリストの各要素が順番にセットされ、その度に
\fIlist\fP が実行されます。「\fBin\fP \fIword\fP」が省略された場合、
\fBfor\fP コマンドは、設定されている位置付きパラメータそれぞれに対して
\fIlist\fP を一度ずつ実行します(後述の
.SM
.B パラメータ
を参照)。
.\"O The return status is the exit status of the last command that executes.
.\"O If the expansion of the items following \fBin\fP results in an empty
.\"O list, no commands are executed, and the return status is 0.
返却ステータスは実行された最後のコマンドの終了ステータスになります。
\fBin\fP に続く要素を展開した結果が空となった場合、コマンドは全く実行
されず、返却ステータス 0 が返されます。
.TP
\fBfor\fP (( \fIexpr1\fP ; \fIexpr2\fP ; \fIexpr3\fP )) ; \fBdo\fP \fIlist\fP ; \fBdone\fP
.\"O First, the arithmetic expression \fIexpr1\fP is evaluated according
.\"O to the rules described below under
.\"O .SM
.\"O .BR "ARITHMETIC EVALUATION" .
.\"O The arithmetic expression \fIexpr2\fP is then evaluated repeatedly
.\"O until it evaluates to zero.
最初に、算術式\fIexpr1\fPが、後述の
.SM
.BR 算術式評価
で説明される規則に従って評価されます。
次に、算術式\fIexpr2\fPがゼロになるまで繰り返し評価されます。
.\"O Each time \fIexpr2\fP evaluates to a non-zero value, \fIlist\fP is
.\"O executed and the arithmetic expression \fIexpr3\fP is evaluated.
.\"O If any expression is omitted, it behaves as if it evaluates to 1.
.\"O The return value is the exit status of the last command in \fIlist\fP
.\"O that is executed, or false if any of the expressions is invalid.
算術式\fIexpr2\fPの評価結果がゼロでなければ、その度毎に\fIlist\fPが実行され、
算術式\fIexpr3\fPが評価されます。
どの算術式も省略された場合は、評価結果を1と見倣して振る舞います。
返却ステータスは\fIlist\fP中で実行された最後のコマンドの終了ステータス
となりますが、算術式のいずれかが無効である場合には不正な値となります。
.TP
\fBselect\fP \fIname\fP [ \fBin\fP \fIword\fP ] ; \fBdo\fP \fIlist\fP ; \fBdone\fP
.\"O The list of words following \fBin\fP is expanded, generating a list
.\"O of items.  The set of expanded words is printed on the standard
.\"O error, each preceded by a number.  If the \fBin\fP
.\"O \fIword\fP is omitted, the positional parameters are printed (see
.\"O .SM
.\"O .B PARAMETERS
.\"O below).  The
.\"O .B PS3
.\"O prompt is then displayed and a line read from the standard input.
\fBin\fP に続く単語のリストが展開され、要素のリストが生成されます。展
開された単語の集合が番号付きで標準エラー出力に出力されます。
「\fBin\fP \fIword\fP」が省略された場合、位置付きパラメータが出力され
ます(後述の
.SM
.B パラメータ
を参照)。続いて
.B PS3
が表示され、標準入力から 1 行の読み込みが行われます。
.\"O If the line consists of a number corresponding to one of
.\"O the displayed words, then the value of
.\"O .I name
.\"O is set to that word.  If the line is empty, the words and prompt
.\"O are displayed again.  If EOF is read, the command completes.  Any
.\"O other value read causes
.\"O .I name
.\"O to be set to null.  The line read is saved in the variable
.\"O .BR REPLY .
表示された単語のいずれかに対応する数字がこの行に含まれていれば、
.I name
の値としてその単語が設定されます。行が空であれば、単語とプロンプトが再
び表示されます。EOF を読み込むとコマンドが終了します。これ以外の値の場
合には、
.I name
には空文字列が設定されます。読み込んだ行は変数
.BR REPLY
に格納されます。
.\"O The
.\"O .I list
.\"O is executed after each selection until a
.\"O .B break
.\"O or
.\"O .B return
.\"O command is executed.
.B break
または
.B return
コマンドが実行されるまで、選択を行うたびに
.I list
が実行されます。
.\"O The exit status of
.\"O .B select
.\"O is the exit status of the last command executed in
.\"O .IR list ,
.\"O or zero if no commands were executed.
.B select
の終了ステータスは、
.IR list
中で最後に実行したコマンドの終了ステータスですが、コマンドが全く実行さ
れなかった場合には 0 となります。
.TP
\fBcase\fP \fIword\fP \fBin\fP [ [(] \fIpattern\fP [ \fB|\fP \fIpattern\fP ] \
... ) \fIlist\fP ;; ] ... \fBesac\fP
.\"O A \fBcase\fP command first expands \fIword\fP, and tries to match
.\"O it against each \fIpattern\fP in turn, using the same matching rules
.\"O as for pathname expansion (see
.\"O .B Pathname Expansion
.\"O below).  When a match is found, the
.\"O corresponding \fIlist\fP is executed.  After the first match, no
.\"O subsequent matches are attempted.  The exit status is zero if no
.\"O pattern matches.  Otherwise, it is the exit status of the
.\"O last command executed in \fIlist\fP.
\fBcase\fP コマンドは最初に \fIword\fP を展開し、それぞれの
\fIpattern\fP に対して順にマッチングを試みます。マッチングの際にはパス
名展開(後述の
.B パス名展開
を参照)と同じ規則が用いられます。マッチするものが見つかると、これに対
応する \fIlist\fP が実行されます。マッチするものがあれば、それ以降のマッ
チングは行われません。マッチするパターンが無ければ、終了ステータスは 0
になります。マッチするものがあれば、終了ステータスは \fIlist\fP 中で最
後に実行されたコマンドの終了ステータスになります。
.TP
\fBif\fP \fIlist\fP; \fBthen\fP \fIlist;\fP \
[ \fBelif\fP \fIlist\fP; \fBthen\fP \fIlist\fP; ] ... \
[ \fBelse\fP \fIlist\fP; ] \fBfi\fP
.\"O The
.\"O .B if 
.\"O .I list
.\"O is executed.  If its exit status is zero, the
.\"O \fBthen\fP \fIlist\fP is executed.  Otherwise, each \fBelif\fP
.\"O \fIlist\fP is executed in turn, and if its exit status is zero,
.\"O the corresponding \fBthen\fP \fIlist\fP is executed and the
.\"O command completes.  Otherwise, the \fBelse\fP \fIlist\fP is
.\"O executed, if present.  The exit status is the exit status of the
.\"O last command executed, or zero if no condition tested true.
最初に
.B if 
.I list
が実行されます。この終了ステータスが 0 ならば、\fBthen\fP \fIlist\fP
が実行されます。そうでなければ \fBelif\fP \fIlist\fP がそれぞれ順番に
実行され、この終了ステータスが 0 ならば、対応する \fBthen\fP \fIlist\fP
が実行され、コマンドが終了します。そうでなければ、\fBelse\fP \fIlist\fP
が(もし存在すれば)実行されます。終了ステータスは最後に実行されたコマン
ドの終了ステータスですが、真と評価された条件が全く無い場合には 0 とな
ります。
.TP
.PD 0
\fBwhile\fP \fIlist\fP; \fBdo\fP \fIlist\fP; \fBdone\fP
.TP
\fBuntil\fP \fIlist\fP; \fBdo\fP \fIlist\fP; \fBdone\fP
.PD
.\"O The \fBwhile\fP command continuously executes the \fBdo\fP
.\"O \fIlist\fP as long as the last command in \fIlist\fP returns
.\"O an exit status of zero.  The \fBuntil\fP command is identical
.\"O to the \fBwhile\fP command, except that the test is negated;
\fBwhile\fP コマンドは、\fIlist\fP 中の最後のコマンドが終了ステータス
0 を返すまで、繰り返して \fBdo\fP \fIlist\fP を実行します。\fBuntil\fP
コマンドは \fBwhile\fP コマンドとほぼ同じですが、評価の条件が否定とな
る点が異なります。
.\"O the
.\"O .B do
.\"O .I list
.\"O is executed as long as the last command in
.\"O .I list
.\"O returns a non-zero exit status.
.B do
.I list
は、
.I list
中の最後のコマンドが 0 以外の終了ステータスを返す限りずっと実行されま
す。
.\"O The exit status of the \fBwhile\fP and \fBuntil\fP commands
.\"O is the exit status
.\"O of the last \fBdo\fP \fIlist\fP command executed, or zero if
.\"O none was executed.
\fBwhile\fP コマンドと \fBuntil\fP コマンドの終了ステータスは、
\fBdo\fP \fIlist\fP で実行された最後のコマンドの終了ステータスになりま
すが、コマンドが全く実行されなかった場合には 0 になります。
.TP
[ \fBfunction\fP ] \fIname\fP () { \fIlist\fP; }
.\"O This defines a function named \fIname\fP.  The \fIbody\fP of the
.\"O function is the
.\"O .I list
.\"O of commands between { and }.  This list
.\"O is executed whenever \fIname\fP is specified as the
.\"O name of a simple command.  The exit status of a function is
.\"O the exit status of the last command executed in the body.  (See
.\"O .SM
.\"O .B FUNCTIONS
.\"O below.)
\fIname\fP という名前の関数を定義します。関数の\fI本体(body)\fPは、
{ と } で囲まれたコマンドの
.I リスト
です。単純なコマンドの名前として \fIname\fP が指定されると、必ずこのリ
ストが実行されます。関数の終了ステータスは、関数本体で最後に実行された
コマンドの終了ステータスです(後述の
.SM
.B 関数
を参照してください)。
.\"O .SH COMMENTS
.SH コメント(COMMENTS)
.\"O In a non-interactive shell, or an interactive shell in which the
.\"O .B interactive_comments
.\"O option to the
.\"O .B shopt
.\"O builtin is enabled (see
.\"O .SM
.\"O .B "SHELL BUILTIN COMMANDS"
.\"O below), a word beginning with
.\"O .B #
.\"O causes that word and all remaining characters on that line to
.\"O be ignored.  An interactive shell without the
.\"O .B interactive_comments
.\"O option enabled does not allow comments.  The
.\"O .B interactive_comments
.\"O option is on by default in interactive shells.
シェルが対話的でない場合、または対話的なシェルにおいて
組み込みコマンドの
.B shopt
に対する
.B interactive_comments
オプションが有効となっている(後述の
.SM
.B シェルの組み込みコマンド
を参照すること)場合には、
.B #
で始まる単語があると、その単語とその行の残りの文字が全て無視されます。
対話シェルでは、
.B interactive_comments
オプションが有効でなければコメントは使えません。対話シェルでは、
.B interactive_comments
オプションはデフォルトで有効になっています。
.\"O .SH QUOTING
.SH クォート
.\"O \fIQuoting\fP is used to remove the special meaning of certain
.\"O characters or words to the shell.  Quoting can be used to 
.\"O disable special treatment for special characters, to prevent
.\"O reserved words from being recognized as such, and to prevent
.\"O parameter expansion.
\fIクォート(quoting)\fP を使うと、特定の文字や単語のシェルに対する特別
な意味を取り除くことができます。クォートを用いると、特殊文字の特殊な扱
いを無効にすることや、予約語が予約語として識別されることを防いだり、
パラメータの展開を防ぐことができます。
.PP
.\"O Each of the \fImetacharacters\fP listed above under
.\"O .SM
.\"O .B DEFINITIONS
.\"O has special meaning to the shell and must be quoted if it is to
.\"O represent itself.
前述の
.SM
.B 定義
で挙げた\fIメタ文字(metacharacters)\fPにはそれぞれ特殊な意味があるので、
その文字自身を表すためにはクォートしなければなりません。
.PP
.\"O When the command history expansion facilities are being used, the
.\"O \fIhistory expansion\fP character, usually \fB!\fP, must be quoted
.\"O to prevent history expansion.
コマンド履歴展開機能が使われている場合、履歴の展開を防ぐためには、
履歴展開(\fIhistory expansion\fP)文字(普通 \fB!\fP)を
クォートしなければなりません。
.PP
.\"O There are three quoting mechanisms: the
.\"O .IR "escape character" ,
.\"O single quotes, and double quotes.
クォートの方法には、
.IR "エスケープ文字(escape character)" ,
シングルクォート、ダブルクォートの 3 種類があります。
.PP
.\"O A non-quoted backslash (\fB\e\fP) is the
.\"O .IR "escape character" .
.\"O It preserves the literal value of the next character that follows,
.\"O with the exception of <newline>.  If a \fB\e\fP<newline> pair
.\"O appears, and the backslash is not itself quoted, the \fB\e\fP<newline>
.\"O is treated as a line continuation (that is, it is removed from the
.\"O input stream and effectively ignored).
クォートされていないバックスラッシュ(\fB\e\fP)は
.IR エスケープ文字
です。エスケープ文字は <newline> という例外を除き、後に続く文字 1 つの
文字としての値を保持させます。\fB\e\fP<newline> という組合せが現われ、
かつバックスラッシュ自身がクォートされていない場合には、
\fB\e\fP<newline> は行を継続することを表します(つまり、入力ストリーム
から改行文字が削除され、実質的に無視されます)。
.PP
.\"O Enclosing characters in single quotes preserves the literal value
.\"O of each character within the quotes.  A single quote may not occur
.\"O between single quotes, even when preceded by a backslash.
シングルクォートで文字を囲むと、クォート内部のそれぞれの文字は文字とし
ての値を保持します。シングルクォートの間にシングルクォートを置くことは
できません。これはバックスラッシュを前に付けても同じです。
.PP
.\"O Enclosing characters in double quotes preserves the literal value
.\"O of all characters within the quotes, with the exception of
.\"O .BR $ ,
.\"O .BR ` ,
.\"O and
.\"O .BR \e .
ダブルクォートで文字を囲むとクォート内部の全ての文字は文字としての値を
保持しますが、
.BR $ ,
.BR ` ,
.BR \e
は例外となります。
.\"O The characters
.\"O .B $
.\"O and
.\"O .B `
.\"O retain their special meaning within double quotes.  The backslash
.\"O retains its special meaning only when followed by one of the following
.\"O characters:
.\"O .BR $ ,
.\"O .BR ` ,
.\"O \^\fB"\fP\^,
.\"O .BR \e ,
.\"O or
.\"O .BR <newline> .
.B $
と
.B `
はダブルクォートの内部でも特殊な意味を失いません。バックスラッシュの場
合は、次の文字が
.BR $ ,
.BR ` ,
\^\fB"\fP\^,
.BR \e ,
.BR <newline>
のいずれかである場合に限り特殊な意味を失いません。
.\"O A double quote may be quoted within double quotes by preceding it with
.\"O a backslash.
前にバックスラッシュを付けることにより、ダブルクォートをダブルクォート
でクォートすることができます。
.PP
.\"O The special parameters
.\"O .B *
.\"O and
.\"O .B @
.\"O have special meaning when in double
.\"O quotes (see
.\"O .SM
.\"O .B PARAMETERS
.\"O below).
特殊なパラメータである
.B *
と
.B @
は、ダブルクォート内部でも特殊な意味を失いません(後述の
.SM
.B パラメータ
を参照)。
.PP
.\"O Words of the form \fB$\fP'\fIstring\fP' are treated specially.  The
.\"O word expands to \fIstring\fP, with backslash-escaped characters replaced
.\"O as specifed by the ANSI C standard.  Backslash escape sequences, if
.\"O present, are decoded as follows:
\fB$\fP'\fIstring\fP' の形式を持つ単語は特殊な扱いを受けます。この単語
は \fIstring\fP に展開され、それから ANSI C 標準で仕様が決められている、
バックスラッシュでエスケープされている文字に置き換えられます。バックス
ラッシュエスケープシーケンスは、(もし存在すれば)以下のようにデコードさ
れます:
.RS
.PD 0
.TP
.B \ea
.\"O alert (bell)
警告 (ベル)
.TP
.B \eb
.\"O backspace
バックスペース
.TP
.B \ee
.\"O an escape character
エスケープ文字
.TP   
.B \ef
.\"O form feed
フォームフィード文字
.TP  
.B \en
.\"O new line
改行文字
.TP     
.B \er
.\"O carriage return
復帰文字
.TP
.B \et
.\"O horizontal tab
水平タブ文字
.TP   
.B \ev
.\"O vertical tab
垂直タブ文字
.TP
.B \e\e
.\"O backslash
バックスラッシュ
.TP
.B \e'
.\"O single quote
シングルクォート
.TP   
.B \e\fInnn\fP
.\"O the character whose ASCII code is the octal value \fInnn\fP
.\"O (one to three digits)
ASCII コードの 8 進値が \fInnn\fP である文字(1 文字につき数字 3 桁)。
.TP
.B \ex\fInnn\fP
.\"O the character whose ASCII code is the hexadecimal value \fInnn\fP
.\"O (one to three digits)
ASCII コードの 16 進値が \fInnn\fP である文字(1 文字につき数字 3 桁)。
.PD
.RE
.LP
.\"O The expanded result is single-quoted, as if the dollar sign had
.\"O not been present.
展開された結果はシングルクォートされているのと同じ状態で、ドル記号は存
在しなかったかのように扱われます。
.PP
.\"O A double-quoted string preceded by a dollar sign (\fB$\fP) will cause
.\"O the string to be translated according to the current locale.
.\"O If the current locale is \fBC\fP or \fBPOSIX\fP, the dollar sign
.\"O is ignored.
.\"O If the string is translated and replaced, the replacement is
.\"O double-quoted.
ダブルクォートされた文字列の前にドル記号(\fB$\fP)があると、文字列は現
在のロケールに従って変換されます。現在のロケールが \fBC\fP または
\fBPOSIX\fP ならば、ドル記号は無視されます。文字列が変換されたり置換さ
れた場合には、その結果はダブルクォートされているのと同じ状態になります。
