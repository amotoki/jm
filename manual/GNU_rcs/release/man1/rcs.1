.de Id
.ds Rv \\$3
.ds Dt \\$4
..
.Id $Id: rcs.1,v 1.1.1.1 1999/07/19 01:49:14 cvs Exp $
.ds r \&\s-1RCS\s0
.if n .ds - \%--
.if t .ds - \(em
.TH RCS 1 \*(Dt GNU
.SH 名称
rcs \- RCS ファイルの属性を変更する
.SH 書式
.B rcs
.RI [ " options " ] " file " .\|.\|.
.SH 解説
.B rcs
は、新規に \*r ファイルを作成したり、\*r ファイルの属性を変更したりす
ることができます。\*r ファイルは、複数のリビジョン、アクセスリスト、変
更履歴、内容記述、制御属性からなります。
.B rcs
は、実行したユーザが \*r ファイルのアクセスリストに登録されているか、
アクセスリストが空であるか、ユーザが \*r ファイルの所有者であるか、スー
パーユーザであるか、
.B \-i
オプションが指定されている場合にのみ実行できます。
.PP
\*r 拡張子にマッチするファイル名は \*r ファイルであるとみなし、その他
のファイル名はワークファイルであるとみなします。詳しくは、
.BR ci (1)
を参照してくださ
い。リビジョン番号は
.BR ci (1)
に記述されている形式を用います。
.SH オプション
.TP
.B \-i
新たな \*r ファイルを作成し、初期化します。ただし、リビジョンは作成しま
せん。指定されたファイル名にディレクトリ名が含まれていない場合、
.B rcs
はまずカレントディレクトリにある \*r ディレクトリにファイルを作成しよう
と試みます。これに失敗したら、カレントディレクトリに作成しようと試みます。もし、すでに \*r 
ファイルが存在した場合にはエラーとなります。
.TP
.BI \-a "logins"
\*r ファイルのアクセスリストに
.I logins
で指定したユーザ名を追加します。
.I logins
は、コンマで区切ったユーザ名のリストです。
.TP
.BI \-A "oldfile"
.I oldfile
で指定した \*r ファイルのアクセスリストに登録されているユーザ
名を、対象の \*r ファイルのアクセスリストに追加します。
.TP
.BR \-e [\f2logins\fP]
.I logins
で指定したユーザ名を、\*r ファイルのアクセスリストから消去します。
.I logins
が省略された場合は、アクセスリスト全体を消去します。
.TP
.BR \-b [\f2rev\fP]
.I rev
をデフォルトの枝とします。
.I rev
が省略された場合、デフォルト枝は
幹上で最も大きな番号を持つ枝になります。
.TP
.BI \-c string
コメント開始文字列を設定します。コメント開始文字列は、キーワード
.B $\&Log$
が展開されるときのログメッセージの行頭に出力されます。これは、複
数行にわたるコメントをサポートしていないプログラミング言語でキー
ワード
.B Log
を展開する場合に便利です。最初に
.B ci
を起動したとき、あるいは
.B "rcs\ \-i"
に
.B \-c
オプションを指定しなかったときは、コメント開始文字列はワー
クファイルの拡張子から自動的に推測され、デフォルト値として \*r ファイ
ル中に記録されます。
.TP
.BI \-k subst
デフォルトのキーワード展開方式を設定します。キーワード展開の効果につい
ては
.BR co (1)
に記述してあります。
.B co
、
.B rcsdiff
、
.B rcsmerge
に
.B \-k
オプションを指定することで、デフォルトの展開方式を無効にすることができます。
.B "rcs\ \-kv"
を用い
るときは注意してください。なぜなら、
.B \-kv
をデフォルトにすると
.B "co\ \-l"
が動作しないようになるからです。
.B "rcs\ \-kkv"
によって、通常のデフォルト値に戻すことができます。
.TP
.BR \-l [\f2rev\fP]
リビジョン
.I rev
をロックします。
.I rev
が枝を示す場合、枝上の最新のリビジョ
ンがロックされます。
.I rev
が省略された場合、デフォルト枝上の最新のリビジョ
ンがロックされます。ロックすることにより、そのリビジョンのファイルに対して複数の人が
変更することを防止できます。
.B "rcs\ \-u"
により、ロックを解除することができます。
.TP
.BR \-u [\f2rev\fP]
リビジョン
.I rev
をロック解除します。
.I rev
が枝を示す場合、枝上の最新のリ
ビジョンがロック解除されます。
.I rev
が省略された場合、デフォルト枝上の最
新のリビジョンがロック解除されます。通常、ロックしたユーザのみがロック
を解除することができます。他のユーザがロックを解除しようとすると、ロ
ックしたユー
ザへメールが送信されます。メールにはロックを解除する理由等を書いた
コメントを付加します。コメントはロックを解除しようとしたユーザが入力し、
ファイル終端あるいは
.B \&.
のみを含む行を入力することで終了します。
.TP
.B \-L
ロックを厳格に行うモード (以下、厳格モード) に設定します。
厳格ロックを指定すると、\*r ファイルの
所有者であっても、ロックしていないファイルを登録することができなくなりま
す。複数のユーザで共有するようなファイルは本モードで利用すべきです。
.TP
.B \-U
ロックを厳格には行わないモード (以下、非厳格モード) に設定します。
非厳格ロックを指定すると、\*r ファイ
ルの所有者はロックすることなく、新しいリビジョンを登録することができます。複数の
ユーザで共有するファイルは本モードで使用すべきではありま
.B せん
。デフォル
トのロックモードを厳格にするか非厳格にするかは、\*r システムをインストー
ルしたシステム管理者が決めますが、通常は厳格モードです。
.TP
\f3\-m\fP\f2rev\fP\f3:\fP\f2msg\fP
リビジョン
.I rev
のログメッセージを
.I msg
に置換します。
.TP
\f3\-n\fP\f2name\fP[\f3:\fP[\f2rev\fP]]
枝またはリビジョン
.I rev
にシンボリック名
.I name
を関連付けます。
.I \&:
も
.I rev 
も省略した場合、シンボリック名
.I name
は削除されます。
.I name
がすでに別の
リビジョンに関連付けられていた場合はエラーとなります。
.I rev
がシンボリッ
ク名の場合も
.I name
との関連付けは番号によって行われます。枝番号に
.I \&.
を付加したものは、その枝での最新のリビジョンを示します。
.B \&:
だけで
.I rev
を省略した場合、デフォルト枝の最新のリビジョンが関連付けられます。たとえば、
.BI "rcs\ \-n" name ":\ RCS/*"
はすべての \*r ファイルの最新のリビジョンに対してシ
ンボリック名
.I name
を関連付けます。一方、
.B "rcs\ \-n" name ":$ RCS/*"
は各 \*r ファ
イルに対応したワークファイル中のキーワードに含まれるリビジョン番号と 
.I name
を関連付けます。
.TP
\f3\-N\fP\f2name\fP[\f3:\fP[\f2rev\fP]]
.B -n
と同様に動作します。ただし、同じ
.I name
が別のリビジョンに関連付けら
れていてもエラーとはせず、関連付けをしなおしします。
.TP
.BI \-o range
.I range
で指定したリビジョンを削除します。
.I range
がただ 1 つのリビジョン
番号ならば、そのリビジョンを削除します。
.I range
に枝番号が含まれれば、そ
の枝の最新のリビジョンを示します。
.IB rev1 : rev2
形式の範囲指定では、同じ枝
上の
.I rev1
から
.I rev2
までのすべてのリビジョンが削除されます。
.BI : rev
は枝
の開始から
.I rev
までのリビジョンを、
.IB rev :
は同じ枝上の
.I rev
以降のリビジョ
ンのすべてを削除します。削除されるリビジョンにロックや枝があってはいけません。
.TP
.B \-q
診断メッセージは表示されません。
.TP
.B \-I
対話モードで動作します。たとえ標準入力が端末でなくても、ユーザに対して
問い合わせを行います。
.TP
.B \-s\f2state\fP\f1[\fP:\f2rev\fP\f1]\fP
リビジョン
.I rev
の状態を
.I state
にします。
.I rev
が枝番号なら、その枝の最新
のリビジョンの状態を変更します。
.I rev
が省略されたなら、デフォルト枝の最
新リビジョンを変更します。
.I state
としては自由な識別子を指定できます。一
般に用いられる識別子としては、
.B Exp
(experimental: 実験的)、
.B Stab
(stable: 安定した)、
.B Rel
(released: リリースした)があります。デフォルトで
は、
.BR ci (1)
は状態を
.B Exp
にします。
.TP
.BR \-t [\f2file\fP]
\*r ファイルの内容記述テキストをファイル
.I file
の内容で置換します。すで
に存在していた内容記述は削除されます。ファイル名は
.B \-
で始まってはいけ
ません。file が省略された場合、テキストは標準入力から読み込まれ、ファ
イル終端または
.B \&.
のみを含む行で終了します。可能ならば、テキストの入力を
促すプロンプトが表示されます(
.B \-I
オプションの項を参照)。
.B \-i
オプションを
指定すると、
.B \-t
オプションが指定されていなくても内容記述テキストの入力
を求めます。
.TP
.BI \-t\- string
\*r ファイルの内容記述テキストを文字列
.I string
で置換します。すでに存在し
ていた内容記述は削除されます。
.TP
.BI \-V n
\*r システムのバージョン
.I n
のエミュレーションを行います。詳細は
.BR co (1) 
を参照してください。
.TP
.BI \-x "suffixes"
\*r ファイル拡張子を指定します。詳しくは
.BR ci (1)
を参照してください。
.SH 互換性
.BI \-b rev
オプションを指定すると、 \*r バージョン 3 以前では処理できない \*r 
ファイルが生成されます。
.PP
.BI \-k subst
オプションを指定する(
.B \-kkv
は除く)と、 \*r バージョン 4 以前では
処理できない \*r ファイルが生成されます。
.PP
過去のバージョンの \*r で処理できる \*r ファイルを生成するために
.BI "rcs\ \-V" n 
を利用することができます。
.PP
バージョン 5.5 以前の \*r は
.B \-x
オプションをサポートしません。\*r ファ
イルの拡張子としては ,v が用いられます。
.SH 関連ファイル
.B rcs
は
.BR ci (1)
とほぼ同様のファイル群にアクセスします。ただし、アクセスは
すべて実行ユーザ ID によって行われます。また、ワークファイルに書き込みを
行いません。リビジョン番号として
.B $
を指定しなかった場合、ワークファ
イルを読むこともありません。
.SH 環境変数
.TP
.B \s-1RCSINIT\s0
コマンドライン引数に先立って指定すべきオプションを指定します。オプショ
ンは空白で区切って指定します。詳しくは
.BR ci (1)
を参照してください。
.SH 診断
\*r ファイル名、処理対象のリビジョン番号が表示されます。すべての処理が
成功した場合に限り終了ステータス 0 を返します。
.SH 作者
Author: Walter F. Tichy.
.br
Revision Number: \*(Rv; Release Date: \*(Dt.
.br
Copyright \(co 1982, 1988, 1989 by Walter F. Tichy.
.br
Copyright \(co 1990, 1991 by Paul Eggert.
.SH 関連項目
co(1), ci(1), ident(1), rcsdiff(1), rcsintro(1), rcsmerge(1), rlog(1),
rcsfile(5)
.br
Walter F. Tichy,
\*r\*-A System for Version Control,
.I "Software\*-Practice & Experience"
.BR 15 ,
7 (July 1985), 637-654.
.SH バグ
以前の版の
.B rcs
では
.B -o
オプションにおけるリビジョンの区切りは
.B \-
でした。
しかし、これはシンボリック名が
.B \-
を含んでいるときに混乱を生じます。
従来の版との互換性のため、
.B \-
を用いた記法もサポートしますが、この記法
を用いた場合は警告メッセージを表示します。
.PP
シンボリック名が指しているリビジョンが存在するとは限りません。例えば、
.B \-o 
オプションによってリビジョンが削除されてもそれを指すシンボリック名は削
除されずに残っています。シンボリック名を削除するには
.B \-n
オプションを用いる必要があります。
