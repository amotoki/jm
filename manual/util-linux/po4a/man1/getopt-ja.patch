--- getopt.1.orig	2020-04-15 17:31:10.836314658 +0900
+++ getopt.1	2020-04-15 17:35:32.186933252 +0900
@@ -1,8 +1,45 @@
+.\" getopt.c - Enhanced implementation of BSD getopt(1)
+.\" Copyright (c) 1997-2014 Frodo Looijaard <frodo@frodo.looijaard.name>
+.\"
+.\" This program is free software; you can redistribute it and/or modify
+.\" it under the terms of the GNU General Public License as published by
+.\" the Free Software Foundation; either version 2 of the License, or
+.\" (at your option) any later version.
+.\"
+.\" This program is distributed in the hope that it will be useful,
+.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
+.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+.\" GNU General Public License for more details.
+.\"
+.\" You should have received a copy of the GNU General Public License along
+.\" with this program; if not, write to the Free Software Foundation, Inc.,
+.\" 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
+.\"
 .\"*******************************************************************
 .\"
 .\" This file was generated with po4a. Translate the source file.
 .\"
 .\"*******************************************************************
+.\"
+.\" The original version of this translation was contributed 
+.\" to Linux JM project from NetBSD jman proj.
+.\"
+.\" The copyright for the modified parts of the translation blongs to us
+.\" with Linux JM project.
+.\"
+.\" Japanese Version Copyright for the modified parts (c) 2001-2020 Yuichi SATO
+.\"   and 2020 Yoichi Chonan,
+.\"         all rights reserved.
+.\" Translated Tue 11 Jan 1994
+.\"         by NetBSD jman proj. <jman@spa.is.uec.ac.jp>
+.\" Updated Sun Jan 14 04:46:37 JST 2001
+.\"         by Yuichi SATO <sato@complex.eng.hokudai.ac.jp>
+.\" Updated & Modified Sun Mar  2 15:11:49 JST 2003
+.\"         by Yuichi SATO <ysato444@yahoo.co.jp>
+.\" Updated & Modified (util-linux 2.34) Tue Apr 14 12:34:43 JST 2020
+.\"         by Yuichi SATO <ysato444@ybb.ne.jp>
+.\"         and Yoichi Chonan <cyoichi@maple.ocn.ne.jp>
+.\"
 .TH GETOPT 1 "December 2014" util\-linux "User Commands"
 .SH 名前
 getopt \- コマンドのオプションを解析する (強化版)
@@ -32,6 +69,11 @@
 番目の部分の最初のパラメータが、解析の対象となるショートオプションを
 1 つにまとめたショートオプションズ文字列 (すなわち \fIoptsting\fP) として使用される
 (訳注: これは 2 番目の書式のことである)。
+.IP "[\fB訳注\fP]"
+第 3 の書式で、解析の対象になるパラメータをオプションから始めるときは、その前に
+\&'\fB\-\-\fP' を置かなければならないことに気を付けていただきたい。
+そうしないと、\fBgetopt\fP 自体のオプションと誤解されることになる。
+解析の対象をファイル名などから始めるときは、'\fB\-\-\fP' を置かなくてもよい。
 .PP
 環境変数 \fBGETOPT_COMPATIBLE\fP
 が設定されている場合や、最初のパラメータがオプションではない場合 (すなわち、'\fB\-\fP'
@@ -125,6 +167,29 @@
 で対応するように、気を付けて指定しなければならない
 (「\fB用例\fP」セクションを参照)。すべての解析は、GNU \fBgetopt\fP(3)
 のルーティンによって行われる。
+.IP "[\fB訳注\fP]"
+\fBgetopt\fP の使い方の簡単な例を挙げる。
+たとえば、シェル関数やシェルスクリプト中に次のように書く。
+.sp
+.nf
+    PARAM=$(getopt -o 'a:b::c' -- "$@")
+    eval set -- "$PARAM"
+.fi
+.sp
+このようにして、シェル関数やスクリプトに渡された引き数群を、位置パラメータを利用して、
+どれがオプションで、どれがそのオプション引き数、どれがそれ以外か、
+わかりやすいように、処理しやすいように再構成するわけである。
+詳しくは、「\fB出力\fP」セクションや、
+「\fB用例\fP」で述べているスクリプトの見本を参照していただきたい。
+.sp
+「シェル関数を呼んだときに渡す各パラメータは、\fBgetopt\fP
+のパラメータリスト中のパラメータと 1 対 1
+で対応するように、気を付けて指定しなければならない」というのは、
+シェル関数やシェルスクリプトに渡すパラメータでも、
+それが空白などを含むようならクォートしなければならないのはもちろん、以下で説明するような
+\fBgetopt\fP コマンドのパラメータの書式にも従っていなければならないということである。
+たとえば、引き数が任意のショートオプション \fB\-b\fP
+に引き数を指定する場合は、\fB\-bXXX\fP などと、間に空白を置かずに指定しなければならない。
 .PP
 パラメータ群は左から右へ解析される。各パラメータは、ショートオプション、ロングオプション、
 オプションの引き数、オプションとは無関係なパラメータに分割分類される。
@@ -287,10 +352,30 @@
 関数は、引き数が任意のロングオプションが、空の任意引き数を渡された場合でも、解析できる
 (だが、ショートオプションについては、それができない)。この \fBgetopt\fP(1)
 コマンドは、空の任意引き数を、引き数が存在しないかのように処理している。
+.IP "[\fB訳注\fP]"
+詳しく言うと、\fBgetopt\fP(3) (\fBgetopt_long\fP(3)) 関数は、
+引き数が任意のロングオプションに引数がない場合と、空の引き数を渡された場合とを区別している。
+しかし、ショートオプションについては、その区別ができない。
+.sp
+この \fBgetopt\fP(1) コマンドの動作について言うと、第 2、第 3
+の書式では、ロングオプション、ショートオプションを問わず、
+引き数が任意のオプションに引き数が存在しない場合も、引き数が空文字列である場合も、
+オプションの引き数として空文字列を出力する。
+また、第 1 の書式では、引き数が任意のオプションに引き数が存在しない場合も、
+引き数が空文字列の場合も、そのオプションの引き数はまったく出力されない。
+「\fB出力\fP」セクションのショートオプションの説明を参照していただきたい。
+.sp
+要するに、この \fBgetopt\fP コマンドでは、引き数が任意のオプションについて、
+引き数が存在しない場合と引き数が空文字列である場合の区別がまったくないのである。
+だから、バグと言っても、不具合ということではなく、このコマンドと
+\fBgetopt\fP(3) 関数の仕様が微妙に違うことを言っているのだろうと思う。
 .PP
 ショートオプションを全く使いたくない場合の \fBgetopt\fP
 コマンドの構文は、あまり直感的ではない
 (ショートオプションズ文字列を明示的に空文字列にしなければならないのだ)。
+.IP "[\fB訳注\fP]"
+すなわち、\fBgetopt \-o '' \-\-longoptions ...\fP
+のように使用しなければならない。
 .SH 作者
 .MT frodo@frodo.looijaard.name
 Frodo Looijaard
