.\"
.\" Japanese Version Copyright (c) 2004 Yuichi SATO
.\"         all rights reserved.
.\" Translated Mon Mar  8 03:03:53 JST 2004
.\"         by Yuichi SATO <ysato444@yahoo.co.jp>
.\"
.\"WORD:	PCI configuration space	PCI 設定空間
.\"WORD:	vendor			ベンダ
.\"WORD:	verbose			詳細な
.\"
.TH setpci 8 "04 January 2003" "pciutils-2.1.11" "Linux PCI Utilities"
.IX setpci
.\"O .SH NAME
.SH 名前
.\"O setpci \- configure PCI devices
setpci \- PCI デバイスを設定する
.\"O .SH SYNOPSIS
.SH 書式
.B setpci
.RB [ options ]
.B devices
.BR operations ...
.\"O 
.\"O .SH DESCRIPTION
.SH 説明
.PP
.\"O .B setpci
.\"O is a utility for querying and configuring PCI devices.
.B setpci
は PCI デバイスの情報を取得したり設定したりするユーティリティである。

.\"O All numbers are entered in hexadecimal notation.
全ての数値は 16 進数表記で入力される。
.\"O 
.\"O .SH OPTIONS
.SH オプション
.TP
.B -v
.\"O Tells
.\"O .I setpci
.\"O to be verbose and display detailed information about configuration space accesses.
.I setpci
に情況を詳細に報告させ、設定空間アクセスの詳細な情報を表示させる。
.TP
.B -f
.\"O Tells
.\"O .I setpci
.\"O not to complain when there's nothing to do (when no devices are selected).
(デバイスが選択されなかったり) 何もすることがなくても、
.I setpci
にエラーを表示させない。
.\"O This option is intended for use in widely-distributed configuration scripts
.\"O where it's uncertain whether the device in question is present in the machine
.\"O or not.
このオプションは広く配布されている設定スクリプトで使うことを意図している。
この設定スクリプトでは、問題としているデバイスが
マシンに存在するか否かが確かでないためである。
.TP
.B -D
.\"O `Demo mode' -- simulate configuration space accesses instead of really doing them.
「デモモード」 -- 実際に実行しないで設定空間アクセスをシミュレートする。
.\"O It's useful to try
.\"O .B setpci -vD
.\"O to see what your complex sequence of
.\"O .B setpci
.\"O operations does before you actually execute it.
.B setpci -vD
を試してみると、実際に実行する前に
どれだけ複雑な
.B setpci
操作のシーケンスが実行されるかを見ることができて、役に立つ。
.TP
.B --version
.\"O Shows
.\"O .I setpci
.\"O version. This option should be used standalone.
.I setpci
のバージョンを表示する。
このオプションは単独で使用すべきである。
.\"O 
.\"O .SH DEVICE SELECTION
.SH デバイスの選択
.PP
.\"O Before each sequence of operations you need to select which devices you wish that
.\"O operation to affect.
操作のシーケンスの前に、操作の対象としたいデバイスを選択する必要がある。
.TP
.B -s [[<bus>]:][<slot>][.[<func>]]
.\"O Select devices in specified bus, slot and function. Each component of the device
.\"O address can be omitted or set as "*" meaning "any value". All numbers are
.\"O hexadecimal.  E.g., "0:" means all devices on bus 0, "0" means all functions of device 0
.\"O on any bus, "0.3" selects third function of device 0 on all busses and ".4" selects only
.\"O fourth function of each device.
指定されたバス (bus)・スロット (slot)・機能 (func) のデバイスを選択する。
デバイスの指定の各要素は省略可能で、また "*" は「任意の値」を意味する。
全ての数値は 16 進数で入力する。 
例えば、"0:" はバス 0 の全てのデバイスを、
"0" は全てのバスのデバイス 0 で全ての機能を意味し、
"0.3" は全てのバスのデバイス 0 で 3 番目の機能を選択し、
".4" は各デバイスの 4 番目の機能を選択する。
.TP
.B -d [<vendor>]:[<device>]
.\"O Select devices with specified vendor and device ID. Both ID's are given in
.\"O hexadecimal and may be omitted or given as "*" meaning "any value".
指定されたベンダ ID とデバイス ID を持つデバイスを選択する。
両 ID とも 16 進で与えられる。省略も可能である。
また、「任意の値」を意味する "*" を指定することも可能である。
.\"O 
.\"O .SH OPERATIONS
.SH 操作
.PP
.\"O To query value of a configuration register, just name it (either by typing its name or
.\"O by typing register address with optional
.\"O .BR .B ,
.\"O .B .W
.\"O or
.\"O .B .L
.\"O suffix specifying register width as byte, word or longword).
設定レジスタの値を取得するには、単に名前を指定すること
(名前を入力してもよいし、
レジスタのアドレスを入力してもよい。
レジスタのアドレスには、オプションとして
.BR .B ,
.BR .W,
.B .L
というバイト・ワード・ロングワードのレジスタ長を指定する
サフィックスを付けることもできる)。
.PP
.\"O To set a register, write
.\"O .BR reg = values
.\"O where
.\"O .B reg
.\"O is the same you would use to query the register and
.\"O .B values
.\"O is a comma-separated list of values you want to write starting with the given
.\"O address.
レジスタを設定するには
.BR reg = values
と書くこと。
ここで
.B reg
はレジスタの情報を取得するのに使ったのと同じ書式であり、
.B values
は指定したアドレスを開始点として書き込むコンマ区切りの値のリストである。
.\"O 
.\"O .SH REGISTER NAMES
.SH レジスタ名
.PP
.\"O .B setpci
.\"O knows the following configuration register names. See PCI bus specs for their precise
.\"O meaning or consult
.\"O .B /usr/include/linux/pci.h
.\"O for few comments.
.B setpci
は以下の設定レジスタ名を認識する。
これらの正確な意味については、PCI バスの仕様を参照するか、
.B /usr/include/linux/pci.h
にあるいくつかのコメントを見よ。
.PP
.nf
VENDOR_ID
DEVICE_ID
COMMAND
STATUS
REVISION
CLASS_PROG
CLASS_DEVICE
CACHE_LINE_SIZE
LATENCY_TIMER
HEADER_TYPE
BIST
BASE_ADDRESS_0
BASE_ADDRESS_1
BASE_ADDRESS_2
BASE_ADDRESS_3
BASE_ADDRESS_4
BASE_ADDRESS_5
CARDBUS_CIS
SUBSYSTEM_VENDOR_ID
SUBSYSTEM_ID
ROM_ADDRESS
INTERRUPT_LINE
INTERRUPT_PIN
MIN_GNT
MAX_LAT
PRIMARY_BUS
SECONDARY_BUS
SUBORDINATE_BUS
SEC_LATENCY_TIMER
IO_BASE
IO_LIMIT
SEC_STATUS
MEMORY_BASE
MEMORY_LIMIT
PREF_MEMORY_BASE
PREF_MEMORY_LIMIT
PREF_BASE_UPPER32
PREF_LIMIT_UPPER32
IO_BASE_UPPER16
IO_LIMIT_UPPER16
BRIDGE_ROM_ADDRESS
BRIDGE_CONTROL
CB_CARDBUS_BASE
CB_CAPABILITIES
CB_SEC_STATUS
CB_BUS_NUMBER
CB_CARDBUS_NUMBER
CB_SUBORDINATE_BUS
CB_CARDBUS_LATENCY
CB_MEMORY_BASE_0
CB_MEMORY_LIMIT_0
CB_MEMORY_BASE_1
CB_MEMORY_LIMIT_1
CB_IO_BASE_0
CB_IO_BASE_0_HI
CB_IO_LIMIT_0
CB_IO_LIMIT_0_HI
CB_IO_BASE_1
CB_IO_BASE_1_HI
CB_IO_LIMIT_1
CB_IO_LIMIT_1_HI
CB_SUBSYSTEM_VENDOR_ID
CB_SUBSYSTEM_ID
CB_LEGACY_MODE_BASE
.\"O 
.\"O .SH PCILIB OPTIONS
.SH PCILIB オプション
.\"O The PCI utilities use PCILIB (a portable library providing platform-independent
.\"O functions for PCI configuration space access) to talk to the PCI cards. The following
.\"O options control parameters of the library, especially what access method it uses.
PCI utilities は PCI カードとやりとりをするために
PCILIB (PCI 設定空間にアクセスするための機能を提供する、
プラットフォームに依存せず移植性の高いライブラリ) を用いている。
.\"O By default, PCILIB uses the first available access method and displays no debugging
.\"O messages. Each switch is accompanied by a list of hardware/software configurations
.\"O it's supported in.
デフォルトでは、PCILIB はアクセス方法で可能なもののうち最初のものを用い、
何らデバッグメッセージを表示しない。
各々のスイッチには、そのスイッチに対応している
ハードウェア/ソフトウェアの設定リストが付随する。
.\"O 
.TP
.B -P <dir>
.\"O Force use of Linux /proc/bus/pci style configuration access, using
.\"O .B <dir>
.\"O instead of /proc/bus/pci. (Linux 2.1 or newer only)
/proc/bus/pci の代わりに、
.B <dir>
を使った Linux /proc/bus/pci スタイルの設定でアクセスを行わせる。
(Linux 2.1 またはそれ以降でのみ有効)
.TP
.B -H1
.\"O Use direct hardware access via Intel configuration mechanism 1. (i386 and compatible only)
インテル設定メカニズム 1 (Intel configuration mechanism 1) を使って、
ハードウェアに直接アクセスする。(i386 及びその互換でのみ有効)
.TP
.B -H2
.\"O Use direct hardware access via Intel configuration mechanism 2. Warning: This method
.\"O is able to address only first 16 devices on any bus and it seems to be very
.\"O unrealiable in many cases. (i386 and compatible only)
インテル設定メカニズム 2 (Intel configuration mechanism 2) を使って、
ハードウェアに直接アクセスする。
警告: この方法では各バスの最初の 16 デバイスしか扱えず、
多くの場合殆んど信頼できない。(i386 及びその互換でのみ有効)
.TP
.B -S
.\"O Use PCI access syscalls. (Linux on Alpha and UltraSparc only)
PCI アクセスシステムコールを使う。(Alpha/Linux と UltraSparc でのみ有効)
.TP
.B -F <file>
.\"O Extract all information from given file containing output of lspci -x. This is very
.\"O useful for analysis of user-supplied bug reports, because you can display the
.\"O hardware configuration in any way you want without disturbing the user with
.\"O requests for more dumps. (All systems)
lspci -x の実行結果を格納しているファイルから、全ての情報を取り出す。
ユーザーから提供されたバグ報告の解析に役立つ。
なぜならば、さらなるダンプをユーザーに要求する事なく、
ハードウェアの設定をあなたの好きなやり方で表示する事ができる。
(全てのシステムで有効)
.TP
.B -G
.\"O Increase debug level of the library. (All systems)
ライブラリのデバッグレベルを上げる。(全てのシステムで有効)
.\"O 
.\"O .SH EXAMPLES
.SH 例
.PP
.\"O `setpci -d *:* latency_timer=40' sets the latency timer to 64 (40 hexadecimal).
`setpci -d *:* latency_timer=40' レイテンシタイマを
64 (16 進数の 40) に設定する。
.PP
.\"O `setpci -s 0 device_id vendor_id' lists ID's of devices in slot 0 in all busses.
`setpci -s 0 device_id vendor_id' 全てのバスのスロット 0 にある
デバイスの ID をリストする。
.PP
.\"O `setpci -s 12:3.4 3c.l=1,2,3' writes longword 1 to register 3c, 2 to register 3d
.\"O and 3 to register 3e of device at bus 12, slot 3, function 4.
`setpci -s 12:3.4 3c.l=1,2,3' バス 12・スロット 3・機能 4 のデバイスの
レジスタ 3c にロングワード 1、レジスタ 3d に 2、
レジスタ 3e に 3 を書き込む。
.\"O 
.\"O .SH SEE ALSO
.SH 関連項目
.BR lspci (8)
.\"O 
.\"O .SH AUTHOR
.SH 著者
.\"O The Linux PCI Utilities are maintained by Martin Mares <mj@ucw.cz>.
Linux PCI Utilities は Martin Mares <mj@ucw.cz> に
よって保守されている。
