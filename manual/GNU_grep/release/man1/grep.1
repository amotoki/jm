.\"	$Id: grep.1,v 1.1.1.1 1999/07/19 01:49:12 cvs Exp $	-*- nroff -*-
.TH GREP 1 "1992 September 10" "GNU Project"
.SH 名称
grep, egrep, fgrep \- パターンにマッチする行を表示する
.SH 書式
.B grep
[
.BR \- [[ AB "] ]\c"
.I "num"
]
[
.BR \- [ CEFGVBchilnsvwx ]
]
[
.B \-e
]
.I pattern
|
.BI \-f file
] [
.I files...
]
.SH 解説
.B grep
は、
.I files
が指定されていればそのファイルから、ファイルが指定されて
ないか
.I files
の部分に
.B \-
が指定された場合は、標準入力を読み込み、行毎に、
指定したパターンにマッチする部分を含んでいるかどうか調べ、デフォルト動
作では、マッチした行を表示します。
.PP
.BR grep
は、次のオプションにより大きく 3 つの動作に分かれます。
.PD 0
.TP
.B \-G
パターンとして、基本的な正規表現を扱うモード。デフォルトです。
.TP
.B \-E
拡張された正規表現を扱うモードです。ただし、本 grep は、基本の正
規表現と、拡張の正規表現には、表記上の違いはありますが、機能的には差は
ありません。
.TP
.B \-F
パターンとして改行で区切られた固定の文字列パターンのリストを扱
うモードです。
.LP
.B egrep
と
.B fgrep
は、grep にリンクを張ったもので、実体は grep です。grep を egrep
の名前で起動した時の動作は、
.BR "grep\ \-E"
とほぼ同じです。ただし、古い UNIX の
.BR egrep
との互換のため、完全に同じではあ
りません。
.B grep
を
.B fgrep
の名前で起動した場合は、
.BR "grep\ \-F"
と同じです。
.PD
.LP
その他のオプションは以下のものがあります。
.PD 0
.TP
.BI \- num
.I num
で指定した行数だけ、パターンにマッチした行の前後の行もそれぞれ表示します。
.TP
.BI \-A " num"
.I num
で指定した行数だけ、パターンにマッチした行の後の行も表示します。
.TP
.BI \-B " num"
.I num
で指定した行数だけ、パターンにマッチした行の前の行も表示します。
.TP
.B \-C
.BR \-2
を指定した事と同じで、パターンにマッチした行の前後 2 行も表示します。
.TP
.B \-V
grep のバージョン番号を標準エラー出力に表示します。バグレポート
には、この番号を付記してください。
.TP
.B \-b
各行の前に、ファイルの先頭からバイト単位のオフセットを表示します。
.PP
-n	各行の前に、行番号を表示します。
.TP
.B \-c
各行の表示はせず、マッチした行数だけを表示します。
.B \-v
オプションと共に指定した場合は、マッチしなかった行数の表示となります。
.TP
.BI \-e " pattern"
パターンを指定します。パターンの先頭が、
.BR \-
で始まっているなど、オプションの指定と混同される可能性がある時に有効です。
通常は、
.B \-e
を省略してパターンを記述する事ができます。
.TP
.BI \-f " file"
パターンを
.IR file
から読み込みます。
.TP
.B \-h
複数のファイルを指定した場合、デフォルトでは、マッチした行の前
に、ファイル名を付けて表示が行われますが、
.B \-h
を指定した場合は、ファイル名を付けないようにします。
.TP
.B \-i
パターンマッチにおいて、英大文字と小文字の区別をしないようにします。
.TP
.B \-l
通常の表示を抑止し、代わりに、パターンにマッチしたファイルのファ 
イル名を 1 行ずつ表示します。
.B \-v
と共に使用した場合は、マッチしなかったファイル名の表示になります。
.TP
.B \-L
通常の表示を抑止し、代わりに、パターンにマッチしなかったファイル名を表示
します。
.B \-lv
と同じです。
.TP
.B \-q
通常の表示を抑止します。
.TP
.B \-s
指定されたファイルが存在しない場合や、読み込みできなかった時、
デフォルトではエラーメッセージを表示しますが、これを抑止します。
.TP
.B \-v
指定されたパターンにマッチしない行を対象にします。
.TP
.B \-w
パターンマッチを、単語全体で行うようにします。デフォルトの動 
作では、指定されたパターンが行の中のどの部分にマッチしてもかまいません
が、
.B \-w
を指定した場合は、単語単位となります。
単語とは、アルファベット、数字およびア
ンダースコアーからなる文字列で、その前後は、空白など、単語を構成しない
文字や、行頭、行末などで区切られたものです。
そして、行の中の各単語について、単語を構成する文字全てがパター
ンとマッチするかどうか調べます。
.TP
.B \-x
パターンマッチを、行全体で行うようにします。
.PD
.SH "正規表現"
.PP
.B grep
は、基本的な正規表現と 古い UNIX の egrep に相当する拡張正規表現の 2 種
類の正規表現を扱う事ができます。ただし、本 grep (GNU プロダクトの grep) 
では、どちらの表現も機能的に違いありません。他のインプリメントでは、基
本正規表現は、拡張正規表現より制限があるようになっていますが、本 grep で
は、表記上の違いだけです。ここでは、拡張正規表現について説明し、基本正
規表現との違いはその後に説明します。
.PP
正規表現の基本単位は、単一の文字にマッチします。アルファベットや数字な
どの多くの文字は、それ自身にマッチします。また、特殊な意味のある文字も、
バックスラッシュ`\e'を付ける事で、その本来の文字にマッチするようになり
ます。
例えば 
.B 0
は 0 にマッチし、
.B \e[
は [ にマッチします。
.PP
.B [
と
.B ]
で囲まれた文字のリストは、そのリストの中に含まれる文字のどれか
にとマッチすることができます。ただし、リストの先頭に
.B ^
を書いた場合は、そのリストに含まれ
.I ない
文字にマッチします。
例えば、
.B [0123456789]
は数字 1 文字にマッチします。
.B [^0123456789]
は数字以外の 1 文字にマッチします。
.PP
2 つの文字の間に `-' を付けることで、前後 2 つの文字の ASCII キャラクタコー
ドの間にある文字全体を指定することができます。
例えば、
.B [0-9]
は数字 1 文字にマッチします。
[:クラス名:]で、特定の文字クラスを指定することができます。クラスには、
.BR [:alnum:] ,
.BR [:alpha:] ,
.BR [:cntrl:] ,
.BR [:digit:] ,
.BR [:graph:] ,
.BR [:lower:] ,
.BR [:print:] ,
.BR [:punct:] ,
.BR [:space:] ,
.BR [:upper:] ,
.BR [:xdigit:]
があります。
例えば、
.B [[:alnum:]]
は
.BR [0-9A-Za-z]
と同じですが、
.B [:alnum:]
で指定した方が ASCII コード順に依存しません。
.PP
リストの中では、ほとんどの特殊文字は、通常の文字として扱われます。
また、次の文字も、リストの中の位置によっては、通常の文字として扱われます。
.TP
.B ]
リストの先頭にあれば、] にマッチ
.TP
.B ^
リストの先頭以外にあれば、^ にマッチ
.TP
.B \-
リストの最後にあれば、\- にマッチ
.PP
例えば、[][] は ] か [ にマッチします。
.PP
次の表現は、特殊な意味があります。
.TP
.B .
任意の 1 文字にマッチ
.TP
.B \ew
.B [[:alnum:]]
と同じで、アルファベットと数字にマッチ
.TP
.B \eW
.BR [^[:alnum:]]
と同じで、アルファベットと数字以外にマッチ
.PP
.TP
.B ^
行の先頭にマッチ
.TP
.B $
行の最後にマッチ
.TP
.B \e<
単語の先頭にマッチ
.TP
.B \e>
単語の最後にマッチ
.TP
.B \eb
単語の端にマッチ
.TP
.B \eB
単語の端
.I 以外
にマッチ
.PP
次の表現は、他の正規表現を修飾します。拡張正規表現です。
.PD 0
.TP
.B ?
他の正規表現の後に指定し、0 回か 1 回マッチさせます。マッチしない場
合も一致とします。
.TP
.B *
他の正規表現の後に指定し、0 回以上マッチさせます。マッチしない場合も
一致とします。
.TP
.B +
他の正規表現の後に指定し、その正規表現を 1 回以上マッチさせます。
なお、少なくとも 1 回はマッチしなくてはいけません。
.TP
.BI { n }
他の正規表現の後に指定し、厳密に
.I n
回マッチさせます。
.TP
.BI { n ,}
他の正規表現の後に指定し、
.I n
回以上マッチさせます。
.TP
.BI {, m }
他の正規表現の後に指定し、
.I m
回以下でマッチさせます。
.TP
.BI { n , m }
他の正規表現の後に指定し、
.I n
回以上
.I m
回以下でマッチさせます。
.TP
.BR |
2 つの正規表現の間に指定し、どちらか一方がマッチすれば一致とします。
.TP
.BI ( )
括弧でくくった正規表現をひとまとまりでマッチさせます。繰り返しなどの
修飾は、このまとまりに対しての指定になります。
.TP
.BI \e n\c
括弧で括った正規表現のまとまりは、出て来た順番に番号が振られており、
そのうちの
.I n
番目のものを繰り返します。
.PD
例えば、taro|hanako は `taro' か `hanako' にマッチします。
`su(momo)mo\e1mo\e1nouti' は `sumomomomomomomomonouti' にマッチします
.PP
基本正規表現では、
.BR ? ,
.BR + ,
.BR { ,
.BR | ,
.BR ( ,
.BR )
は、正規表現としての特殊な意味は
持たず、その文字本来のパターンにマッチします。代わりに、
.BR \e? ,
.BR \e+ ,
.BR \e{ ,
.BR \e| ,
.BR \e( ,
.BR \e)
を使う事で、拡張正規表現と同じ機能を持ちまます。
.PP
.B egrep
として起動した場合、
.B {
は、正規表現としての特殊な意味は持ちません。
.SH 戻り値
パターンにマッチした行が見つかった場合は、0 を、見つからなかった場合は、1 を
返します。ただし、
.B \-v
オプションが指定された場合は、逆になります。パターンの指定の仕方が間違って
いたり、ファイルがアクセスできないなどのエラーがおきた場合は、2 を返します。
.SH バグ
バグレポートは、
.BR bug-gnu-utils@prep.ai.mit.edu
まで Email してください。この時、``Subject:'' のどこにでもいいですから
``grep'' という単語を
忘れずに入れてください。
