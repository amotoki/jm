.\" Copyright (c) 1994-1996, 1998-2005, 2007-2009
.\" 	Todd C. Miller <Todd.Miller@courtesan.com>
.\" 
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\" 
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\" ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\" 
.\" Sponsored in part by the Defense Advanced Research Projects
.\" Agency (DARPA) and Air Force Research Laboratory, Air Force
.\" Materiel Command, USAF, under agreement number F39502-99-1-0512.
.\" 
.\" Japanese Version Copyright (c) 2000-2002 Yuichi SATO
.\"   and 2009 Yoichi Chonan
.\"         all rights reserved.
.\" Translated Sat Oct  7 14:39:18 JST 2000
.\"         by Yuichi SATO <ysato444@yahoo.co.jp>
.\" Updated & Modified Fri Dec  6 04:40:44 JST 2002 by Yuichi SATO
.\" New Translation (sudo-1.6.9p17) Fri Jan 23 10:31:17 JST 2009
.\"         by Yoichi Chonan <cyoichi@maple.ocn.ne.jp>
.\" Updated & Modified (sudo-1.7.2p1) Sat Nov 14 21:15:16 JST 2009
.\"         by Yoichi Chonan
.\"
.\" $Sudo: sudo.man.in,v 1.56 2009/06/29 13:36:42 millert Exp $
.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` 
.    ds C' 
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "SUDO 8"
.TH SUDO 8 "June 15, 2009" "1.7.2p1" "MAINTENANCE COMMANDS"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.\"O .SH "NAME"
.SH "名前"
.\"O sudo, sudoedit \- execute a command as another user
sudo, sudoedit \- コマンドを別のユーザとして実行する
.\"O .SH "SYNOPSIS"
.SH "書式"
.IX Header "SYNOPSIS"
\&\fBsudo\fR \fB\-h\fR | \fB\-K\fR | \fB\-k\fR | \fB\-L\fR | \fB\-V\fR
.PP
\&\fBsudo\fR \fB\-v\fR [\fB\-AknS\fR]
.\" [\fB\-a\fR\ \fIauth_type\fR]
[\fB\-p\fR\ \fIprompt\fR]
.PP
\&\fBsudo\fR \fB\-l[l]\fR [\fB\-AknS\fR]
.\" [\fB\-a\fR\ \fIauth_type\fR]
[\fB\-g\fR\ \fIgroupname\fR|\fI#gid\fR] [\fB\-p\fR\ \fIprompt\fR]
[\fB\-U\fR\ \fIusername\fR] [\fB\-u\fR\ \fIusername\fR|\fI#uid\fR] [\fIcommand\fR]
.PP
\&\fBsudo\fR [\fB\-AbEHnPS\fR]
.\" [\fB\-a\fR\ \fIauth_type\fR]
[\fB\-C\fR\ \fIfd\fR]
.\" [\fB\-c\fR\ \fIclass\fR|\fI\-\fR]
[\fB\-g\fR\ \fIgroupname\fR|\fI#gid\fR] [\fB\-p\fR\ \fIprompt\fR]
.\" [\fB\-r\fR\ \fIrole\fR] [\fB\-t\fR\ \fItype\fR]
[\fB\-u\fR\ \fIusername\fR|\fI#uid\fR]
[\fB\s-1VAR\s0\fR=\fIvalue\fR] [\fB\-i\fR\ |\ \fB\-s\fR] [\fIcommand\fR]
.PP
\&\fBsudoedit\fR [\fB\-AnS\fR]
.\" [\fB\-a\fR\ \fIauth_type\fR]
[\fB\-C\fR\ \fIfd\fR]
.\" [\fB\-c\fR\ \fIclass\fR|\fI\-\fR]
[\fB\-g\fR\ \fIgroupname\fR|\fI#gid\fR] [\fB\-p\fR\ \fIprompt\fR]
[\fB\-u\fR\ \fIusername\fR|\fI#uid\fR] file ...
.\"O .SH "DESCRIPTION"
.SH "説明"
.IX Header "DESCRIPTION"
.\"O \&\fBsudo\fR allows a permitted user to execute a \fIcommand\fR as the
.\"O superuser or another user, as specified in the \fIsudoers\fR file.
.\"O The real and effective uid and gid are set to match those of the
.\"O target user as specified in the passwd file and the group vector
.\"O is initialized based on the group file (unless the \fB\-P\fR option was
.\"O specified).  If the invoking user is root or if the target user is
.\"O the same as the invoking user, no password is required.  Otherwise,
.\"O \&\fBsudo\fR requires that users authenticate themselves with a password
.\"O by default (\s-1NOTE:\s0 in the default configuration this is the user's
.\"O password, not the root password).  Once a user has been authenticated,
.\"O a timestamp is updated and the user may then use sudo without a
.\"O password for a short period of time (\f(CW\*(C`5\*(C'\fR minutes unless
.\"O overridden in \fIsudoers\fR).
.\"O .PP
\&\fBsudo\fR を使用すると、許可されたユーザが、スーパーユーザを始め
自分以外のユーザに変身して、コマンドを実行することが可能になる。
許可の範囲については、\fIsudoers\fR ファイルで指定する。実 uid と gid 、
実効 uid と gid は、変身の対象になるユーザの、passwd ファイルに
明記されているものと同一になるようにセットされる。所属するグループに
ついても (\fB-P\fR オプションが指定されていないかぎり)、group ファイルに
基づいて初期化される。\fBsudo\fR を起動するユーザが root だったり、
変身の対象になるユーザが \fBsudo\fR を起動するユーザと同一だったり
する場合は、パスワードは要求されない。それ以外の場合は、パスワードを
要求して、本人であることを証明するように求めるのが、\fBsudo\fR の
デフォルトの動作である (\s-1注意:\s0 デフォルトの設定では、
求められるのは \fBsudo\fR を実行するユーザのパスワードであって、
root のパスワードではない)。ユーザの認証がすむと、タイムスタンプが
更新され、ユーザはしばらくの間 (\fIsudoers\fR で設定が変更されて
いないかぎり \f(CW\*(C`5\*(C'\fR 分間) パスワードなしで \fBsudo\fR を
使用することができる。
.PP
.\"O When invoked as \fBsudoedit\fR, the \fB\-e\fR option (described below),
.\"O is implied.
.\"O .PP
\&\fBsudoedit\fR というコマンド名で起動するのは、\fBsudo\fR に \fB-e\fR 
オプション (下記参照) を付けて実行するのと同じである。
.PP
.\"O \&\fBsudo\fR determines who is an authorized user by consulting the file
.\"O \&\fI/etc/sudoers\fR.  By running \fBsudo\fR with the \fB\-v\fR option,
.\"O a user can update the time stamp without running a \fIcommand\fR. The
.\"O password prompt itself will also time out if the user's password
.\"O is not entered within \f(CW\*(C`5\*(C'\fR minutes (unless overridden
.\"O via \fIsudoers\fR).
.\"O .PP
\&\fBsudo\fR は \fI/etc/sudoers\fR ファイルを参照して、誰に \fBsudo\fR を
使用する権限があるかを判断する。\fBsudo\fR に \fB-v\fR オプションを
付けて動かすと、ユーザはコマンドを実行せずに、タイムスタンプを
更新することができる。ユーザが \f(CW\*(C`5\*(C'\fR 分以内にパスワードを
入力しないと、パスワードプロンプトそのものも (\fIsudoers\fR で設定が
変更されていないかぎり)、タイムアウトする。
.PP
.\"O If a user who is not listed in the \fIsudoers\fR file tries to run a
.\"O command via \fBsudo\fR, mail is sent to the proper authorities, as
.\"O defined at configure time or in the \fIsudoers\fR file (defaults to
.\"O \&\f(CW\*(C`root\*(C'\fR).  Note that the mail will not be sent if an unauthorized
.\"O user tries to run sudo with the \fB\-l\fR or \fB\-v\fR option.  This allows
.\"O users to determine for themselves whether or not they are allowed
.\"O to use \fBsudo\fR.
.\"O .PP
\&\fIsudoers\fR ファイルに名前の載っていないユーザが \fBsudo\fR を使って
コマンドを実行しようとすると、しかるべき権威者にメールが送付される。
誰にメールを送るかは、プログラムを configure するときに決めることが
できるが、\fIsudoers\fR ファイルで指定してもよい (デフォルトの宛先は 
\&\f(CW\*(C`root\*(C'\fR である)。\fBsudo\fR を使用する権限のない
ユーザが、\fB-l\fR や \fB-v\fR オプションを付けて \fBsudo\fR を
実行しようとしても、メールは送付されないことに注意してほしい。
これによって、自分が \fBsudo\fR を使用できるかどうか、ユーザが自分で
判断できるようになっているのである。
.PP
.\"O If \fBsudo\fR is run by root and the \f(CW\*(C`SUDO_USER\*(C'\fR environment variable
.\"O is set, \fBsudo\fR will use this value to determine who the actual
.\"O user is.  This can be used by a user to log commands through sudo
.\"O even when a root shell has been invoked.  It also allows the \fB\-e\fR
.\"O option to remain useful even when being run via a sudo-run script or
.\"O program.  Note however, that the sudoers lookup is still done for
.\"O root, not the user specified by \f(CW\*(C`SUDO_USER\*(C'\fR.
.\"O .PP
\&\fBsudo\fR が root によって実行されたとき、環境変数 
\&\f(CW\*(C`SUDO_USER\*(C'\fR がセットされていると、\fBsudo\fR は
実際のユーザが誰かを決めるのに、その変数の値を使用することになる。ユーザは
この動作を利用することで、すでにルート・シェルを呼び出しているときでも、
自分がそこからさらに \fBsudo\fR 経由で使用したコマンドのログを取ることが
できる。またこのことによって、\fBsudo\fR で実行したスクリプトや
プログラムから呼び出される場合でも、\fB-e\fR オプションが相変わらず
便利なものになっている。とは言え、こうした場合でも、\fIsudoers\fR の
参照は、やはり root に対してなされるのであって、
\&\f(CW\*(C`SUDO_USER\*(C'\fR が指定するユーザに対してではないことに
注意してほしい。
.PP
.\"O \&\fBsudo\fR can log both successful and unsuccessful attempts (as well
.\"O as errors) to \fIsyslog\fR\|(3), a log file, or both.  By default \fBsudo\fR
.\"O will log via \fIsyslog\fR\|(3) but this is changeable at configure time
.\"O or via the \fIsudoers\fR file.
\&\fBsudo\fR は、実行の試みが成功した場合も失敗した場合も、そのことを 
(エラー内容とともに) \fIsyslog\fR\|(3) なり独自のログファイルなり、
あるいはその両方なりに書き出すことができる。デフォルトでは、\fBsudo\fR は 
\fIsyslog\fR\|(3) 経由でログを記録するが、この動作は configure 時に、
あるいは \&\fIsudoers\fR ファイルによって、変更可能である。
.\"O .SH "OPTIONS"
.SH "オプション"
.IX Header "OPTIONS"
.\"O \&\fBsudo\fR accepts the following command line options:
\&\fBsudo\fR では以下のコマンドライン・オプションが使用できる。
.IP "\-A" 12
.IX Item "-A"
.\"O Normally, if \fBsudo\fR requires a password, it will read it from the
.\"O current terminal.  If the \fB\-A\fR (\fIaskpass\fR) option is specified,
.\"O a (possibly graphical) helper program is executed to read the
.\"O user's password and output the password to the standard output.  If
.\"O the \f(CW\*(C`SUDO_ASKPASS\*(C'\fR environment variable is set, it specifies the
.\"O path to the helper program.  Otherwise, the value specified by the
.\"O \&\fIaskpass\fR option in \fIsudoers\fR\|(5) is used.
通常 \fBsudo\fR がパスワードを要求するとき、パスワードは現在使用している
ターミナルから読み込まれる。\fB\-A\fR (\fIaskpass\fR) を指定した場合は、
ヘルパー・プログラム (グラフィカルなものでもよい) が実行されて、ユーザの
パスワードを読み込み、それを標準出力に書き出す。
環境変数 \f(CW\*(C`SUDO_ASKPASS\*(C'\fR が設定されているときは、
それがヘルパー・プログラムのパスになる。それ以外の場合は、
\&\fIsudoers\fR\|(5) の \fIaskpass\fR オプションが指定している値が使用される。
.\" .IP "\-a \fItype\fR" 12
.\" .IX Item "-a type"
.\" The \fB\-a\fR (\fIauthentication type\fR) option causes \fBsudo\fR to use the
.\" specified authentication type when validating the user, as allowed
.\" by \fI/etc/login.conf\fR.  The system administrator may specify a list
.\" of sudo-specific authentication methods by adding an \*(L"auth-sudo\*(R"
.\" entry in \fI/etc/login.conf\fR.  This option is only available on systems
.\" that support \s-1BSD\s0 authentication.
.\" \&\fB\-a\fR (\fIauthentication type\fR) オプションを使うと、\fBsudo\fR は
.\" ユーザの認証に、指定したタイプの認証方法を使用するようになる。ただし、
.\" その認証のタイプは \fI/etc/login.conf\fR で有効になっていなければなら
.\" ない。システム管理者は \fI/etc/login.conf\fR に \*(L"auth-sudo\*(R" 
.\" 項目を追加することによって、\fBsudo\fR 専用の認証方法のリストを指定す
.\" ることができる。このオプションは \s-1BSD\s0 認証に対応したシステムでの
.\" み有効である。
.IP "\-b" 12
.IX Item "-b"
.\"O The \fB\-b\fR (\fIbackground\fR) option tells \fBsudo\fR to run the given
.\"O command in the background.  Note that if you use the \fB\-b\fR
.\"O option you cannot use shell job control to manipulate the process.
\&\fB\-b\fR (\fIbackground\fR) オプションを付けると、\fBsudo\fR は
指定されたコマンドをバックグラウンドで実行する。\fB-b\fR オプションを
使用すると、シェルのジョブ制御を使ってプロセスを操作できなくなるので
注意してほしい。
.IP "\-C \fIfd\fR" 12
.IX Item "-C fd"
.\"O Normally, \fBsudo\fR will close all open file descriptors other than
.\"O standard input, standard output and standard error.  The \fB\-C\fR
.\"O (\fIclose from\fR) option allows the user to specify a starting point
.\"O above the standard error (file descriptor three).  Values less than
.\"O three are not permitted.  This option is only available if the
.\"O administrator has enabled the \fIclosefrom_override\fR option in
.\"O \&\fIsudoers\fR\|(5).
通常 \fBsudo\fR は、標準入力、標準出力、標準エラーを除いて、オープンした
すべてのファイル・ディスクリプタをクローズする。これに対し、
\&\fB\-C\fR (\fIclose from\fR) オプションを使用すると、
標準エラーより番号の大きい (すなわち、ファイル・ディスクリプタ 3 以上の)
どのファイル・ディスクリプタからクローズして行くかを、ユーザが指定できる
ようになる。3 未満の値は許可されない。このオプションが使用できるのは、
管理者が \fIsudoers\fR\|(5) 中で \fIclosefrom_override\fR オプションを
有効にしたときだけである。
.\" .IP "\-c \fIclass\fR" 12
.\" .IX Item "-c class"
.\" The \fB\-c\fR (\fIclass\fR) option causes \fBsudo\fR to run the specified command
.\" with resources limited by the specified login class.  The \fIclass\fR
.\" argument can be either a class name as defined in \fI/etc/login.conf\fR,
.\" or a single '\-' character.  Specifying a \fIclass\fR of \f(CW\*(C`\-\*(C'\fR indicates
.\" that the command should be run restricted by the default login
.\" capabilities for the user the command is run as.  If the \fIclass\fR
.\" argument specifies an existing user class, the command must be run
.\" as root, or the \fBsudo\fR command must be run from a shell that is already
.\" root.  This option is only available on systems with \s-1BSD\s0 login classes.
.\" \&\fB\-c\fR (\fIclass\fR) オプションを付けると、その指定した
.\" login class のリソースの制限内で、\fBsudo\fR は指定されたコマンドを
.\" 実行する。\fB-c\fR の引き数 \fIclass\fR に使うことができるのは、
.\" \&\fI/etc/login.conf\fR で定義された class 名か、一個の '\-' 文字である。
.\" \&\fIclass\fR に \f(CW\*(C`\-\*(C'\fR を指定すると、コマンドは
.\" 実行されるとき、変身対象ユーザのデフォルトのログイン権限によって
.\" 制限されることになる。引き数 \fIclass\fR が実在する user class を
.\" 指している場合は、コマンドを root として実行するか、あるいはすでに root 
.\" になったシェルで \fBsudo\fR コマンドを実行するかしなければならない。 
.\" このオプションは、\s-1BSD\s0 login class が存在するシステムでのみ
.\" 有効である。
.IP "\-E" 12
.IX Item "-E"
.\"O The \fB\-E\fR (\fIpreserve\fR \fIenvironment\fR) option will override the
.\"O \&\fIenv_reset\fR option in \fIsudoers\fR\|(5)).  It is only
.\"O available when either the matching command has the \f(CW\*(C`SETENV\*(C'\fR tag
.\"O or the \fIsetenv\fR option is set in \fIsudoers\fR\|(5).
\&\fB\-E\fR (\fIpreserve\fR \fIenvironment\fR) オプションは 
\&\fIsudoers\fR\|(5) ファイルの \fIenv_reset\fR オプションを無効にする。
これが使用できるのは、マッチするコマンドに \f(CW\*(C`SETENV\*(C'\fR タグが
付いているときか、
\&\fIsudoers\fR\|(5) で \fIsetenv\fR オプションがセットされているとき
だけである。
.IP "\-e" 12
.IX Item "-e"
.\"O The \fB\-e\fR (\fIedit\fR) option indicates that, instead of running
.\"O a command, the user wishes to edit one or more files.  In lieu
.\"O of a command, the string \*(L"sudoedit\*(R" is used when consulting
.\"O the \fIsudoers\fR file.  If the user is authorized by \fIsudoers\fR
.\"O the following steps are taken:
\&\fB\-e\fR (\fIedit\fR) オプションを指定するのは、ユーザーがコマンドの
実行ではなく、一つ以上のファイルの編集を望んでいるということである。
\&\fIsudoers\fR ファイルの参照では、コマンドとして
文字列 \*(L"sudoedit\*(R" が使用される。
\&\fIsudoers\fR ファイルによってユーザに権限があることが認められると、
次のようなことが順番に行われる。
.RS 12
.IP "1." 4
.\"O Temporary copies are made of the files to be edited with the owner
.\"O set to the invoking user.
編集対象のファイルのコピーをテンポラリファイルとして作成する。
テンポラリファイルのオーナーは \fBsudo\fR を起動したユーザである。
.IP "2." 4
.\"O The editor specified by the \f(CW\*(C`SUDO_EDITOR\*(C'\fR, \f(CW\*(C`VISUAL\*(C'\fR or \f(CW\*(C`EDITOR\*(C'\fR
.\"O environment variables is run to edit the temporary files.  If none
.\"O of \f(CW\*(C`SUDO_EDITOR\*(C'\fR, \f(CW\*(C`VISUAL\*(C'\fR or \f(CW\*(C`EDITOR\*(C'\fR are set, the first program
.\"O listed in the \fIeditor\fR \fIsudoers\fR variable is used.
環境変数 \f(CW\*(C`SUDO_EDITOR\*(C'\fR, \f(CW\*(C`VISUAL\*(C'\fR,
\&\f(CW\*(C`EDITOR\*(C'\fR のいづれかで指定されたエディタを起動して、
テンポラリファイルを編集する。
\&\f(CW\*(C`SUDO_EDITOR\*(C'\fR, \f(CW\*(C`VISUAL\*(C'\fR,
\&\f(CW\*(C`EDITOR\*(C'\fR のいづれも設定されていないときは、
\&\fIsudoers\fR ファイルの \fIeditor\fR 変数にリストされた
最初のプログラムが使用される。
.IP "3." 4
.\"O If they have been modified, the temporary files are copied back to
.\"O their original location and the temporary versions are removed.
編集作業がすむと、テンポラリファイルをオリジナルのファイルに書き戻して、
テンポラリファイルを消去する。
.RE
.RS 12
.Sp
.\"O If the specified file does not exist, it will be created.  Note
.\"O that unlike most commands run by \fBsudo\fR, the editor is run with
.\"O the invoking user's environment unmodified.  If, for some reason,
.\"O \&\fBsudo\fR is unable to update a file with its edited version, the
.\"O user will receive a warning and the edited copy will remain in a
.\"O temporary file.
指定されたファイルが存在しない場合は作成する。ここで注意すべきは、
\&\fBsudo\fR によって実行されるコマンドの大部分と違って、
\&\fB\-e\fR でエディタが実行されるときは、\fBsudo\fR を起動した
ユーザの環境が、変更を受けずにそのまま使われるということである。
何らかの理由で \fBsudo\fR が編集した内容でファイルを更新できないときは、
ユーザに警告を発し、編集した内容をテンポラリファイルに保持することになる。
.RE
.IP "\-g \fIgroup\fR" 12
.IX Item "-g group"
.\"O Normally, \fBsudo\fR sets the primary group to the one specified by
.\"O the passwd database for the user the command is being run as (by
.\"O default, root).  The \fB\-g\fR (\fIgroup\fR) option causes \fBsudo\fR to run
.\"O the specified command with the primary group set to \fIgroup\fR.  To
.\"O specify a \fIgid\fR instead of a \fIgroup name\fR, use \fI#gid\fR.  When
.\"O running commands as a \fIgid\fR, many shells require that the '#' be
.\"O escaped with a backslash ('\e').  If no \fB\-u\fR option is specified,
.\"O the command will be run as the invoking user (not root).  In either
.\"O case, the primary group will be set to \fIgroup\fR.
通常 sudo はプライマリ・グループを、passwd データベースで
変身対象ユーザ (デフォルトでは root) のプライマリ・グループとして
指定されているグループに設定する。これに対し、\fB\-g\fR (\fIgroup\fR)
オプションを使用すると、\fBsudo\fR はプライマリ・グループを \fIgroup\fR に
設定して、指定のコマンドを実行することになる。グループ名の代わりに
\&\fIgid\fR を指定するときは、\fI#gid\fR という書き方をする。
多くのシェルでは、\fIgid\fR としてコマンドを実行するときは、'#' を
バックスラッシュ ('\e') でエスケープしなければならない。なお、
\&\fB\-u\fR オプションを同時に指定しない場合、コマンドは (root として
ではなく) \fBsudo\fR を起動するユーザの資格で実行されることになる。
いづれにしろ、プライマリ・グループが \fIgroup\fR に
設定されることに変わりはない。
(訳注: \fB\-g\fR オプションを使用するには、\fIsudoers\fR ファイルの
ユーザ設定で変身対象となるグループを設定しておく必要がある。詳細については、
\&\fIsudoers\fR\|(5) のマニュアルの該当個所を参照してほしい。)
.IP "\-H" 12
.IX Item "-H"
.\"O The \fB\-H\fR (\fI\s-1HOME\s0\fR) option sets the \f(CW\*(C`HOME\*(C'\fR environment variable
.\"O to the homedir of the target user (root by default) as specified
.\"O in \fIpasswd\fR\|(5).  By default, \fBsudo\fR does not modify \f(CW\*(C`HOME\*(C'\fR
.\"O (see \fIset_home\fR and \fIalways_set_home\fR in \fIsudoers\fR\|(5)).
\&\fB\-H\fR (\fI\s-1HOME\s0\fR) オプションを指定すると、環境変数 
\&\f(CW\*(C`HOME\*(C'\fR が、変身の対象となるユーザ (デフォルトでは root) の、
\&\fIpasswd\fR\|(5) ファイルに明記されているホームディレクトリになる。
\&\fBsudo\fR はデフォルトでは、環境変数 \f(CW\*(C`HOME\*(C'\fR を
変更しない (\fIsudoers\fR\|(5) の \fIset_home\fR や \fIalways_set_home\fR 
フラグを参照すること)。
.IP "\-h" 12
.IX Item "-h"
.\"O The \fB\-h\fR (\fIhelp\fR) option causes \fBsudo\fR to print a usage message and exit.
\&\fB-h\fR (\fIhelp\fR) オプションを指定すると、\fBsudo\fR は使用法を
表示して終了する。
.IP "\-i [command]" 12
.IX Item "-i [command]"
.\"O The \fB\-i\fR (\fIsimulate initial login\fR) option runs the shell specified
.\"O in the \fIpasswd\fR\|(5) entry of the target user as a login shell.  This
.\"O means that login-specific resource files such as \f(CW\*(C`.profile\*(C'\fR or
.\"O \&\f(CW\*(C`.login\*(C'\fR will be read by the shell.  If a command is specified,
.\"O it is passed to the shell for execution.  Otherwise, an interactive
.\"O shell is executed.  \fBsudo\fR attempts to change to that user's home
.\"O directory before running the shell.  It also initializes the
.\"O environment, leaving \fI\s-1DISPLAY\s0\fR and \fI\s-1TERM\s0\fR unchanged, setting
.\"O \&\fI\s-1HOME\s0\fR, \fI\s-1SHELL\s0\fR, \fI\s-1USER\s0\fR, \fI\s-1LOGNAME\s0\fR, and \fI\s-1PATH\s0\fR, as well as
.\"O the contents of \fI/etc/environment\fR on Linux and \s-1AIX\s0 systems.
.\"O All other environment variables are removed.
\&\fB\-i\fR (\fIsimulate initial login\fR) オプションを指定すると、
\&\fIpasswd\fR\|(5) 中の変身対象ユーザのエントリで指定されているシェルが
ログイン・シェルとして実行される。すなわち、\f(CW\*(C`.profile\*(C'\fR や
\&\f(CW\*(C`.login\*(C'\fR といったログイン用のリソースファイルが
シェルによって読み込まれるわけだ。コマンドを指定すると、それがシェルに
渡されて、実行される。それ以外の場合は、対話的シェルが
実行されることになる。\fBsudo\fR は、シェルを実行する前に、変身対象ユーザの
ホームディレクトリに移動しようとする。また \fBsudo\fR は環境を初期化する。
変数 \fI\s-1DISPLAY\s0\fR と \fI\s-1TERM\s0\fR は変更しないが、 
\&\fI\s-1HOME\s0\fR, \fI\s-1SHELL\s0\fR, \fI\s-1USER\s0\fR, 
\&\fI\s-1LOGNAME\s0\fR, \fI\s-1PATH\s0\fR をセットし、さらに Linux や
\&\s-1AIX\s0 システムでは \fI/etc/environment\fR に書いてある環境変数も
設定する。それ以外の環境変数はすべて消去する。
.IP "\-K" 12
.IX Item "-K"
.\"O The \fB\-K\fR (sure \fIkill\fR) option is like \fB\-k\fR except that it removes
.\"O the user's timestamp entirely and may not be used in conjunction
.\"O with a command or other option.  This option does not require a
.\"O password.
\&\fB\-K\fR (sure \fIkill\fR) オプションは \fB\-k\fR オプションに
似ているが、ユーザのタイムスタンプを完全に消去してしまうという点と、
コマンドや他のオプションと組み合わせて使用できないという点で異なっている。
このオプションはパスワードを要求しない。
.IP "\-k" 12
.IX Item "-k"
.\"O When used by itself, the \fB\-k\fR (\fIkill\fR) option to \fBsudo\fR invalidates
.\"O the user's timestamp by setting the time on it to the Epoch.  The
.\"O next time \fBsudo\fR is run a password will be required.  This option
.\"O does not require a password and was added to allow a user to revoke
.\"O \&\fBsudo\fR permissions from a .logout file.
\&\fB\-k\fR (\fIkill\fR) オプションを単独で使うと、\fBsudo\fR は
タイムスタンプの日付を UNIX 紀元 (1970 年 1 月 1 日) に設定することで、
ユーザのタイムスタンプを失効させる。次回 \fBsudo\fR を実行するときには、
パスワードが要求されるようになるわけだ。このオプション自身はパスワードを
必要としない。なお、このオプションが追加されたのは、
ユーザが .logout ファイルで、パスワードなしでの \fBsudo\fR の実行を
無効にすることができるようにするためである。
.Sp
.\"O When used in conjunction with a command or an option that may require
.\"O a password, the \fB\-k\fR option will cause \fBsudo\fR to ignore the user's
.\"O timestamp file.  As a result, \fBsudo\fR will prompt for a password
.\"O (if one is required by \fIsudoers\fR) and will not update the user's
.\"O timestamp file.
\&\fB\-k\fR オプションをコマンドや、パスワードを必要とするような
他のオプションと組み合わせて使用すると、\fBsudo\fR はユーザの
タイムスタンプ・ファイルを無視するようになる。その結果、\fBsudo\fR は
(\fIsudoers\fR の設定でパスワードを要求するようになっているならば)
プロンプトを出してパスワードを求めるものの、
ユーザのタイムスタンプ・ファイルの日付を更新することはない。
.IP "\-L" 12
.IX Item "-L"
.\"O The \fB\-L\fR (\fIlist\fR defaults) option will list out the parameters
.\"O that may be set in a \fIDefaults\fR line along with a short description
.\"O for each.  This option is useful in conjunction with \fIgrep\fR\|(1).
\&\fB\-L\fR (\fIlist\fR defaults) オプションは、\fIsudoers\fR ファイルの
\&\fIDefaults\fR 行で設定できるパラメーターを列挙し、それぞれについて
簡単に説明する。このオプションは \fIgrep\fR\|(1) と一緒に使うと、便利である。
.IP "\-l[l] [\fIcommand\fR]" 12
.IX Item "-l[l] [command]"
.\"O If no \fIcommand\fR is specified, the \fB\-l\fR (\fIlist\fR) option will list
.\"O the allowed (and forbidden) commands for the invoking user (or the
.\"O user specified by the \fB\-U\fR option) on the current host.  If a
.\"O \&\fIcommand\fR is specified and is permitted by \fIsudoers\fR, the
.\"O fully-qualified path to the command is displayed along with any
.\"O command line arguments.  If \fIcommand\fR is specified but not allowed,
.\"O \&\fBsudo\fR will exit with a status value of 1.  If the \fB\-l\fR option is
.\"O specified with an \fBl\fR argument (i.e. \fB\-ll\fR), or if \fB\-l\fR
.\"O is specified multiple times, a longer list format is used.
\&\fIcommand\fR を指定しない場合、\fB\-l\fR (\fIlist\fR) オプションは、
\&\fBsudo\fR を実行したユーザ (あるいは、\fB\-U\fR で指定したユーザ) が
現在ログインしているホストで許可されている (及び、禁じられている) コマンドを
列挙する。\fIcommand\fR を指定した場合は、\fIsudoers\fR で許可されて
いるコマンドならば、その絶対パスを表示する (訳注: sudo-1.7.2 では、
\&\fIsudoers\fR でコマンドの引き数を明示的に指定している場合は、
コマンドラインからも \fB\-l\fR とコマンドに続けて、引き数まで正しく
指定しなければならない)。 
指定したコマンドが許可されていない場合は、\fBsudo\fR が
返り値 1 で終了する。\fB\-l\fR オプションに \fBl\fR 引数を付けた場合や
(すなわち \fB\-ll\fR)、\fB\-l\fR を複数回指定した場合は、長い方の
リスト形式が使用される。
.IP "\-n" 12
.IX Item "-n"
.\"O The \fB\-n\fR (\fInon-interactive\fR) option prevents \fBsudo\fR from prompting
.\"O the user for a password.  If a password is required for the command
.\"O to run, \fBsudo\fR will display an error messages and exit.
\&\fB\-n\fR (\fInon-interactive\fR) オプションがあると、\fBsudo\fR は 
ユーザにパスワードを要求するプロンプトを出さない。実行するコマンドに
パスワードが必要な場合、\fBsudo\fR はエラーメッセージを表示して、
終了する。
.IP "\-P" 12
.IX Item "-P"
.\"O The \fB\-P\fR (\fIpreserve\fR \fIgroup vector\fR) option causes \fBsudo\fR to
.\"O preserve the invoking user's group vector unaltered.  By default,
.\"O \&\fBsudo\fR will initialize the group vector to the list of groups the
.\"O target user is in.  The real and effective group IDs, however, are
.\"O still set to match the target user.
\&\fB\-P\fR (\fIpreserve\fR \fIgroup vector\fR) オプションを指定すると、
\&\fBsudo\fR は、\fBsudo\fR を実行するユーザが所属するグループのリストを、
変更せずにそのまま使用する。 デフォルトでは、\fBsudo\fR は
所属グループの初期値として、変身対象となるユーザが所属するグループのリストを
設定するのだ。とは言え、実 gid や 実効 gid が変身対象ユーザと
同一になるようにセットされる点には、変わりがない。
.IP "\-p \fIprompt\fR" 12
.IX Item "-p prompt"
.\"O The \fB\-p\fR (\fIprompt\fR) option allows you to override the default
.\"O password prompt and use a custom one.  The following percent (`\f(CW\*(C`%\*(C'\fR')
.\"O escapes are supported:
\&\fB\-p\fR (\fIprompt\fR) オプションを使うと、デフォルトのパスワード
プロンプトを変更して、好きな文句にすることができる。以下のパーセント 
(`\f(CW\*(C`%\*(C'\fR') エスケープが使用できる。
.RS 12
.ie n .IP "%H" 4
.el .IP "\f(CW%H\fR" 4
.IX Item "%H"
.\"O expanded to the local hostname including the domain name
.\"O (on if the machine's hostname is fully qualified or the \fIfqdn\fR
.\"O \&\fIsudoers\fR option is set)
ドメイン名を含むローカルホスト名に展開される (マシンのホスト名が
完全修飾名であるか、\fIsudoers\fR ファイルで \fIfqdn\fR オプションが
セットされている場合に有効)
.ie n .IP "%h" 4
.el .IP "\f(CW%h\fR" 4
.IX Item "%h"
.\"O expanded to the local hostname without the domain name
ドメイン名なしのローカルホスト名に展開
.ie n .IP "%p" 4
.el .IP "\f(CW%p\fR" 4
.IX Item "%p"
.\"O expanded to the user whose password is being asked for (respects the
.\"O \&\fIrootpw\fR, \fItargetpw\fR and \fIrunaspw\fR flags in \fIsudoers\fR)
パスワードを要求されるユーザ名に展開 (\fIsudoers\fR ファイルのフラグ 
\&\fIrootpw\fR、\fItargetpw\fR、\fIrunaspw\fR を尊重する)
.ie n .IP "%U" 4
.el .IP "\f(CW%U\fR" 4
.IX Item "%U"
.\"O expanded to the login name of the user the command will
.\"O be run as (defaults to root)
変身対象になる (デフォルトでは root) ユーザのログイン名に展開される
.ie n .IP "%u" 4
.el .IP "\f(CW%u\fR" 4
.IX Item "%u"
.\"O expanded to the invoking user's login name
\&\fBsudo\fR を起動するユーザのログイン名に展開される
.ie n .IP "\*(C`%%\*(C'" 4
.el .IP "\f(CW\*(C`%%\*(C'\fR" 4
.IX Item "%%"
.\"O two consecutive \f(CW\*(C`%\*(C'\fR characters are collapsed into a single \f(CW\*(C`%\*(C'\fR character
連続した二つの \f(CW\*(C`%\*(C'\fR は、一個の \f(CW\*(C`%\*(C'\fR 文字
そのものを意味する
.RE
.RS 12
.Sp
.\"O The prompt specified by the \fB\-p\fR option will override the system
.\"O password prompt on systems that support \s-1PAM\s0 unless the
.\"O \&\fIpassprompt_override\fR flag is disabled in \fIsudoers\fR.
\&\fB\-p\fR で指定したプロンプトが、\s-1PAM\s0 をサポートしている
システムにおいてシステムのパスワードプロンプトを上書きするのは、
\&\fIsudoers\fR で \fIpassprompt_override\fR が有効になっている場合である
(訳注: \fIsudoers\fR\|(5) の passprompt_override の項も参照してほしい)。
.RE
.\" .IP "\-r \fIrole\fR" 12
.\" .IX Item "-r role"
.\" The \fB\-r\fR (\fIrole\fR) option causes the new (SELinux) security context to 
.\" have the role specified by \fIrole\fR.
.\" \&\fB\-r\fR (\fIrole\fR) オプションを使うと、(SELinux の) 新しいセキュ
.\" リティ・コンテキストが \fIrole\fR で指定されたロールを持つようになる。
.IP "\-S" 12
.IX Item "-S"
.\"O The \fB\-S\fR (\fIstdin\fR) option causes \fBsudo\fR to read the password from
.\"O the standard input instead of the terminal device.
\&\fB\-S\fR (\fIstdin\fR) オプションを指定すると、\fBsudo\fR はパスワー
ドをターミナルデバイスからではなく、標準入力から読み込む。
.IP "\-s [command]" 12
.IX Item "-s [command]"
.\"O The \fB\-s\fR (\fIshell\fR) option runs the shell specified by the \fI\s-1SHELL\s0\fR
.\"O environment variable if it is set or the shell as specified in
.\"O \&\fIpasswd\fR\|(5).  If a command is specified, it is passed to the shell
.\"O for execution.  Otherwise, an interactive shell is executed.
\&\fB\-s\fR (\fIshell\fR) は、環境変数 \fI\s-1SHELL\s0\fR が設定されていれば、
そのシェルを、さもなければ、\fIpasswd\fR\|(5) で指定されているシェルを
実行する。コマンドが指定された場合は、それをシェルに渡して実行させる。
コマンドが指定されていなければ、対話的シェルを開く。
.\" .IP "\-t \fItype\fR" 12
.\" .IX Item "-t type"
.\" The \fB\-t\fR (\fItype\fR) option causes the new (SELinux) security context to 
.\" have the type specified by \fItype\fR.  If no type is specified, the default
.\" type is derived from the specified role.
.\" \&\fB\-t\fR (\fItype\fR) オプションを使用すると、(SELinux の) 新しい 
.\" セキュリティ・コンテキストが \fItype\fR で指定されたタイプを持つように
.\" なる。type が指定されない場合は、デフォルトのタイプが、指定された role 
.\" から導き出される。
.IP "\-U \fIuser\fR" 12
.IX Item "-U user"
.\"O The \fB\-U\fR (\fIother user\fR) option is used in conjunction with the \fB\-l\fR
.\"O option to specify the user whose privileges should be listed.  Only
.\"O root or a user with \fBsudo\fR \f(CW\*(C`ALL\*(C'\fR on the current host may use this
.\"O option.
\&\fB\-U\fR (\fIother user\fR) オプションは、\fB\-l\fR と組み合わせて
使用し、誰の権限の一覧を表示するかを指定する。root のほかには、
現在のホストでコマンドに \f(CW\*(C`ALL\*(C'\fR を許されているユーザのみが
このオプションを使用できる。
.IP "\-u \fIuser\fR" 12
.IX Item "-u user"
.\"O The \fB\-u\fR (\fIuser\fR) option causes \fBsudo\fR to run the specified
.\"O command as a user other than \fIroot\fR.  To specify a \fIuid\fR instead
.\"O of a \fIuser name\fR, use \fI#uid\fR.  When running commands as a \fIuid\fR,
.\"O many shells require that the '#' be escaped with a backslash ('\e').
.\"O Note that if the \fItargetpw\fR Defaults option is set (see \fIsudoers\fR\|(5))
.\"O it is not possible to run commands with a uid not listed in the
.\"O password database.
\&\fB\-u\fR (\fIuser\fR) オプションを指定すると、\fBsudo\fR は 
\&\fIroot\fR 以外のユーザとして指定されたコマンドを実行する。
ユーザ名の代わりに \fIuid\fR を指定するときは、\fI#uid\fR という
書き方をする。多くのシェルでは、\fIuid\fR の資格でコマンドを
実行するときは、'#' をバックスラッシュ ('\e') でエスケープしなければ
ならない。\fIsudoers\fR ファイルの Defaults 行で \fItargetpw\fR オプションが
設定されているときは (\fIsudoers\fR\|(5) 参照)、パスワード・データベースに
記載されていない uid ではコマンドを実行できないことに注意してほしい。
.IP "\-V" 12
.IX Item "-V"
.\"O The \fB\-V\fR (\fIversion\fR) option causes \fBsudo\fR to print the version
.\"O number and exit.  If the invoking user is already root the \fB\-V\fR
.\"O option will print out a list of the defaults \fBsudo\fR was compiled
.\"O with as well as the machine's local network addresses.
\&\fB\-V\fR (\fIversion\fR) オプションを指定すると、\fBsudo\fR は
バージョンナンバーを表示して、終了する。\fBsudo \-V\fR を実行するユーザが 
root だった場合は、\fBsudo\fR がコンパイルされたときのデフォルト値のリストを、
マシンのローカル IP アドレスとともに表示する。
.IP "\-v" 12
.IX Item "-v"
.\"O If given the \fB\-v\fR (\fIvalidate\fR) option, \fBsudo\fR will update the
.\"O user's timestamp, prompting for the user's password if necessary.
.\"O This extends the \fBsudo\fR timeout for another \f(CW\*(C`5\*(C'\fR minutes
.\"O (or whatever the timeout is set to in \fIsudoers\fR) but does not run
.\"O a command.
\&\fB\-v\fR (\fIvalidate\fR) オプションを指定すると、\fBsudo\fR はユーザの
タイムスタンプを更新する。このとき、もし必要なら、パスワードの入力を促す。
このオプションによって \fBsudo\fR のタイムアウト時間がもう
\&\f(CW\*(C`5\*(C'\fR 分間 (あるいは、何分であれ、\fIsudoers\fR で
設定されたタイムアウト時間) 伸びるが、このオプションがコマンドを実行する
ことはない。
.IP "\-\-" 12
.\"O The \fB\-\-\fR option indicates that \fBsudo\fR should stop processing command
.\"O line arguments.  It is most useful in conjunction with the \fB\-s\fR option.
.\"O .PP
\&\fB\-\-\fR オプションがあると、\fBsudo\fR はそこでコマンドライン引き数の
処理をやめる。これは \fB\-s\fR オプションと組み合わせて使うと、
大変便利である。
.PP
.\"O Environment variables to be set for the command may also be passed
.\"O on the command line in the form of \fB\s-1VAR\s0\fR=\fIvalue\fR, e.g.
.\"O \&\fB\s-1LD_LIBRARY_PATH\s0\fR=\fI/usr/local/pkg/lib\fR.  Variables passed on the
.\"O command line are subject to the same restrictions as normal environment
.\"O variables with one important exception.  If the \fIsetenv\fR option
.\"O is set in \fIsudoers\fR, the command to be run has the \f(CW\*(C`SETENV\*(C'\fR tag
.\"O set or the command matched is \f(CW\*(C`ALL\*(C'\fR, the user may set variables
.\"O that would overwise be forbidden.  See \fIsudoers\fR\|(5) for more information.
さらに、コマンドのためにセットしたい環境変数も、
\&\fB\s-1VAR\s0\fR=\fIvalue\fR、たとえば 
\&\fB\s-1LD_LIBRARY_PATH\s0\fR=\fI/usr/local/pkg/lib\fR といった形で
コマンドラインから渡すことができる。コマンドラインから渡される変数は、
通常の環境変数と同じ制限の対象になるが、一つだけ重要な違いがある。
\&\fIsudoers\fR ファイルで \fIsetenv\fR オプションが設定されているか、
実行されるコマンドに \f(CW\*(C`SETENV\*(C'\fR タグがついているか、
あるいは、マッチするコマンドが \f(CW\*(C`ALL\*(C'\fR である場合は、
ユーザがほかの状況でなら禁じられているような変数をセットすることが
できるのだ。詳細については \fIsudoers\fR\|(5) を参照してほしい。
.\"O .SH "RETURN VALUES"
.SH "返り値"
.IX Header "RETURN VALUES"
.\"O Upon successful execution of a program, the exit status from \fBsudo\fR
.\"O will simply be the exit status of the program that was executed.
.\"O .PP
プログラムの実行に成功した場合、\fBsudo\fR が返す終了ステータスは、
実行したプログラムの終了ステータスそのものである。
.PP
.\"O Otherwise, \fBsudo\fR quits with an exit value of 1 if there is a
.\"O configuration/permission problem or if \fBsudo\fR cannot execute the
.\"O given command.  In the latter case the error string is printed to
.\"O stderr.  If \fBsudo\fR cannot \fIstat\fR\|(2) one or more entries in the user's
.\"O \&\f(CW\*(C`PATH\*(C'\fR an error is printed on stderr.  (If the directory does not
.\"O exist or if it is not really a directory, the entry is ignored and
.\"O no error is printed.)  This should not happen under normal
.\"O circumstances.  The most common reason for \fIstat\fR\|(2) to return
.\"O \&\*(L"permission denied\*(R" is if you are running an automounter and one
.\"O of the directories in your \f(CW\*(C`PATH\*(C'\fR is on a machine that is currently
.\"O unreachable.
そうでない場合、設定やパーミッションに問題があったり、\fBsudo\fR が
指定されたコマンドを実行できなかったりしたときは、\fBsudo\fR は
返り値 1 で終了する。後者の場合は、エラーメッセージが標準エラーに
表示される。また、 \fBsudo\fR がユーザの \f(CW\*(C`PATH\*(C'\fR にある
一つ以上のエントリを \fIstat\fR\|(2) できなかったときも、エラーが
標準エラーに出力される (ただし、そのディレクトリが存在しなかったり、
実際にはディレクトリでなかった場合は、そのエントリは無視され、エラーは
表示されない)。そうしたことは、正常な環境では起きるはずのないことである。
\&\fIstat\fR\|(2) が \*(L"permission denied\*(R" を返す理由で
一番よくあるのは、ユーザーがオートマウントを使用していて、
\&\f(CW\*(C`PATH\*(C'\fR にあるディレクトリの一つが目下到達不可能なマシンに
ある場合だ。
.\"O .SH "SECURITY NOTES"
.SH "セキュリティに関する注意点"
.IX Header "SECURITY NOTES"
.\"O \&\fBsudo\fR tries to be safe when executing external commands.
.\"O .PP
\&\fBsudo\fR は外部のコマンドをできるだけ安全に実行しようとする。
.PP
.\"O There are two distinct ways to deal with environment variables.
.\"O By default, the \fIenv_reset\fR \fIsudoers\fR option is enabled.
.\"O This causes commands to be executed with a minimal environment
.\"O containing \f(CW\*(C`TERM\*(C'\fR, \f(CW\*(C`PATH\*(C'\fR, \f(CW\*(C`HOME\*(C'\fR, \f(CW\*(C`SHELL\*(C'\fR, \f(CW\*(C`LOGNAME\*(C'\fR, \f(CW\*(C`USER\*(C'\fR
.\"O and \f(CW\*(C`USERNAME\*(C'\fR in addition to variables from the invoking process
.\"O permitted by the \fIenv_check\fR and \fIenv_keep\fR \fIsudoers\fR options.
.\"O There is effectively a whitelist for environment variables.
.\"O .PP
環境変数を扱うにあたって、二つの異なる行き方がある。デフォルトでは、
\&\fIsudoers\fR の \fIenv_reset\fR オプションが有効になっている。
この場合は、最小限の環境でコマンドが実行されることになるが、その環境とは、
\&\f(CW\*(C`TERM\*(C'\fR, \f(CW\*(C`PATH\*(C'\fR,
\&\f(CW\*(C`HOME\*(C'\fR, \f(CW\*(C`SHELL\*(C'\fR,
\&\f(CW\*(C`LOGNAME\*(C'\fR, \f(CW\*(C`USER\*(C'\fR,
\&\f(CW\*(C`USERNAME\*(C'\fR、それに \fBsudo\fR という
呼び出し側のプロセスから来た変数で、\fIsudoers\fR の \fIenv_check\fR や 
\&\fIenv_keep\fR オプションによって許可されたものである。言わば、
環境変数のホワイトリストが存在することになるわけだ。
.PP
.\"O If, however, the \fIenv_reset\fR option is disabled in \fIsudoers\fR, any
.\"O variables not explicitly denied by the \fIenv_check\fR and \fIenv_delete\fR
.\"O options are inherited from the invoking process.  In this case,
.\"O \&\fIenv_check\fR and \fIenv_delete\fR behave like a blacklist.  Since it
.\"O is not possible to blacklist all potentially dangerous environment
.\"O variables, use of the default \fIenv_reset\fR behavior is encouraged.
.\"O .PP
他方、\fIsudoers\fR ファイルで \fIenv_reset\fR オプションが無効に
なっている場合は、いかなる変数も、\fIenv_check\fR や \fIenv_delete\fR 
オプションで明示的に拒否されていないかぎり、呼び出し側のプロセスから
継承される。この場合、\fIenv_check\fR や \fIenv_delete\fR はブラックリストの
ように振る舞うわけだ。危険性のある環境変数のすべてをブラックリストに
入れることは不可能なので、\fIenv_reset\fR のデフォルトの動作を使用する方を
お勧めする。
.PP
.\"O In all cases, environment variables with a value beginning with
.\"O \&\f(CW\*(C`()\*(C'\fR are removed as they could be interpreted as \fBbash\fR functions.
.\"O The list of environment variables that \fBsudo\fR allows or denies is
.\"O contained in the output of \f(CW\*(C`sudo \-V\*(C'\fR when run as root.
.\"O .PP
どんな場合でも、\f(CW\*(C`()\*(C'\fR で始まる値を持つ環境変数は
除去されるが、それは \fBbash\fR の関数と解釈されかねないからだ。
\&\fBsudo\fR が許可、または拒否する環境変数のリストは、
\&\f(CW\*(C`sudo \-V\*(C'\fR を root として実行したときの出力中に表示される。
.PP
.\"O Note that the dynamic linker on most operating systems will remove
.\"O variables that can control dynamic linking from the environment of
.\"O setuid executables, including \fBsudo\fR.  Depending on the operating
.\"O system this may include \f(CW\*(C`_RLD*\*(C'\fR, \f(CW\*(C`DYLD_*\*(C'\fR, \f(CW\*(C`LD_*\*(C'\fR, \f(CW\*(C`LDR_*\*(C'\fR,
.\"O \&\f(CW\*(C`LIBPATH\*(C'\fR, \f(CW\*(C`SHLIB_PATH\*(C'\fR, and others.  These type of variables are
.\"O removed from the environment before \fBsudo\fR even begins execution
.\"O and, as such, it is not possible for \fBsudo\fR to preserve them.
.\"O .PP
たいていのオペレーティングシステムのダイナミック・リンカは、
ダイナミック・リンキングを制御する働きのある環境変数を、\fBsudo\fR も
その一つである setuid プログラムの環境から除去するものだということに注意して
ほしい。オペレーティングシステムが何であるかにもよるが、そうした環境変数には、
\&\f(CW\*(C`_RLD*\*(C'\fR, \f(CW\*(C`DYLD_*\*(C'\fR,
\&\f(CW\*(C`LD_*\*(C'\fR, \f(CW\*(C`LDR_*\*(C'\fR,
\&\f(CW\*(C`LIBPATH\*(C'\fR, \f(CW\*(C`SHLIB_PATH\*(C'\fR などが
含まれるだろう。この種の変数は、\fBsudo\fR の実行が始まるよりも前に、
環境から除去される。それ故、\fBsudo\fR がそうした変数を保持することは
不可能である。
.PP
.\"O To prevent command spoofing, \fBsudo\fR checks \*(L".\*(R" and "" (both denoting
.\"O current directory) last when searching for a command in the user's
.\"O \&\s-1PATH\s0 (if one or both are in the \s-1PATH\s0).  Note, however, that the
.\"O actual \f(CW\*(C`PATH\*(C'\fR environment variable is \fInot\fR modified and is passed
.\"O unchanged to the program that \fBsudo\fR executes.
.\"O .PP
偽コマンドの実行 (command spoofing) を防止するため、\fBsudo\fR は
コマンドを捜してユーザの \s-1PATH\s0 を検索する際に、\*(L".\*(R" と "" 
(どちらもカレントディレクトリを意味する) を最後に調べる (そのどちらか、
あるいは両方が \s-1PATH\s0 中に存在すればだが)。とは言え、環境変数 
\&\f(CW\*(C`PATH\*(C'\fR そのものは変更されずに、そのまま \fBsudo\fR が
実行するプログラムに渡されることに注意してほしい。
.PP
.\"O \&\fBsudo\fR will check the ownership of its timestamp directory
.\"O (\fI/var/run/sudo\fR by default) and ignore the directory's contents if
.\"O it is not owned by root or if it is writable by a user other than
.\"O root.  On systems that allow non-root users to give away files via
.\"O \&\fIchown\fR\|(2), if the timestamp directory is located in a directory
.\"O writable by anyone (e.g., \fI/tmp\fR), it is possible for a user to
.\"O create the timestamp directory before \fBsudo\fR is run.  However,
.\"O because \fBsudo\fR checks the ownership and mode of the directory and
.\"O its contents, the only damage that can be done is to \*(L"hide\*(R" files
.\"O by putting them in the timestamp dir.  This is unlikely to happen
.\"O since once the timestamp dir is owned by root and inaccessible by
.\"O any other user, the user placing files there would be unable to get
.\"O them back out.  To get around this issue you can use a directory
.\"O that is not world-writable for the timestamps (\fI/var/adm/sudo\fR for
.\"O instance) or create \fI/var/run/sudo\fR with the appropriate owner (root)
.\"O and permissions (0700) in the system startup files.
.\"O .PP
\&\fBsudo\fR はタイムスタンプ・ディレクトリ (デフォルトでは 
\&\fI/var/run/sudo\fR) の所有者を調べて、所有者が root でなかったり、
root 以外のユーザにも書き込みが可能だったりした場合は、そのディレクトリの
中身を無視する。root 以外のユーザでも \fIchown\fR\|(2) を利用して
ファイルの所有者を変えられるシステムでは、タイムスタンプ・ディレクトリが 
(たとえば \fI/tmp\fR といった) 誰にでも書き込めるディレクトリにあると、
一般ユーザが、\fBsudo\fR を実行する前にタイムスタンプ・ディレクトリを
作成することが可能になる。もっとも、\fBsudo\fR はタイムスタンプ・
ディレクトリとその中身の、所有者とモードをチェックしているので、
起こりえる唯一の被害は、ファイルを「隠匿」する目的でそのディレクトリに
入れて置かれることぐらいだ。これはあまりありそうにないことだ。なぜなら、
タイムスタンプ・ディレクトリが root の所有になり、ほかのユーザによる
アクセスが禁じられてしまうと、ファイルをそこに置いたユーザは
それを回収できなくなるからである。この問題を回避したかったら、
誰でも書き込めるわけではないディレクトリ (たとえば \fI/var/adm/sudo\fR) を
タイムスタンプ用に使用するなり、適切な所有者 (root) と
パーミッション (0700) を持った \fI/var/run/sudo\fR をシステムの
スタートアップ・ファイルで作成するなりすればよい。
.PP
.\"O \&\fBsudo\fR will not honor timestamps set far in the future.
.\"O Timestamps with a date greater than current_time + 2 * \f(CW\*(C`TIMEOUT\*(C'\fR
.\"O will be ignored and sudo will log and complain.  This is done to
.\"O keep a user from creating his/her own timestamp with a bogus
.\"O date on systems that allow users to give away files.
.\"O .PP
\&\fBsudo\fR はあまりにも未来に設定したタイムスタンプを認めない。タイ
ムスタンプが「現在時 + 2 * \f(CW\*(C`TIMEOUT\*(C'\fR」より新しい日時だっ
た場合、\fBsudo\fR はそれを無視し、ログに記録して警告を発する。このよ
うになっているのは、一般ユーザがファイルの所有者を変えられるシステムで、
ユーザがいい加減な日付を付けて勝手に自分のタイムスタンプを作れないよう
にするためである。
.PP
.\"O Please note that \fBsudo\fR will normally only log the command it
.\"O explicitly runs.  If a user runs a command such as \f(CW\*(C`sudo su\*(C'\fR or
.\"O \&\f(CW\*(C`sudo sh\*(C'\fR, subsequent commands run from that shell will \fInot\fR be
.\"O logged, nor will \fBsudo\fR's access control affect them.  The same
.\"O is true for commands that offer shell escapes (including most
.\"O editors).  Because of this, care must be taken when giving users
.\"O access to commands via \fBsudo\fR to verify that the command does not
.\"O inadvertently give the user an effective root shell.  For more
.\"O information, please see the \f(CW\*(C`PREVENTING SHELL ESCAPES\*(C'\fR section in
.\"O \&\fIsudoers\fR\|(5).
\&\fBsudo\fR は通常、自分が明示的に実行したコマンドしかログに
記録しないことに気を付けてほしい。
ユーザが \f(CW\*(C`sudo su\*(C'\fR とか \f(CW\*(C`sudo sh\*(C'\fR とか
いったコマンドを実行した場合、そのシェルから続いて実行されるコマンドは
記録されないし、\fBsudo\fR によるアクセス制御もそういったコマンドに
及ばないことになる。
シェル・エスケープを提供するコマンドについても (たいていのエディタが
それに含まれる) 同じことが言える。
それ故、ユーザに \fBsudo\fR 経由でコマンドの使用を許すときは、
気がつかないうちにそのコマンドがユーザに事実上ルート・シェルを
与えていないかを、念には念を入れて確認しなければならない。もっと詳しいことが
知りたかったら、\fIsudoers\fR\|(5) の「シェル・エスケープを防止する」の
セクションを御覧になってほしい。
.\"O .SH "ENVIRONMENT"
.SH "環境変数"
.IX Header "ENVIRONMENT"
.\"O \&\fBsudo\fR utilizes the following environment variables:
\&\fBsudo\fR は以下の環境変数を利用する。
.ie n .IP "\*(C`EDITOR\*(C'" 16
.el .IP "\f(CW\*(C`EDITOR\*(C'\fR" 16
.IX Item "EDITOR"
.\"O Default editor to use in \fB\-e\fR (sudoedit) mode if neither \f(CW\*(C`SUDO_EDITOR\*(C'\fR
.\"O nor \f(CW\*(C`VISUAL\*(C'\fR is set
変数 \f(CW\*(C`SUDO_EDITOR\*(C'\fR や \f(CW\*(C`VISUAL\*(C'\fR が設定されて
いないとき、\fB\-e\fR (sudoedit) モードで使用するデフォルトのエディタ
.ie n .IP "\*(C`HOME\*(C'" 16
.el .IP "\f(CW\*(C`HOME\*(C'\fR" 16
.IX Item "HOME"
.\"O In \fB\-s\fR or \fB\-H\fR mode (or if sudo was configured with the
.\"O \&\-\-enable\-shell\-sets\-home option), set to homedir of the target user
\&\fB\-i\fR や \fB\-H\fR モードでは (あるいは、sudo が configure され
たとき \-\-enable\-shell\-sets\-home オプションが与えられていれば)、
変身対象ユーザのホームディレクトリにセットされる
.ie n .IP "\*(C`PATH\*(C'" 16
.el .IP "\f(CW\*(C`PATH\*(C'\fR" 16
.IX Item "PATH"
.\"O Set to a sane value if the \fIsecure_path\fR sudoers option is set.
sudoers の \fIsecure_path\fR オプションが設定されていれば、無難な値に
セットされる
.ie n .IP "\*(C`SHELL\*(C'" 16
.el .IP "\f(CW\*(C`SHELL\*(C'\fR" 16
.IX Item "SHELL"
.\"O Used to determine shell to run with \f(CW\*(C`\-s\*(C'\fR option
\&\fB\-s\fR オプションで実行されるシェルを決めるのに使用する
.ie n .IP "\*(C`SUDO_ASKPASS\*(C'" 16
.el .IP "\f(CW\*(C`SUDO_ASKPASS\*(C'\fR" 16
.IX Item "SUDO_ASKPASS"
.\"O Specifies the path to a helper program used to read the password
.\"O if no terminal is available or if the \f(CW\*(C`\-A\*(C'\fR option is specified.
ターミナルが利用できない場合や、\f(CW\*(C`\-A\*(C'\fR オプションが
指定されている場合に、パスワードを読み込むのに使用するヘルパープログラムの
パスを指定する
.ie n .IP "\*(C`SUDO_COMMAND\*(C'" 16
.el .IP "\f(CW\*(C`SUDO_COMMAND\*(C'\fR" 16
.IX Item "SUDO_COMMAND"
.\"O Set to the command run by sudo
sudo が実行するコマンドにセットされる
.ie n .IP "\*(C`SUDO_EDITOR\*(C'" 16
.el .IP "\f(CW\*(C`SUDO_EDITOR\*(C'\fR" 16
.IX Item "SUDO_EDITOR"
.\"O Default editor to use in \fB\-e\fR (sudoedit) mode
\&\fB\-e\fR (sudoedit) モードで使用するデフォルトのエディタ
.ie n .IP "\*(C`SUDO_GID\*(C'" 16
.el .IP "\f(CW\*(C`SUDO_GID\*(C'\fR" 16
.IX Item "SUDO_GID"
.\"O Set to the group \s-1ID\s0 of the user who invoked sudo
sudo を起動したユーザのグループ \s-1ID\s0 にセットされる
.ie n .IP "\*(C`SUDO_PROMPT\*(C'" 16
.el .IP "\f(CW\*(C`SUDO_PROMPT\*(C'\fR" 16
.IX Item "SUDO_PROMPT"
.\"O Used as the default password prompt
デフォルトのパスワード・プロンプトとして使用する
.ie n .IP "\*(C`SUDO_PS1\*(C'" 16
.el .IP "\f(CW\*(C`SUDO_PS1\*(C'\fR" 16
.IX Item "SUDO_PS1"
.\"O If set, \f(CW\*(C`PS1\*(C'\fR will be set to its value for the program being run
設定すると、実行されるプログラムの \f(CW\*(C`PS1\*(C'\fR がこの変数の値に
セットされる
.ie n .IP "\*(C`SUDO_UID\*(C'" 16
.el .IP "\f(CW\*(C`SUDO_UID\*(C'\fR" 16
.IX Item "SUDO_UID"
.\"O Set to the user \s-1ID\s0 of the user who invoked sudo
sudo を起動したユーザのユーザ \s-1ID\s0 にセットされる
.ie n .IP "\*(C`SUDO_USER\*(C'" 16
.el .IP "\f(CW\*(C`SUDO_USER\*(C'\fR" 16
.IX Item "SUDO_USER"
.\"O Set to the login of the user who invoked sudo
sudo を起動したユーザのログイン名にセットされる
.ie n .IP "\*(C`USER\*(C'" 16
.el .IP "\f(CW\*(C`USER\*(C'\fR" 16
.IX Item "USER"
.\"O Set to the target user (root unless the \fB\-u\fR option is specified)
変身対象ユーザにセットされる (オプション \fB\-u\fR が指定されていなければ、
root になる)
.ie n .IP "\*(C`VISUAL\*(C'" 16
.el .IP "\f(CW\*(C`VISUAL\*(C'\fR" 16
.IX Item "VISUAL"
.\"O Default editor to use in \fB\-e\fR (sudoedit) mode if \f(CW\*(C`SUDO_EDITOR\*(C'\fR
.\"O is not set
変数 \f(CW\*(C`SUDO_EDITOR\*(C'\fR が設定されていない場合に、
\&\fB\-e\fR (sudoedit) モードで使用するデフォルトのエディタ
.\"O .SH "FILES"
.SH "ファイル"
.IX Header "FILES"
.ie n .IP "\fI/etc/sudoers\fR" 24
.el .IP "\fI/etc/sudoers\fR" 24
.IX Item "/etc/sudoers"
.\"O List of who can run what
誰が何を実行できるかのリスト
.ie n .IP "\fI/var/run/sudo\fR" 24
.el .IP "\fI/var/run/sudo\fR" 24
.IX Item "/var/run/sudo"
.\"O Directory containing timestamps
タイムスタンプが存在するディレクトリ
.IP "\fI/etc/environment\fR" 24
.IX Item "/etc/environment"
.\"O Initial environment for \fB\-i\fR mode on Linux and \s-1AIX\s0
Linux や \s-1AIX\s0 で \fB\-i\fR モードを使うときの初期環境
.\"O .SH "EXAMPLES"
.SH "用例"
.IX Header "EXAMPLES"
.\"O Note: the following examples assume suitable \fIsudoers\fR\|(5) entries.
.\"O .PP
注意: 以下の例は、\fIsudoers\fR\|(5) に適切な記載があることを前提にして
いる。
.PP
.\"O To get a file listing of an unreadable directory:
.\"O .PP
読み取り不可のディレクトリのファイル一覧を取得する。
.PP
.Vb 1
\& $ sudo ls /usr/local/protected
.Ve
.PP
.\"O To list the home directory of user yaz on a machine where the
.\"O file system holding ~yaz is not exported as root:
.\"O .PP
ユーザ yaz のホームディレクトリのファイル一覧を取得したいのだが、
~yaz を含むファイルシステムが別のマシンにあって、root で
アクセスできるようにエクスポートされていない場合。
.PP
.Vb 1
\& $ sudo \-u yaz ls ~yaz
.Ve
.PP
.\"O To edit the \fIindex.html\fR file as user www:
.\"O .PP
ユーザ www として \fIindex.html\fR ファイルを編集する。
.PP
.Vb 1
\& $ sudo \-u www vi ~www/htdocs/index.html
.Ve
.PP
.\"O To view system logs only accessible to root and users in the adm group:
.\"O .PP
root と adm グループのユーザだけがアクセスできるシステムログを閲覧する。
.PP
.Vb 1
\& $ sudo \-g adm view /var/log/syslog
.Ve
.PP
.\"O To run an editor as jim with a different primary group:
.\"O .PP
jim に変身してエディタを実行する。プライマリグループには別のグループを
指定する。
.PP
.Vb 1
\& $ sudo \-u jim \-g audio vi ~jim/sound.txt
.Ve
.PP
.\"O To shutdown a machine:
.\"O .PP
マシンをリブートする。
.PP
.Vb 1
\& $ sudo shutdown \-r +15 "quick reboot"
.Ve
.PP
.\"O To make a usage listing of the directories in the /home
.\"O partition.  Note that this runs the commands in a sub-shell
.\"O to make the \f(CW\*(C`cd\*(C'\fR and file redirection work.
.\"O .PP
/home パーティションに存在するディレクトリのディスク使用量リストを作成
する。\&\f(CW\*(C`cd\*(C'\fR やファイル・リダイレクションがきちんと動
作するように、コマンドをサブシェルで実行していることに注目してほしい。
.PP
.Vb 1
\& $ sudo sh \-c "cd /home ; du \-s * | sort \-rn > USAGE"
.Ve
.\"O .SH "SEE ALSO"
.SH "関連項目"
.IX Header "SEE ALSO"
\&\fIgrep\fR\|(1), \fIsu\fR\|(1), \fIstat\fR\|(2),
.\" \&\fIlogin_cap\fR\|(3),
\&\fIpasswd\fR\|(5), \fIsudoers\fR\|(5), \fIvisudo\fR\|(8)
.\"O .SH "AUTHORS"
.SH "作者"
.IX Header "AUTHORS"
.\"O Many people have worked on \fBsudo\fR over the years; this
.\"O version consists of code written primarily by:
.\"O .PP
多数の人々が長年に渡って \fBsudo\fR の製作に取り組んできた。当バージョ
ンは主として次の者が書いたコードからできている。
.PP
.Vb 1
\&        Todd C. Miller
.Ve
.PP
.\"O See the \s-1HISTORY\s0 file in the \fBsudo\fR distribution or visit
.\"O http://www.sudo.ws/sudo/history.html for a short history
.\"O of \fBsudo\fR.
\&\fBsudo\fR の簡単な履歴については、配布物中の \s-1HISTORY\s0 ファイルか、
http://www.sudo.ws/sudo/history.html を御覧いただきたい。
.\"O .SH "CAVEATS"
.SH "警告"
.IX Header "CAVEATS"
.\"O There is no easy way to prevent a user from gaining a root shell
.\"O if that user is allowed to run arbitrary commands via \fBsudo\fR.
.\"O Also, many programs (such as editors) allow the user to run commands
.\"O via shell escapes, thus avoiding \fBsudo\fR's checks.  However, on
.\"O most systems it is possible to prevent shell escapes with \fBsudo\fR's
.\"O \&\fInoexec\fR functionality.  See the \fIsudoers\fR\|(5) manual
.\"O for details.
.\"O .PP
ユーザが \fBsudo\fR 経由で任意のコマンドの実行を許されているならば、
そのユーザがルート・シェルを獲得するのを防止する簡単な方法はない。
また、(エディタを含む) 多くのプログラムが、シェル・エスケープを通して
ユーザがコマンドを実行できるようにしており、この方法でユーザは \fBsudo\fR の
チェックを回避することができる。とは言え、たいていのシステムでは、
\&\fBsudo\fR の \fInoexec\fR 機能を用いてシェル・エスケープを阻止する
ことが可能だ。詳細については、
\&\fIsudoers\fR\|(5) のマニュアルを参照してほしい。
.PP
.\"O It is not meaningful to run the \f(CW\*(C`cd\*(C'\fR command directly via sudo, e.g.,
.\"O .PP
下記のように sudo を通して直接 \f(CW\*(C`cd\*(C'\fR コマンドを実行して
も意味がない。
.PP
.Vb 1
\& $ sudo cd /usr/local/protected
.Ve
.PP
.\"O since when the command exits the parent process (your shell) will
.\"O still be the same.  Please see the \s-1EXAMPLES\s0 section for more information.
.\"O .PP
なぜなら、コマンドが終了したとき、その親プロセス (あなたのシェルだ) は
相変わらず元の状態のままだからだ。より詳しく知りたかったら、「用例」セ
クションを御覧になってほしい。
.PP
.\"O If users have sudo \f(CW\*(C`ALL\*(C'\fR there is nothing to prevent them from
.\"O creating their own program that gives them a root shell regardless
.\"O of any '!' elements in the user specification.
.\"O .PP
もし \fIsudoers\fR ファイルでユーザに許可するコマンドが 
\&\f(CW\*(C`ALL\*(C'\fR になっているならば、ユーザ設定でどんな
項目に '!'  を付けようとも、ユーザが自分でプログラムを作って、
ルート・シェルを獲得するのを防ぐすべはまったくない。
.PP
.\"O Running shell scripts via \fBsudo\fR can expose the same kernel bugs that
.\"O make setuid shell scripts unsafe on some operating systems (if your \s-1OS\s0
.\"O has a /dev/fd/ directory, setuid shell scripts are generally safe).
\&\fBsudo\fR を介してシェルスクリプトを実行すると、ある種のオペレーティ
ングシステムで setuid シェルスクリプトを危険なものにしているのと同一の
カーネルのバグが表面化するおそれがある (使用している \s-1OS\s0 に 
/dev/fd/ ディレクトリがあれば、setuid シェルスクリプトはたいてい安全で
ある)。
.\"O .SH "BUGS"
.SH "バグ"
.IX Header "BUGS"
.\"O If you feel you have found a bug in \fBsudo\fR, please submit a bug report
.\"O at http://www.sudo.ws/sudo/bugs/
\&\fBsudo\fR にバクを発見したと思ったら、下記のページにアクセスして、
バグレポートを提出していただきたい。
.br
http://www.sudo.ws/sudo/bugs/
.\"O .SH "SUPPORT"
.SH "サポート"
.IX Header "SUPPORT"
.\"O Limited free support is available via the sudo-users mailing list,
.\"O see http://www.sudo.ws/mailman/listinfo/sudo\-users to subscribe or
.\"O search the archives.
ある程度の無料サポートが sudo-users メーリングリストを通して利用できる。
購読やアーカイブの検索には下記 URL を御覧になること。
.br
http://www.sudo.ws/mailman/listinfo/sudo\-users
.\"O .SH "DISCLAIMER"
.SH "免責"
.IX Header "DISCLAIMER"
.\"O \&\fBsudo\fR is provided ``\s-1AS\s0 \s-1IS\s0'' and any express or implied warranties,
.\"O including, but not limited to, the implied warranties of merchantability
.\"O and fitness for a particular purpose are disclaimed.  See the \s-1LICENSE\s0
.\"O file distributed with \fBsudo\fR or http://www.sudo.ws/sudo/license.html
.\"O for complete details.
\&\fBsudo\fR は「現状のまま」提供される。明示的な、あるいは黙示的な
いかなる保証も、商品性や特定目的への適合性についての黙示的な保証を含め、
またそれのみに止まらず、これを否認する。詳細な全文については、
\&\fBsudo\fR と一緒に配布されている \s-1LICENSE\s0 ファイルや
下記 Web ページを御覧いただきたい。
.br
http://www.sudo.ws/sudo/license.html
