.\" Copyright 1996,1997, 1998, 1999 John D. Polstra.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgment:
.\"      This product includes software developed by John D. Polstra.
.\" 4. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.\" $Id: cvsup.1,v 1.4 2003/12/12 13:06:57 takei Exp $
.\"
.\" translated Sun Jan 23 03:13:03 JST 2000
.\"         by FUJIWARA Teruyoshi <fujiwara@linux.or.jp>
.\"
.Dd August 31, 1999
.Os FreeBSD
.Dt CVSUP 1
.\"O .Sh NAME
.Sh 名称
.Nm cvsup
.\"O .Nd network distribution package for CVS repositories
.Nd CVS リポジトリ用のネットワーク配布パッケージ
.\"O .Sh SYNOPSIS
.Sh 書式
.Nm
.Op Fl 1aDeEgksvzZ
.Op Fl A Ar addr
.Op Fl b Ar base
.Op Fl c Ar collDir
.Op Fl d Ar delLimit
.Op Fl h Ar host
.Op Fl i Ar pattern
.Op Fl l Ar lockfile
.Op Fl L Ar verbosity
.Op Fl p Ar port
.Op Fl P Ar m|a|port|lo-hi|-
.Op Fl r Ar maxRetries
.Ar supfile
.Op Ar destDir
.\"O .Sh DESCRIPTION
.Sh 解説
.\"O .Nm CVSup
.\"O is a software package for distributing and updating collections of files
.\"O across a network.
.Nm CVSup
は、ファイル群の配布と更新をネットワーク上で行うための
ソフトウェアパッケージです。
.\"O The name
.\"O .Nm CVSup
.\"O refers to the package as a whole.
.Nm CVSup
という名前はパッケージ全体を指します。
.\"O It consists of a client program,
.\"O .Nm cvsup ,
.\"O and a server program,
.\"O .Nm cvsupd .
.Nm CVSup
はクライアントプログラムである
.Nm cvsup
とサーバプログラムである
.Nm cvsupd
からできています。
.\"O This manual page describes the general aspects of the
.\"O .Nm CVSup
.\"O package, as well as the particulars of the
.\"O .Nm
.\"O client program.
このマニュアルページは、
.Nm CVSup
パッケージの概要を説明し、クライアントプログラム
.Nm cvsup
特有の事項も説明します。
.\"O For detailed information about
.\"O .Nm cvsupd ,
.\"O see
.\"O .Xr cvsupd 8 .
.Nm cvsupd
の詳しい説明については、
.Xr cvsupd 8
をご覧ください。
.Pp
.\"O Unlike more traditional network distribution packages, such as
.\"O .Nm rdist
.\"O and
.\"O .Nm sup ,
.\"O .Nm CVSup
.\"O is tailored specifically for distributing CVS repositories.
.Nm rdist
や
.Nm sup
のような、より伝統的なネットワーク配布パッケージと異なり、
.Nm CVSup
は特に CVS リポジトリの配布のために作られています。
.\"O .Nm CVSup
.\"O takes advantage of the properties of CVS repositories and the files they
.\"O contain (in particular, RCS files), enabling it to perform updates much
.\"O faster than traditional systems.
.Nm CVSup
は
CVS リポジトリとリポジトリに含まれるファイル(特に RCS ファイル)の
特性を生かし、伝統的なシステムよりもずっと高速な更新を可能にしています。
.\"O .Sh OPTIONS
.Sh オプション
.\"O The client program
.\"O .Nm
.\"O requires at least a single argument,
.\"O .Ar supfile .
クライアントプログラム
.Nm cvsup
は、少なくとも一つの引数
.Ar supfile
を必要とします。
.\"O It names a file describing one or more collections of files to be
.\"O transferred and/or updated from the server.
この引数が指すファイルには、
サーバからの転送や更新の対象となるファイルが記述されています。
.\"O The
.\"O .Ar supfile
.\"O has a format similar to the corresponding file used by
.\"O .Nm sup .
.Ar supfile
は、
.Nm sup
で使われる同じ目的のファイルに似た形式です。
.\"O In most cases,
.\"O .Nm
.\"O can use existing 
.\"O .Nm sup Ar supfiles .
ほとんどの場合、
.Nm cvsup
は既存の
.Nm sup Ar supfiles
を使えます。
.Pp
.\"O An optional argument
.\"O .Ar destDir
.\"O may also be specified.
引数
.Ar destDir
を指定することもできます (この引数は省略してもかまいません)。
.\"O If given, it names a directory under which all updated files will be
.\"O placed.
指定された場合には、この引数は更新された全てのファイルが置かれる
ディレクトリを指定します。
.\"O When
.\"O .Ar destDir
.\"O is specified, the client's original files are left untouched.
.Ar destDir
が指定されると、クライアントの元のファイルはそのまま残されます。
.\"O This feature is primarily intended for testing.
この機能は主にテストのためのものです。
.Pp
.\"O The following options are supported by
.\"O .Nm cvsup :
.Nm cvsup
は以下のオプションをサポートしています:
.Bl -tag -width Fl
.It Fl 1
.\"O Disables automatic retries when transient failures occur and the GUI is
.\"O not being used.  Without this option, a transient failure such as a
.\"O dropped network connection causes
.\"O .Nm
.\"O to retry repeatedly, using randomized exponential backoff to space the
.\"O retries.
一時的な失敗が起き、かつ GUI が使われていない時の自動リトライを無効に
します。このオプションを指定しないと、ネットワーク接続の切断といった
一時的な失敗が起きた時、
.Nm cvsup
はリトライを繰り返し行います。リトライの際には
「ランダム化された指数的な一時退避(randomized exponential backoff)」
アルゴリズムを用いてリトライの間隔を決めます。
.\"O This option is equivalent to
.\"O .Fl r Cm 0,
.\"O and is implied when the GUI is used.
このオプションは
.Fl r Cm 0
と同等であり、GUI を使う時には暗黙的に指定されたことになります。
.It Fl a
.\"O Requires the server to authenticate itself (prove its identity) to
.\"O the client.  If authentication of the server fails, the update is
.\"O canceled.  See
.\"O .Sx AUTHENTICATION ,
.\"O below.
クライアントに対して自分自身の認証 (自分が何であるかを示すこと)
を行うようサーバに要求します。サーバの認証が失敗すると、更新はキャンセル
されます。
後述の
.Sx 認証
を見てください。
.It Fl A Ar addr
.\"O Specifies a local address (dotted quad or hostname) to bind to when
.\"O connecting to the server.  This may be useful on hosts which have
.\"O multiple IP addresses.
サーバに接続する時に割り当てるローカルのアドレス
(ドット区切りの 4 つの数値、またはホスト名)を指定します。このオプショ
ンは、ホストが複数個の IP アドレスを持っている場合に便利です。
.It Fl b Ar base
.\"O Specifies the base directory under which
.\"O .Nm
.\"O will maintain its bookkeeping files, overriding any
.\"O .Cm base
.\"O specifications in the
.\"O .Ar supfile .
.Nm cvsup
が管理する記録ファイルを置くベースディレクトリを指定します。
この際には、
.Ar supfile
による
.Cm base
の指定は全て上書きされます。
.It Fl c Ar collDir
.\"O Specifies the subdirectory of
.\"O .Ar base
.\"O where the information about the collections is maintained.
コレクションに関する情報を管理する、
.Ar base
のサブディレクトリを指定します。
.\"O The default is
.\"O .Pa sup .
デフォルト値は
.Pa sup
です。
.It Fl d Ar delLimit
.\"O Specifies the maximum number of files that may be deleted in a
.\"O single update run.
更新を 1 回実行した際に削除できるファイル数の上限を指定します。
.\"O Any attempt to exceed the limit results in a fatal error.
この上限を超えるファイル削除の試みは致命的なエラーとなります。
.\"O This can provide some protection against temporary configuration
.\"O mistakes on the server.
このオプションを使うと、サーバ上の一時的な設定ミスによる被害を、
ある程度防げます。
.\"O The default limit is infinity.
デフォルトでは無制限です。
.It Fl D
.\"O Causes
.\"O .Nm
.\"O to perform file deletions only, omitting all other kinds of updates.
.Nm cvsup
にファイルの削除だけを行わせ、どんな種類の更新も行いません。
.\"O This is useful in some situations where disk space on the client is
.\"O very limited.  One can first run
.\"O .Nm
.\"O with the
.\"O .Fl D
.\"O option, to free up as much space as possible.  Then a second run
.\"O can be made, this time without the
.\"O .Fl D
.\"O option.  If files or directories have been renamed on the server,
.\"O this technique ensures that all of the old files are deleted on
.\"O the client before any of the new ones are created.  This option
.\"O is not implemented yet for checkout mode.
このオプションは、クライアントのディスク容量が非常に少ないような場合に
役に立ちます。ユーザはまず
.Fl D
オプションを使って
.Nm cvsup
を実行し、できる限りの容量を空けます。次にもう一度
.Nm cvsup
を実行しますが、今度は
.Fl D
オプションは使いません。サーバ上でファイルやディレクトリの名前が変更さ
れた場合は、この方法を取ることにより、クライアント上で新しいファイルが
生成されるよりも前に、全ての古いファイルが削除されることが保証されます。
このオプションは、チェックアウトモードではまだ実装されていません。
.It Fl e
.\"O Enables the execution of shell commands received from the server, as
.\"O if the
.\"O .Cm execute
.\"O keyword were added to every collection in the
.\"O .Ar supfile .
サーバから受け取ったシェルコマンドの実行を有効にします。
.Ar supfile
中の全てのコレクションに
.Cm execute
キーワードが追加された場合と同じです。
.It Fl E
.\"O Disables the execution of shell commands received from the server, as
.\"O if the
.\"O .Cm execute
.\"O keyword were removed from every collection in the
.\"O .Ar supfile .
サーバから受け取ったシェルコマンドの実行を無効にします。
.Ar supfile
中の全てのコレクションから
.Cm execute
キーワードが削除された場合と同じです。
.It Fl g
.\"O Disables the use of the graphical user interface.
GUI を使わないようにします。
.\"O This option is implied if the
.\"O .Ev DISPLAY
.\"O environment variable is not set.
.Ev DISPLAY
環境変数が設定されていなければ、このオプションが暗黙的に指定されます。
.It Fl h Ar host
.\"O Specifies the server host to contact, overriding any
.\"O .Cm host
.\"O specifications in the
.\"O .Ar supfile .
接続するサーバホストを指定します。
.Ar supfile
における
.Cm host
の指定は全て上書きされます。
.It Fl i Ar pattern
.\"O Causes
.\"O .Nm
.\"O to include only files and directories matching
.\"O .Ar pattern
.\"O in the update.  If a directory matches the pattern, then the entire
.\"O subtree rooted at the directory is included.  If this option is
.\"O specified multiple times, the patterns are combined using the
.\"O .Ql or
.\"O operation.  If no
.\"O .Fl i
.\"O options are given, the default is to update all files in each
.\"O collection.
.Ar pattern
にマッチするファイルとディレクトリだけを更新対象にするように
.Nm cvsup
に指定します。ディレクトリがパターンにマッチすると、
そのディレクトリをルートとするサブツリー全体が対象に含まれます。
このオプションが複数回指定された場合は、パターンは
.Ql or
操作で結合されます。
.Fl i
オプションが指定されない場合のデフォルト動作では、各コレクションに含ま
れる全てのファイルが更新されます。
.Pp
.\"O The
.\"O .Ar pattern
.\"O is a standard file name pattern.
.Ar pattern
は標準のファイル名パターンです。
.\"O It is interpreted relative to the collection's prefix directory.
これはコレクションのプレフィックスディレクトリからの相対パスで
解釈されます。
.\"O Slash characters are matched only by explicit slashes in the pattern.
スラッシュ文字は、パターン中に明示的にスラッシュが書かれた場合だけ
マッチします。
.\"O Leading periods in file name are not treated specially.
ファイル名の先頭にピリオドがあっても、特別扱いはされません。
.Pp
.\"O The GUI has a type-in field where the patterns may be edited.
GUI には、パターンを編集できる入力フィールドがあります。
.It Fl k
.\"O Causes
.\"O .Nm
.\"O to keep the temporary copies of any incorrectly edited files, in the
.\"O event of checksum mismatches.
チェックサムの不一致が起きた時、間違って編集されたファイル全ての一時的
なコピーを保存するようにします。
.\"O This option is for debugging, to help determine why the files were
.\"O edited incorrectly.
このオプションはデバッグ用のものであり、どうしてファイルが誤って編集さ
れたのかを突き止める役に立ちます。
.\"O Regardless of whether this option is specified, the permanent versions
.\"O of faulty files are replaced with correct versions obtained by
.\"O transferring the files in their entirety.
このオプションが指定されているかどうかに関わらず、不正なファイルの
保存版 (permanent version) は、ファイル転送を丸ごと行って取得した
正しいファイルに置き換えられます。
.\"O Such transfers are called fixups.
このような転送はフィックスアップ(fixup, 修理の意味)と言います。
.It Fl l Ar lockfile
.\"O Creates and locks the
.\"O .Ar lockfile
.\"O while the update is in progress.
.Ar lockfile
を生成し、これを更新が行われている間ロックします。
.\"O If
.\"O .Ar lockfile
.\"O is already locked,
.\"O .Nm
.\"O fails without performing automatic retries.
.Ar lockfile
が既にロックされていると、
.Nm
は自動的なリトライを行うことなく失敗します。
.\"O This option is useful when
.\"O .Nm
.\"O is executed periodically from
.\"O .Nm cron .
このオプションが役に立つのは、
.Nm cron
を使って
.Nm
を定期的に実行する時です。
.\"O It prevents a job from interfering with an earlier job that is perhaps
.\"O taking extra long because of network problems.
これは、あるジョブが、ネットワークの問題で予想以上の時間がかかっている
以前のジョブの邪魔をするのを防ぎます。
.Pp
.\"O POSIX-style file locking is used, as described in
.\"O .Xr fcntl 2 .
POSIX 形式のファイルロッキングが使われます。これは
.Xr fcntl 2
で説明されています。
.\"O The process-ID is written to the lock file in text form when the lock
.\"O is successfully acquired.
プロセス ID は、ロックファイルが正常に取得できた時に、このファイルに
テキスト形式で書き込まれます。
.\"O Upon termination of the update, the lock file is removed.
更新の終了時にロックファイルは削除されます。
.It Fl L Ar verbosity
.\"O Sets the verbosity level for non-GUI output.
GUI でない出力の詳しさを設定します。
.\"O A level of 0 causes
.\"O .Nm
.\"O to be completely silent unless errors occur.
レベル 0 では、エラーが起こらない限り
.Nm
は何も出力しません。
.\"O A level of 1 (the default) causes each updated file to be listed.
レベル 1 (デフォルト値)では、更新されたそれぞれのファイルが出力されます。
.\"O A level of 2 provides more detailed information about the updates
.\"O performed on each file.
レベル 2 では、それぞれのファイルに対して行われた更新に関するさらに
詳しい情報が出力されます。
.\"O All messages are directed to the standard output.
メッセージは全て、標準出力に出力されます。
.\"O This option is ignored when the GUI is used.
GUI が使われる場合は、このオプションは無視されます。
.It Fl p Ar port
.\"O Sets the TCP port to which
.\"O .Nm
.\"O attempts to connect on the server host.
.Nm cvsup
が接続を試みるサーバホストの TCP ポートを設定します。
.\"O This feature is primarily for testing.  The default port is 5999.
この機能は主にテスト用です。デフォルト値は 5999 です。
.\"O When not in passive mode (see the description of the
.\"O .Fl P
.\"O option), the server also uses the next lower port to establish a second
.\"O connection back to the client.
passive モード(
.Fl P
オプションの説明を参照)でなければ、サーバはこれより一つ小さい番号の
ポートを使って、逆向きの 2 つ目の接続を確立します。
.It Fl P Ar m|a|port|lo-hi|-
.\"O Controls the establishment of the auxiliary TCP connection(s) used to
.\"O carry information between the client and the server.
クライアントとサーバ間の情報のやりとりに使う補助的な TCP 接続の確立を
制御します。
.\"O Altogether, the client and server require four unidirectional channels
.\"O to communicate: two from the client to the server, and two from the
.\"O server to the client.
全体では、クライアントとサーバは通信するために 4 つの片方向チャネルを
必要とします: 2 つはクライアントからサーバへの接続で、2 つはサーバから
クライアントへの接続です。
.\"O These four unidirectional channels can be set up in different ways, to
.\"O support various firewall setups.
色々な防火壁の設定に対応するために、これら 4 つの片方向チャネルには色々
な設定ができます。
.\"O The modes provided for this are multiplexed mode, passive mode, SOCKS
.\"O mode, and active mode.
このために用意されたモードは、multiplexed モード, passive モード、
SOCKS モード、active モードです。
.\"O All but multiplexed mode are deprecated.
multiplexed モードを除く全てのモードは、古いのでお勧めできません。
.\"O Multiplexed mode can handle any situation that the other modes can
.\"O handle.
multiplexed モードは、他のモードが扱える全ての状況に対応しています。
.Pp
.\"O By default the channels are established in multiplexed mode, if the
.\"O server is new enough to support it.
デフォルトでは、サーバが十分新しければチャネルは multiplexed モードで
確立します。
.\"O Multiplexed mode uses a single TCP connection to implement the
.\"O four channels.
multiplexed モードは、1 つの TCP 接続を用いて 4 つのチャネルを作ります。
.\"O A built-in packet layer multiplexes the different logical channels
.\"O on top of the TCP connection, in a manner not unlike
.\"O .Nm ssh Ns No \&'s
.\"O port forwarding feature.
組み込みのパケット層で、TCP 接続上にある異なる論理チャネルを
多重化します。これは
.Nm ssh Ns No \&'s
のポート転送機能とは異なるやり方で行われます。
.\"O This adds a very small amount of communication overhead (<1%) and a
.\"O little bit of CPU overhead, but it should work behind almost any
.\"O kind of firewall setup.
これにより、非常に小さい(1% 未満)通信オーバーヘッドとごくわずかの CPU 
負荷がかかりますが、ほとんどどんな防火壁の中でも動作するはずです。
.\"O The firewall must permit the client host to initiate connections
.\"O to port 5999 of the server host;
防火壁は、クライアントホストがサーバホストの 5999 番ポートへ接続を開始
することを許可していなければなりません。
.\"O beyond that, no special permissions are required.
これ以外には、特殊な許可は全く必要ありません。
.\"O To explicitly force multiplexed mode, use the option
.\"O .Fl P Cm m .
明示的に multiplexed モードを指定するには、
.Fl P Cm m
オプションを使います。
.Pp
.\"O Multiplexed mode can be used in conjunction with a SOCKS proxy server.
multiplexed モードは SOCKS プロキシサーバと組み合わせて使えます。
.\"O Simply run
.\"O .Nm
.\"O under the
.\"O .Nm m3socks
.\"O command, and specify the
.\"O .Fl P Cm m
.\"O option.
組み合わせて使うには、単に
.Nm m3socks
コマンドに続けて
.Nm cvsup
を実行し、
.Fl P Cm m
オプションを指定します。
.Pp
.\"O Active mode implements the four unidirectional channels using two
.\"O bidirectional TCP connections.
active モードは、双方向の TCP 接続を 2 つ使って 4 つの片方向チャネルを
作ります。
.\"O The original connection from the client to the server implements two
.\"O channels, and a second TCP connection implements the other two channels.
最初にクライアントからサーバへはられた接続で 2 つのチャネルを作り、
2 番目の TCP 接続が残りの 2 つのチャネルを作ります。
.\"O To establish the second TCP connection, the server connects back to the
.\"O client.  With
.\"O .Fl P Ar a ,
.\"O the client listens for the connection on a port chosen
.\"O by the operating system.
2 番目の TCP 接続を確立するために、サーバからクライアントへの接続が行
われます。
.Fl P Ar a
で、クライアントはオペレーティングシステムが選んだポート上で
接続を待ちます。
.\"O Many operating systems use ports in the range 1024-5000 for this
.\"O purpose.
多くのオペレーティングシステムは、この目的には 1024-5000 の範囲の
ポートを使います。
.\"O The user can specify a particular port with
.\"O .Fl P Ar port ,
.\"O or a range of ports with
.\"O .Fl P Ar lo-hi .
ユーザは
.Fl P Ar port
を使って特定のポートを指定できますし、
.Fl P Ar lo-hi
を使ってある範囲のポートも指定できます。
.\"O These port specifications cannot be used through a SOCKS proxy
.\"O server.
これらのポート指定は SOCKS プロキシサーバでは使えません。
.Pp
.\"O Passive mode is similar in that it also uses two TCP connections to
.\"O implement the four unidirectional channels.
passive モードは、4 つの片方向チャネルを作るために TCP 接続を使うとい
う点では似ています。
.\"O However, in passive mode the client connects to the server to create the
.\"O second TCP connection.
しかし、passive モードでは 2 番目の TCP 接続を作るための接続は
クライアントからサーバに対して行われます。
.\"O Passive mode can be useful when the client is behind a firewall that
.\"O allows outbound connections, but denies most incoming connections.
passive モードは、外向きの接続は許可するけれど内向きの接続は禁止してい
る防火壁の中にクライアントがいる場合に便利です。
.\"O To select passive mode, use the option
.\"O .Fl P Cm - .
passive モードを選択するには、
.Fl P Cm -
オプションを使います。
.\"O Passive mode cannot be used through a SOCKS proxy server.
passive モードは SOCKS プロキシサーバでは使えません。
.Pp
.\"O SOCKS mode is an alternate mode for use with SOCKS proxy servers.
SOCKS モードは SOCKS プロキシサーバを使うための別モードです。
.\"O In SOCKS mode, four TCP connections are used, each in one direction
.\"O only.
SOCKS モードでは、4 つの TCP 接続が使われます。これらは全て片方向接続
だけです。
.\"O The use of four unidirectional TCP connections works around a limitation
.\"O in the SOCKS proxy server that would otherwise cause it to deadlock.
4 つの片方向 TCP 接続を使うことにより、SOCKS プロキシサーバの制限を
回避します。これを行わなければ、デッドロックが起こってしまいます。
.\"O (Believe it or not, the SOCKS server uses blocking I/O calls.)
(信じるかどうかはご自由ですが、SOCKS サーバはブロッキング I/O コールを使い
ます。)
.\"O SOCKS mode is selected when
.\"O .Nm
.\"O is run under the
.\"O .Nm m3socks
.\"O command, and no
.\"O .Fl P
.\"O option is given.
SOCKS モードは、
.Nm cvsup
が
.Nm m3socks
コマンドの下で実行され、かつ
.Fl P
オプションが指定されていない時に選択されます。
.\"O See also
.\"O .Sx USING CVSup WITH SOCKS ,
.\"O below.
後述の
.Sx SOCKS と組み合わせての CVSup の利用
もご覧ください。
.\"O NAKANO --MARK--
.It Fl r Ar maxRetries
.\"O Limits the number of automatic retries that will be attempted when
.\"O transient errors such as lost network connections are encountered.  By
.\"O default, when the GUI is not used,
.\"O .Nm
.\"O will retry indefinitely until an update is successfully completed.
自動リトライの回数を制限します。自動リトライは、ネットワーク接続が
切れるといった一時的なエラーが起きた時に試みられます。
デフォルトでは、GUI を使っていない時、
.Nm
は更新がうまく完了するまで何度でもリトライを行います。
.\"O The retries are spaced using randomized exponential backoff.
リトライの間隔は、ランダム化された指数的な一時退避アルゴリズムを使って
決められます。
.\"O Use of the GUI implies
.\"O .Fl r Cm 0 .
GUI を使うと、暗黙的に
.Fl r Cm 0
が指定されます。
.\"O Note that
.\"O .Fl r Cm 0
.\"O is equivalent to the
.\"O .Fl 1
.\"O option.
.Fl r Cm 0
は
.Fl 1
オプションと同じ意味である点に注意してください。
.It Fl s
.\"O Suppresses the check of each client file's status against what is
.\"O recorded in the list file.  Instead, the list file is assumed to be
.\"O accurate.  This option greatly reduces the amount of disk activity and
.\"O results in faster updates with less load on the client host.  However
.\"O it should only be used if client's files are never modified locally in
.\"O any way.  Mirror sites may find this option beneficial to reduce the
.\"O disk load on their systems.  For safety, even mirror sites should run
.\"O .Nm
.\"O occasionally (perhaps once a day) without the
.\"O .Fl s
.\"O option.
リストファイルの記録に対しての各クライアントファイルの状態のチェックを
行いません。チェックをしない代わりに、リストファイルは正確であるものと
仮定します。このオプションはディスクアクセスの量を大幅に減らし、
小さなクライアントホストの負荷で高速に更新を行います。しかし、
このオプションは、クライアントのファイルがローカルで修正されていない場
合に限って使うべきです。ミラーサイトは、このオプションを使うと
システムのディスク負荷を減るので利益があるでしょう。安全のために、
ミラーサイトであっても時々(一日一度くらい)は
.Fl s
オプションなしで
.Nm
を実行すべきです。
.Pp
.\"O Without the
.\"O .Fl s
.\"O option,
.\"O .Nm
.\"O performs a
.\"O .Xr stat 2
.\"O call on each file and verifies that its attributes match those
.\"O recorded in the list file.  This ensures that any file changes made
.\"O outside of
.\"O .Nm CVSup
.\"O are detected and corrected.
.Fl s
オプションを指定しないと、
.Nm
はファイルごとに
.Xr stat 2
システムコールを実行し、ファイルの属性がリストファイルの記録と一致する
かどうかを確認します。これにより、
.Nm CVSup
外部でのファイル変更は全て検出・訂正されることが保証されます。
.Pp
.\"O If the
.\"O .Fl s
.\"O option is used when one or more files have been modified locally, the
.\"O results are undefined.  Local file damage may remain uncorrected,
.\"O updates may be missed, or
.\"O .Nm
.\"O may abort prematurely.
.Fl s
オプションを指定し、かつローカルでファイルが 1 つ以上変更された時の
結果は未定義です。ローカルファイルの損傷が訂正されないまま残ったり、
更新を取りこぼしたり、
.Nm
が実行途中で異常終了するかもしれません。
.It Fl v
.\"O Prints the version number and exits, without contacting the server.
バージョン番号を表示して終了します。サーバへの接続は行いません。
.It Fl z
.\"O Enables compression for all collections, as if the
.\"O .Cm compress
.\"O keyword were added to every collection in the
.\"O .Ar supfile .
全てのコレクションの圧縮を有効にします。この動作は、
.Ar supfile
において、
.Cm compress
キーワードを全てのコレクションに追加した時と同様です。
.It Fl Z
.\"O Disables compression for all collections, as if the
.\"O .Cm compress
.\"O keyword were removed from every collection in the
.\"O .Ar supfile .
全てのコレクションの圧縮を無効にします。この動作は、
.Ar supfile
において、
.Cm compress
キーワードを全てのコレクションから削除した時と同様です。
.El
.Pp
.\"O The
.\"O .Ar supfile
.\"O is a text file which specifies the file collections to be updated.
.Ar supfile
は、更新すべきファイルのコレクションを指定するテキストファイルです。
.\"O Comments begin with
.\"O .Ql #
.\"O and extend to the end of the line.  Lines that are empty except for
.\"O comments and white space are ignored.  Each remaining line begins
.\"O with the name of a server-defined collection of files.  Following the
.\"O collection name on the line are zero or more keywords or keyword=value
.\"O pairs.
コメントは
.Ql #
で始まり、その行の最後まで続きます。コメントと空白を除くと空である行は
無視されます。残りのそれぞれの行は、サーバ定義のファイルのコレクション
で始まります。この行でコレクション名の後に続くのは、0 個以上のキーワード
または「キーワード=値」の組です。
.Pp
.\"O Default settings may be specified in lines whose collection name is
.\"O .Cm *default .
デフォルトの設定は、コレクション名が
.Cm *default
である行で指定できます。
.\"O Such defaults will apply to subsequent lines in the
.\"O .Ar supfile .
このデフォルトは、
.Ar supfile
内のそれ以降の行に適用されます。
.\"O Multiple
.\"O .Cm *default
.\"O lines may be present.
.Cm *default
行は複数個あっても構いません。
.\"O New values augment or override any defaults specified earlier in the
.\"O .Ar supfile .
新しい値は、
.Ar supfile
で前に指定されたデフォルト値に追加されるか、デフォルト値を上書きします。
.\"O Values specified explicitly for a collection override any default
.\"O values.
コレクションに対して明示的に指定された値は、全てのデフォルト値を
上書きします。
.Pp
.\"O The most commonly used keywords are:
特によく使われるキーワードを以下に示します:
.Bl -tag -width Fl
.It Cm release= Ns Ar releaseName
.\"O This specifies the release of the files within a collection.
これはコレクション内のファイルのリリースを指定します。
.\"O Like collection names, release names are defined by the server
.\"O configuration files.  Usually there is only one release in each
.\"O collection, but there may be any number.  Collections which come from
.\"O a CVS repository often use
.\"O .Cm release=cvs
.\"O by convention.  Non-CVS collections conventionally use
.\"O .Cm release=current .
コレクション名と同じく、リリース名もサーバの設定ファイル内で定義されて
います。普通は各コレクション内に 1 つのリリースしか含まれていませんが、
何個含んでもかまいません。CVS リポジトリから得たコレクションでは、
慣習的に
.Cm release=cvs
をよく使います。CVS でないコレクションでは、慣習的に
.Cm release=current
を使います。
.It Cm base= Ns Ar base
.\"O This specifies a directory under which
.\"O .Nm cvsup
.\"O will maintain its bookkeeping files, describing the state of each
.\"O collection on the client machine.
これは
.Nm cvsup
が記録ファイルを置いて管理するディレクトリを指定します。
記録ファイルには、クライアントマシン上にある各コレクションの状態が
書かれます。
.\"O The
.\"O .Ar base
.\"O directory must already exist;
.Ar base
ディレクトリは既に存在していなければなりません。
.\"O .Nm
.\"O will not create it.
.Nm
がこのディレクトリを作成することはありません。
.\"O The default
.\"O .Ar base
.\"O directory is
.\"O .Pa /usr/local/etc/cvsup .
.Ar base
ディレクトリのデフォルト値は
.Pa /usr/local/etc/cvsup
です。
.It Cm prefix= Ns Ar prefix
.\"O This is the directory under which updated files will be placed.
これは、更新されたファイルが置かれるディレクトリです。
.\"O By default, it is the same as
.\"O .Ar base .
デフォルトでは、これは
.Ar base
と同じです。
.\"O If it is not an absolute pathname, it is interpreted relative to
.\"O .Ar base .
絶対パスで指定しなければ、
.Ar base
からの相対パスと解釈されます。
.\"O The
.\"O .Ar prefix
.\"O directory must already exist;
.Ar prefix
ディレクトリは既に存在していなければなりません。
.\"O .Nm
.\"O will not create it.
.Nm
がこのディレクトリを作成することはありません。
.Pp
.\"O As a special case, if
.\"O .Ar prefix
.\"O is a symbolic link pointing to a nonexistent file named
.\"O .Ql SKIP ,
.\"O then
.\"O .Nm
.\"O will skip the collection.
特殊な場合として、
.Ar prefix
が
.Ql SKIP
という名の存在しないファイルを指すシンボリックリンクである場合は、
.Nm
はそのコレクションをスキップします。
.\"O The parameters associated with the collection are still checked for
.\"O validity, but none of its files will be updated.
この場合でもコレクションに関係するパラメータの正しさはチェックされます
が、コレクションのファイルは全く更新されません。
.\"O This feature allows a site to use a standard
.\"O .Ar supfile
.\"O on several machines, yet control which collections get updated on a
.\"O per-machine basis.
この機能を使うと、一つのサイトの複数のマシンで標準の
.Ar supfile
を使いながら、更新するコレクションをマシンごとに制御することができます。
.It Cm host= Ns Ar hostname
.\"O This specifies the server machine from which all files will be taken.
このオプションは、全てのファイルを取り寄せる元となるサーバマシンを
指定します。
.\"O .Nm
.\"O requires that all collections in a single run come from the same host.
.Nm
は、1 回の実行における全てのコレクションを同じホストから得ることを
必要とします。
.\"O If you wish to update collections from several different hosts, you must
.\"O run
.\"O .Nm
.\"O several times.
異なる複数のホストからコレクションを更新したければ、
.Nm
を複数回実行しなければなりません。
.It Cm delete
.\"O The presence of this keyword gives
.\"O .Nm
.\"O permission to delete files.
このキーワードがあると、
.Nm
はファイルの削除を許可します。
.\"O If it is missing, no files will be deleted.
このキーワードがなければ、ファイルは全く削除されません。
.Pp
.\"O The presence of the
.\"O .Cm delete
.\"O keyword puts
.\"O .Nm
.\"O into so-called
.\"O .Em exact
.\"O mode.  In exact mode,
.\"O .Nm CVSup
.\"O does its best to make the client's files correspond to those on the server.
.Cm delete
キーワードがあると、
.Nm
はいわゆる
.Em exact
モードに入ります。exact モードでは、
.Nm CVSup
はできるだけクライアント側のファイルをサーバ側のファイルに対応させよう
とします。
.\"O This includes deleting individual deltas and symbolic tags from RCS
.\"O files, as well as deleting entire files.
これは、RCS ファイルから個々の差分とシンボリックなタグを消すことと、
ファイル全体を消すことを含みます。
.\"O In exact mode,
.\"O .Nm CVSup
.\"O verifies every edited file with a checksum, to ensure that the edits
.\"O have produced a file identical to the master copy on the server.
exact モードでは、
.Nm CVSup
は編集されたそれぞれのファイルをチェックサムを使って調べ、編集によって
サーバ上にあるマスターコピーと同一のファイルができることを保証します。
.\"O If the checksum test fails for a file, then
.\"O .Nm CVSup
.\"O falls back upon transferring the entire file.
あるファイルについてチェックサムのテストが失敗したら、
.Nm CVSup
は最後の手段としてファイル全体を転送します。
.Pp
.\"O In general,
.\"O .Nm CVSup
.\"O deletes only files which are known to the server.
一般的には、
.Nm CVSup
はサーバが知っているファイルだけを削除します。
.\"O Extra files present in the client's tree are left alone, even in exact
.\"O mode.
クライアントのツリーに入っている追加のファイルは、excact モードであっ
てもそのまま残されます。
.\"O More precisely,
.\"O .Nm CVSup
.\"O is willing to delete two classes of files:
より正確に述べると、
.Nm CVSup
が消そうとするファイルは 2 種類です:
.Bl -bullet -compact
.It
.\"O Files that were previously created or updated by
.\"O .Nm CVSup
.\"O itself.
過去に
.Nm CVSup
自身が生成または更新したファイル。
.It
.\"O Checked-out versions of files which are marked as dead on the server.
サーバ上で不要の印が付けられたチェックアウト済みバージョンのファイル。
.El
.It Cm use-rel-suffix
.\"O Causes
.\"O .Nm
.\"O to append a suffix constructed from the release and tag to the name of
.\"O each list file that it maintains.
リリースとタグから作ったサフィックスが
.Nm
が管理している各ファイルの名前に追加されるようにします。
.\"O See
.\"O .Sx THE LIST FILE
.\"O for details.
詳しくは
.Sx リストファイル
を参照してください。
.It Cm compress
.\"O This enables compression of all data sent across the network.
ネットワーク上で送られるデータが全て圧縮されるようにします。
.\"O Compression is quite effective, normally eliminating 65% to 75% of the
.\"O bytes that would otherwise need to be transferred.
圧縮は非常に有効であり、圧縮しなかった場合に必要な転送量と比べて
普通は 65% から 75% のバイトデータを削減できます。
.\"O However, it is costly in terms of CPU time on both the client and the
.\"O server.
しかし、クラアイントとサーバ両方の CPU 時間という点ではコストがかかり
ます。
.\"O On local area networks, compression is generally counter-productive; it
.\"O actually slows down file updates.
LAN では、圧縮は一般的に生産性を落とします。実際にはファイルの更新が
遅くなってしまいます。
.\"O On links with speeds of 56K bits/second or less, compression is almost
.\"O always beneficial.
56K ビット/秒あるいはそれ以下の速度の接続では、圧縮はほぼ確実に
得になります。
.\"O For network links with speeds between these two extremes, let
.\"O experimentation be your guide.
これら両極端なケースの中間の速度のネットワーク接続では、実験を
行って参考としましょう。
.Pp
.\"O The
.\"O .Fl z
.\"O command line option enables the
.\"O .Cm compress
.\"O keyword for all collections, regardless of what is specified in the supfile.
.Fl z
コマンドラインオプションは、全てのコレクションに対して
.Cm compress
キーワードを有効にします。supfile での指定とは無関係です。
.\"O Likewise, the
.\"O .Fl Z
.\"O command line option disables the
.\"O .Cm compress
.\"O option for all collections.
同様に
.Fl Z
コマンドラインオプションは、全てのコレクションに対して
.Cm compress
オプションを無効にします。
.It Cm norcs
.\"O Disables special processing for RCS files.  They will be treated the
.\"O same as other files.
RCS ファイルの特別扱いをなくします。RCS ファイルは他のファイルと
同じように扱われます。
.It Cm norsync
.\"O Disables the use of Tridgell & Mackerras'
.\"O .Em rsync
.\"O algorithm for updating regular (non-RCS) files.
通常の(RCS でない)ファイルの更新の際に、Tridgell と Mackerras の
.Em rsync
アルゴリズムを使いません。
.\"O The algorithm works correctly for any kind of file, but it may be
.\"O ineffective and computationally expensive for files such as
.\"O compressed tar archives.
このアルゴリズムはどんな種類のファイルでも正しく動作しますが、
圧縮された tar アーカイブのようなファイルに対しては、
効率的ではありませんし計算的にもコストが高く付きます。
.It Cm strictrcs
.\"O Causes updated RCS files to be checked using strict byte-by-byte MD5
.\"O checksums.  Normally,
.\"O .Nm CVSup
.\"O uses a looser checksum for RCS files, which ignores harmless
.\"O differences in white space.  Different versions of CVS and RCS produce
.\"O a variety of differences in white space for the same RCS files.  Thus
.\"O the strict checksum can report spurious mismatches for files which are
.\"O logically identical.  This can lead to numerous unneeded
.\"O .Dq fixups ,
.\"O and thus to slow updates.
更新された RCS ファイルをバイト単位の厳密な MD5 チェックサムで
確認します。通常、
.Nm CVSup
は RCS ファイルに対してもっと緩いチェックサムを用います。これは、
空白文字による無意味な違いを無視します。異なるバージョンの
CVS と RCS は、同じ RCS ファイルに対しても空白が様々に異なります。
したがって厳密なチェックサムを取ると、論理的には同じであるファイルに対
して意味がない不一致を報告するかもしれません。これにより不要な
.Dq fixups
が大量に行われ、更新が遅くなることがあります。
.It Cm nocheckrcs
.\"O Disables the comparison of MD5 checksums for updated RCS files.
更新された RCS ファイルに対して、MD5 チェックサムの比較を行いません。
.\"O This option is turned on automatically if the
.\"O .Cm delete
.\"O keyword is not specified.
.Cm delete
キーワードが指定されていなければ、このオプションが自動的に
有効になります。
.It Cm execute
.\"O Enables the execution of shell commands received from the server.
サーバから受け取ったシェルコマンドを実行できるようにします。
.\"O This should be used with caution, since it may constitute a security
.\"O risk.
このオプションは注意して使うべきです。というのも、セキュリティな危険を
及ぼすかもしれないからです。
.It Cm preserve
.\"O Causes
.\"O .Nm
.\"O to attempt to transfer all possible file attributes from the server
.\"O to the client.  The attributes supported depend on both the host
.\"O platform and the client platform.  On FreeBSD systems, the following
.\"O attributes are supported:
.Nm
に、可能な全ての属性をサーバからクライアントに転送しようと試みさせます。
サポートされる属性はホストのプラットフォームとクライアントのプラットフォーム
に依存します。FreeBSD システムでは、以下の属性がサポートされています:
.Bl -bullet -compact
.It
.\"O Owner.
所有者
.It
.\"O Group.
グループ
.It
.\"O Permissions.
パーミッション
.It
.\"O Flags.
フラグ
.It
.\"O Modification time.
修正時刻
.El
.Pp
.\"O Of these, the first four are controlled by the
.\"O .Cm preserve
.\"O keyword, while the fifth is preserved in all cases.
これらのうち、最初の 4 つの属性は
.Cm preserve
キーワードで制御します。5 つ目はどんな場合でも保存されます。
.Pp
.\"O The
.\"O .Cm preserve
.\"O keyword is not intended to be used for updating user files or CVS
.\"O repositories.
.Cm preserve
キーワードは、ユーザファイルや CVS リポジトリの更新に使うためのもので
はありません。
.\"O It is intended only for specialized applications in which a host's entire
.\"O file tree is to be replicated exactly.
これは、ホストの全体のファイルツリーを正確に複製するといった特殊な目的
のためだけに使われます。
.\"O Any differences between the server host and the client host can
.\"O cause problems if
.\"O .Cm preserve
.\"O is specified.
.Cm preserve
が指定されていると、サーバホストとクライアントホストの何らかの違いが
問題を起こすかもしれません。
.\"O For example, if the client receives a file whose owner does not
.\"O exist on the client machine, it will be unable to preserve the
.\"O owner.
例えば、クライアントマシン上に存在しない所有者が所有するファイルを
クライアントが受け取った場合、オーナを保存することはできません。
.\"O This may in turn cause the permissions to have unintended meanings.
同様にこれによって意図しないパーミッションが設定されることがあります。
.\"O In addition, each subsequent update run will cause further unsuccessful
.\"O attempts to correct the file's owner on the client, wasting time
.\"O and bandwidth.
さらに、それ以降の更新では、毎回クライアント上のファイルの所有者を訂正
しようとして失敗し、時間と帯域幅を無駄にしてしまうでしょう。
.\"O Finally,
.\"O .Cm preserve
.\"O mode increases the network traffic and slows down updates.
最後になりますが、
.Cm preserve
モードはネットワークのトラフィックを増大させ、更新を遅くします。
.Pp
.\"O For
.\"O .Cm preserve
.\"O mode to function properly, the client must be executed with root
.\"O access permissions.
.Cm preserve
モードを正しく機能させるためには、クライアントは root のアクセス権限で
実行しなければなりません。
.\"O If the client is not root, then attempts to preserve the owner,
.\"O group, and flags are suppressed.
クライアントが root でなければ、所有者、グループ、フラグの情報を保存し
ようとする機能は無効になります。
.Pp
.\"O The
.\"O .Cm preserve
.\"O keyword is ignored in checkout mode.
.Cm preserve
キーワードは、checkout モードでは無視されます。
.It Cm umask= Ns Ar n
.\"O Causes
.\"O .Nm
.\"O to use a umask value of
.\"O .Ar n
.\"O (an octal number) when updating the files in the collection.
コレクション内のファイルを更新する時、
.Nm
に umask 値
.Ar n
(8 進値)を使わせます。
.\"O This option is ignored if
.\"O .Cm preserve
.\"O is specified.
このオプションは、
.Cm preserve
が指定されていると無視されます。
.El
.Pp
.\"O Some additional, more specialized keywords are described below.
いくつかの追加的で、より専門的なキーワードについては後述します。
.\"O Unrecognized keywords are silently ignored for backward compatibility
.\"O with
.\"O .Nm sup .
.Nm sup
との後方互換性のため、認識できなかったキーワードは黙って無視されます。
.\"O .Sh OPERATION
.Sh 操作
.\"O .Nm
.\"O includes a graphical user interface (GUI) which allows one to monitor its
.\"O progress and performance during an update.  The GUI is disabled if the
.\"O .Fl g
.\"O command line option is given, or if the
.\"O .Ev DISPLAY
.\"O environment variable is not set.
.Nm
は GUI(グラフィカルユーザインタフェース)を持っており、これを使うとユー
ザは更新中の進行状況と処理を監視できます。この GUI は、コマンドライン
オプション
.Fl g
が指定されるか、
.Ev DISPLAY
環境変数が設定されていなければ無効になります。
.\"O The GUI includes a
.\"O .Dq Filter
.\"O type-in field, where patterns may be entered to restrict the files to
.\"O be updated.
GUI には、
.Dq Filter
入力フィールドがあります。ここにパターンを入力して、更新するファイルを
制限することができます。
.\"O The patterns are as described for the
.\"O .Fl i
.\"O option.
パターンは
.Fl i
オプションの指定と同様に記述します。
.\"O If multiple patterns are entered, they should be separated by white space.
複数のパターンを入力する際には、空白で区切らなければなりません。
.Pp
.\"O At present, the GUI does not support changing the parameters specified
.\"O in the
.\"O .Ar supfile .
現在のところは、
.Ar supfile
で指定されたパラメータを GUI で変更することはできません。
.\"O That is planned for a future release.
この点は将来のリリースでの計画になっています。
.\"O Despite its relative uselessness, the GUI is fun to watch.
どちらかというと必要ないものではありますが、GUI は見て楽しいものです。
.\"O .Sh CVS MODE
.Sh CVS モード
.\"O .Nm CVSup
.\"O supports two primary modes of operation.
.Nm CVSup
は、2 つの主な動作モードをサポートしています。
.\"O They are called
.\"O .Em CVS
.\"O mode and
.\"O .Em checkout
.\"O mode.
これらは
.Em CVS
モードと
.Em checkout
モードと呼ばれるものです。
.Pp
.\"O In CVS mode, the client receives copies of the actual RCS files making
.\"O up the master CVS repository.  CVS mode is the default mode of operation.
CVS モードでは、クライアントはマスターの CVS リポジトリを構成している
実際の RCS ファイルのコピーを受信します。CVS モードはデフォルトの動作
モードです。
.\"O It is appropriate when the user wishes to maintain a full copy of the
.\"O CVS repository on the client machine.
このモードは、CVS リポジトリの完全なコピーをクライアントマシン上でメン
テナンスしようとユーザが考えている場合には適しています。
.Pp
.\"O CVS mode is also appropriate for file collections which are not
.\"O based upon a CVS repository.  The files are simply transferred
.\"O verbatim, without interpretation.
CVS モードは、CVS リポジトリベースでないファイルのコレクションに対して
もうまく使えます。この場合にはファイルは解釈されることなく、単にそのま
ま転送されます。
.\"O .Sh CHECKOUT MODE
.Sh checkout モード
.\"O In checkout mode, the client receives specific revisions of files,
.\"O checked out directly from the server's CVS repository.
checkout モードでは、クライアントは特定のリビジョンのファイルを受信し
ます。これはサーバの CVS リポジトリから直接チェックアウトされます。
.\"O Checkout mode allows the client to receive any version from the
.\"O repository, without requiring any extra disk space on the server for
.\"O storing multiple versions in checked-out form.
checkout モードを使うと、クライアントは任意のバージョンをリポジトリか
ら取得できます。この際、チェックアウトされる時の形で複数個のバージョン
をサーバ上に持つ必要はありません。
.\"O Checkout mode provides much flexibility beyond that basic functionality,
.\"O however.
しかし、checkout モードでは、その基本機能よりもずっと柔軟に動作させる
ことができます。
います。
.\"O The client can specify any CVS symbolic tag, or any date, or both, and
.\"O .Nm CVSup
.\"O will provide the corresponding checked-out versions of the files in the
.\"O repository.
クライアントは CVS のシンボリックタグを指定できますし、任意の日付の指
定もできます。両方を指定することもできます。また
.Nm CVSup
は、この指定に対応するファイルをリポジトリ内からチェックアウト形式で取
り出すことができます。
.Pp
.\"O Checkout mode is selected on a per-collection basis, by the presence of
.\"O one or both of the following keywords in the
.\"O .Ar supfile :
checkout モードはコレクション別に指定します。指定は、
.Ar supfile
内に以下のキーワードの一つあるいは両方を含めることによって行います:
.Bl -tag -width Fl
.It Cm tag= Ns Ar tagname
.\"O This specifies a symbolic tag that should be used to select the
.\"O revisions that are checked out from the CVS repository.
シンボリックタグを指定します。このタグは、CVS リポジトリから取り出すリ
ビジョンを選択するために使わなければなりません。
.\"O The tag may refer to either a branch or a specific revision.
このタグはブランチまたは特定のリビジョンを示すことができます。
.\"O It must be symbolic; numeric revision numbers are not supported.
タグはシンボリックでなければなりません。つまり、数値のリビジョン番号は
サポートされていません。
.Pp
.\"O For the FreeBSD source repository, the most commonly used tags will be:
FreeBSD のソースリポジトリの場合は、以下のタグがよく使われます:
.Bl -tag -width RELENG_3
.It Li RELENG_3
.\"O The
.\"O .Ql stable
.\"O branch.
.Ql stable
ブランチ。
.It Li \&.
.\"O The main branch (the
.\"O .Ql current
.\"O release).
メインブランチ(
.Ql current
リリース)。
.\"O This is the default, if only the
.\"O .Cm date
.\"O keyword is given.
.Cm date
キーワードだけが指定されると、こちらがデフォルトです。
.El
.Sm off
.It Xo Cm date=
.Op Ar cc
.Ar yy.mm.dd.hh.mm.ss
.Xc
.Sm on
.\"O This specifies a date that should be used to select the revisions that
.\"O are checked out from the CVS repository.
これは、CVS リポジトリからチェックアウトするリビジョンの選択に使う日付
を指定します。
.\"O The client will receive the revisions that were in effect at the
.\"O specified date and time.
クライアントは実際には、指定された日付と時刻のリビジョンを受け取ります。
.Pp
.\"O At present, the date format is inflexible.  All 17 or 19 characters must
.\"O be specified, exactly as shown.
現時点では、日付のフォーマットは柔軟ではありません。17 文字あるいは 19 
文字の全てを、説明したフォーマットで正確に指定しなければなりません。
.\"O For the years 2000 and beyond, specify the century
.\"O .Ar cc .
2000 年以降の場合は、世紀を
.Ar cc
で指定します。
.\"O For earlier years, specify only the last two digits
.\"O .Ar yy .
これより前の年の場合は、最後の 2 桁だけを
.Ar yy
で指定します。
.\"O Dates and times are considered to
.\"O be GMT.
日付と時刻は GMT で扱います。
.\"O The default date is
.\"O .Ql \&. ,
.\"O which means
.\"O .Dq as late as possible .
デフォルトの日付は
.Ql \&.
です。これは
.Dq できるだけ新しいもの
という意味です。
.El
.Pp
.\"O To enable checkout mode, you must specify at least one of these keywords.
checkout モードを有効にするためには、少なくともこれらのキーワードの
いずれかを指定しなければなりません。
.\"O If both are missing,
.\"O .Nm CVSup
.\"O defaults to CVS mode.
どちらも指定されていなければ、
.Nm CVSup
はデフォルトの CVS モードで動作します。
.Pp
.\"O If both a branch tag and a date are specified, then the revisions on the
.\"O given branch, as of the given date, will be checked out.  It is
.\"O permitted, but not particularly useful, to specify a date with a
.\"O specific release tag.
ブランチタグと日付が両方とも指定されると、指定されたブランチ上の
指定された日付の時点のリビジョンがチェックアウトされます。
日付を特定のリリースタグに付けて指定することもできますが、あまり役には
立たないでしょう。
.Pp
.\"O In checkout mode, the tag and/or date may be changed between updates.
checkout モードでは、タグや日付を更新と更新の間に変えられます。
.\"O For example, suppose that a collection has been transferred using the
.\"O specification
.\"O .Ql tag=. .
例えば、
.Ql tag=.
という指定を使ってコレクションが転送されたとしましょう。
.\"O The user could later change the specification to
.\"O .Ql tag=RELENG_3 .
ユーザは後から指定を
.Ql tag=RELENG_3
に変えられます。
.\"O This would cause
.\"O .Nm CVSup
.\"O to edit the checked-out files in such a way as to transform them from the
.\"O .Ql current
.\"O versions to the
.\"O .Ql stable
.\"O versions.
これを指定すると、
.Nm CVSup
はチェックアウトされたファイルを編集し、
.Ql current
バージョンが
.Ql stable
バージョンになるようにします。
.\"O In general,
.\"O .Nm CVSup
.\"O is willing to transform any tag/date combination into any other tag/date
.\"O combination, by applying the intervening RCS deltas to the existing files.
一般的には、
.Nm CVSup
はどんなタグ/日付の組合せであっても、他のタグ/日付の組合せに変換してく
れます。変換は、両者の間にある RCS の差分を既存のファイルに適用するこ
とによって行います。
.Pp
.\"O When transforming a collection of checked-out files from one tag to
.\"O another, it is important to specify the
.\"O .Cm list
.\"O keyword in the
.\"O .Ar supfile ,
.\"O to ensure that the same list file is used both before and after the
.\"O transformation.
チェックアウトされたファイルのコレクションを、あるタグから別のタグに
変換するときには、変換の前後で必ず同じリストファイルが使われるようにす
るため、
.Ar supfile
ファイル中で
.Cm list
キーワードを指定することが重要です。
.\"O The list file is described in
.\"O .Sx THE LIST FILE ,
.\"O below.
リストファイルは次の
.Sx リストファイル
の節で説明します。
.\"O .Sh THE LIST FILE
.SH リストファイル
.\"O For efficiency,
.\"O .Nm
.\"O maintains a bookkeeping file for each collection, called the list file.
効率のため、
.Nm
は各コレクションについての記録ファイルを管理しています。
これをリストファイルと呼びます。
.\"O The list file contains information about which files and revisions the client
.\"O currently possesses.
リストファイルには、クライアントが現在持っているファイルとリビジョンに
関する情報が書かれています。
.\"O It also contains information used for verifying that the list file
.\"O is consistent with the actual files in the client's tree.
このファイルには、クライアントのツリーに入っている実際のファイルと
リストファイルが一致していることを確認するための情報も書かれています。
.Pp
.\"O The list file is not strictly necessary.  If it is deleted, or becomes
.\"O inconsistent with the actual client files,
.\"O .Nm
.\"O falls back upon a less efficient method of identifying the client's
.\"O files and performing its updates.
厳密に言うとリストファイルは必要ではありません。このファイルが削除され
るか、クライアントが持っている実際のファイルとの不一致が起こると、
.Nm
は最後の手段として少し効率の悪い方法でクライアント側のファイルの識別と
更新を行います。
.\"O Depending on
.\"O .Nm CVSup Ns No 's
.\"O mode of operation, the fallback method employs time stamps, checksums, or
.\"O analysis of RCS files.
この際には、
.Nm CVSup
の動作モードによって、タイムスタンプ、チェックサム、RCS ファイルの
解析結果などが使われます。
.Pp
.\"O Because the list file is not essential,
.\"O .Nm
.\"O is able to
.\"O .Dq adopt
.\"O an existing file tree acquired by FTP or from a CD-ROM.
リストファイルは不可欠ではないので、
.Nm
は FTP や CD-ROM から入手した既存のファイルツリーを「利用」できます。
.\"O .Nm
.\"O identifies the client's versions of the files, updates them as
.\"O necessary, and creates a list file for future use.
.Nm
はクライアント側のファイルのバージョンを識別し、必要に応じてこれを更新
します。さらに、将来使うためにリストファイルを生成します。
.\"O Adopting a foreign file tree is not as fast as performing a normal
.\"O update.
他のシステムが作ったファイルツリーを使う場合の動作は、通常の更新ほど
高速ではありません。
.\"O It also produces a heavier load on the server.
また、サーバにかかる負荷も高くなります。
.\"O .Pp
.\"O The list file is stored in a collection-specific directory; see
.\"O .Sx FILES
.\"O for details.
リストファイルはコレクション固有のディレクトリに保存されます。詳しくは
.Sx ファイル
セクションをご覧ください。
.\"O Its name always begins with
.\"O .Ql checkouts .
リストファイルの名前は必ず
.Ql checkouts
で始まります。
.\"O If the keyword
.\"O .Cm use-rel-suffix
.\"O is specified in the
.\"O .Ar supfile ,
.\"O a suffix, formed from the release and tag, is appended to the name.
.Ar supfile
内でキーワード
.Cm use-rel-suffix
が指定されていると、リリースとタグから作ったサフィックスがファイル名に
追加されます。
.\"O The default suffix can be overridden by specifying an explicit suffix in
.\"O the
.\"O .Ar supfile :
デフォルトのサフィックスは、
.Ar supfile 
で明示的にサフィックスを指定することにより上書きされます:
.Bl -tag -width Fl
.It Cm list= Ns Ar suffix
.\"O This specifies a suffix for the name of the list file.  A leading dot is
.\"O provided automatically.
これはリストファイルの名前に付けるサフィックスの指定です。サフィックス
の先頭のドットは自動的に付けられます。
.\"O For example,
.\"O .Ql list=stable
.\"O would produce a list file named
.\"O .Pa checkouts.stable ,
.\"O regardless of the release, tag, or
.\"O .Cm use-rel-suffix
.\"O keyword.
例えば、
.Ql list=stable
とすると、
.Pa checkouts.stable
という名前のリストファイルが作られます。この場合には、リリース、タグ、
.Cm use-rel-suffix
キーワードは関係ありません。
.El
.\"O .Sh REFUSE FILES
.Sh refuse ファイル
.\"O The user can specify sets of files that he does not wish to receive.
ユーザは受け取りたくないファイルの集合を指定できます。
.\"O The files are specified as file name patterns in so-called
.\"O .Em refuse
.\"O files.
こういったファイルは、いわゆる
.Em refuse
ファイル内でファイル名パターンとして指定されます。
.\"O The patterns are separated by whitespace, and multiple patterns are
.\"O permitted on each line.
パターンは空白文字で区切られ、各行には複数個のパターンを置くことができます。
.\"O Files and directories matching the patterns are neither updated nor
.\"O deleted; they are simply ignored.
パターンにマッチするファイルとディレクトリは、更新も削除もされません。
これらのファイルは単に無視されます。
.Pp
.\"O There is currently no provision for comments in refuse files.
現在は、refuse ファイル内にコメントに書く方法はありません。
.Pp
.\"O The patterns are similar to those of
.\"O .Xr sh 1 ,
.\"O except that there is no special treatment for slashes or for
.\"O filenames that begin with a period.
パターンは
.Xr sh 1
のそれと似ていますが、スラッシュの特別扱いや、ピリオドで始まるファイル
の特別扱いがない点が異なります。
.\"O For example, the pattern
.\"O .Ql *.c
.\"O will match any file name ending with
.\"O .Ql \&.c
.\"O including those in subdirectories, such as
.\"O .Ql foo/bar/lam.c .
例えば、パターン
.Ql *.c
は
.Ql \&.c
で終わる全てのファイルにマッチします。これには
.Ql foo/bar/lam.c
といったサブディレクトリ内のファイルも含まれます。
.\"O All patterns are interpreted relative to the collection's prefix
.\"O directory.
全てのパターンはコレクションのプレフィックスディレクトリからの相対パス
として解釈されます。
.Pp
.\"O If the files are coming from a CVS repository, as is usually
.\"O the case, then they will be RCS files. These have a
.\"O .Ql \&,v
.\"O suffix which must be taken into account in the patterns. For
.\"O example, the FreeBSD documentation files are in a sub-directory of
.\"O .Ar base
.\"O called
.\"O .Ql doc .
これらファイルが CVS リポジトリから得たものならば――普通はそうなのです
が――これらは RCS ファイルとなります。これらのファイルには、
.Ql \&,v
というサフィックスが付きます。パターンについてはサフィックスも考慮に入
れなければなりません。例えば、FreeBSD の文書ファイルは
.Ql doc
という
.Ar base
ディレクトリのサブディレクトリに入っています。
.\"O If
.\"O .Ql Makefile
.\"O from that directory is not required then the line
.\"O .Pp 
.\"O .Bl -item -compact -offset indent
.\"O .It 
.\"O .Pa doc/Makefile
.\"O .El
.\"O .Pp
.\"O will not work because the file on the server is called
.\"O .Ql Makefile,v.
そのディレクトリにある
.Ql Makefile
が不要な場合に
.Pp 
.Bl -item -compact -offset indent
.It 
.Pa doc/Makefile
.El
.Pp
と指定してもうまく動作しません。なぜなら、サーバ上にあるファイルは
.Ql Makefile,v
だからです。
.\"O A better solution would be
.\"O .Pp
.\"O .Bl -item -compact -offset indent
.\"O .It
.\"O .Pa doc/Makefile*
.\"O .El 
.\"O .Pp 
.\"O which will match whether
.\"O .Ql Makefile
.\"O is an RCS file or not.
もっとよい解決方法は、
.Pp
.Bl -item -compact -offset indent
.It
.Pa doc/Makefile*
.El 
.Pp 
と指定することです。この指定であれば、
.Ql Makefile
が RCS ファイルであろうとなかろうとマッチします。
.Pp
.\"O As another example, to receive the FreeBSD documentation files without
.\"O the Japanese, Russian, and Chinese translations, create a refuse file
.\"O containing the following lines:
別の例としては、日本語、ロシア語、中国語の翻訳を避けて FreeBSD 文書
ファイルを取得するには、以下の行を含む refuse ファイルを作ります:
.Pp
.Bl -item -compact -offset indent
.It
.Pa doc/ja*
.It
.Pa doc/ru*
.It
.Pa doc/zh*
.El 
.Pp
.\"O As many as three refuse files are examined for each
.\"O .Ar supfile
.\"O line.
それぞれの
.Ar supfile
行は、3 つの refuse ファイルによって調べられます。
.\"O There can be a global refuse file named
.\"O .Sm off
.\"O .Ar base / Ar collDir Pa /refuse
.\"O .Sm on
.\"O which applies to all collections and releases.
大域的な refuse ファイルとして
.Sm off
.Ar base / Ar collDir Pa /refuse
.Sm on
があります。これは全てのコレクションとリリースに適用されます。
.\"O There can be a per-collection refuse file named
.\"O .Sm off
.\"O .Xo Ar base / Ar collDir / Ar collection
.\"O .Pa /refuse
.\"O .Xc
.\"O .Sm on
.\"O which applies to a specific collection.
コレクション別の refuse ファイルとして
.Sm off
.Xo Ar base / Ar collDir / Ar collection
.Pa /refuse
.Xc
.Sm on
があります。これは特定のコレクションに適用されます。
.\"O Finally, there can be a per-release and tag refuse file which applies only
.\"O to a given release/tag combination within a collection.
最後に、リリースとタグ別の refuse ファイルがあります。これは、
コレクション内の指定されたリリース/タグの組み合わせに対してのみ適用さ
れます。
.\"O The name of the latter is formed by suffixing the name of the
.\"O per-collection refuse file in the same manner as described above for the
.\"O list file.
最後の refuse ファイルの名前は、コレクション別の refuse ファイルの名
前にサフィックスを加えることによって付けられます。これは先に説明したリ
ストファイルと同じ方法です。
.\"O None of the refuse files are required to exist.
どんな種類の refuse ファイルも存在しなくてもかまいません。
.Pp
.\"O .Nm
.\"O has a built-in default value of
.\"O .Ar /usr/local/etc/cvsup
.\"O for
.\"O .Ar base
.\"O and
.\"O .Ar sup
.\"O for 
.\"O .Ar collDir
.\"O but it is possible to override both of these. The value of
.\"O .Ar base
.\"O can be changed using the
.\"O .Fl b
.\"O option or a
.\"O .Ar base=pathname
.\"O entry in the
.\"O .Ar supfile .
.Nm
は、
.Ar collDir
に対する
.Ar base
と
.Ar sup
の組み込みのデフォルト値を
.Ar /usr/local/etc/cvsup
に持っていますが、どちらの値も上書き可能です。
.Ar base
の値は
.Fl b
オプションまたは
.Ar supfile
ファイル中の
.Ar base=pathname
エントリで変更できます。
.\"O (If both are used the 
.\"O .Fl b
.\"O option will override the
.\"O .Ar supfile
.\"O entry.)  The value of 
.\"O .Ar collDir
.\"O can only be changed with the
.\"O .Fl c
.\"O option; there is no
.\"O .Ar supfile
.\"O command to change it.
(両方指定した場合は、
.Fl b
オプションの方が
.Ar supfile
のエントリよりも優先されます。)
.Ar collDir
の値は
.Fl c
オプションでしか変更できません。これを変更する
.Ar supfile
コマンドはありません。
.Pp
.\"O As an example, suppose that the
.\"O .Ar base
.\"O and
.\"O .Ar collDir
.\"O both have their default values, and that the collection and release are
.\"O .Ql src-all
.\"O and
.\"O .Ql cvs ,
.\"O respectively.
例えば、
.Ar base
と
.Ar collDir
の両方にデフォルト値が設定されており、コレクションが
.Ql src-all
でリリースが
.Ql cvs
である場合を考えます。
.\"O Assume further that checkout mode is being used with
.\"O .Ql tag=RELENG_3 .
さらに、
.Ql tag=RELENG_3
に対して checkout モードが使われているものとします。
.\"O The three possible refuse files would then be named:
この場合、refuse ファイルの名前としては以下の 3 つが考えられます:
.Pp
.Bl -item -compact -offset indent
.It
.Pa /usr/local/etc/cvsup/sup/refuse
.It
.Pa /usr/local/etc/cvsup/sup/src-all/refuse
.It
.Pa /usr/local/etc/cvsup/sup/src-all/refuse.cvs:RELENG_3
.El
.Pp
.\"O If the
.\"O .Ar supfile
.\"O includes the command
.\"O .Ar base=/foo
.\"O the refuse files would be:
.Ar supfile
がコマンド
.Ar base=/foo
を含んでいる場合、refuse ファイルは以下のようになります:
.Pp
.Bl -item -compact -offset indent
.It
.Pa /foo/sup/refuse
.It
.Pa /foo/sup/src-all/refuse
.It
.Pa /foo/sup/src-all/refuse.cvs:RELENG_3
.El
.Pp
.\"O If
.\"O .Fl b
.\"O .Ar /bar
.\"O is used (even with
.\"O .Ar base=/foo
.\"O in the
.\"O .Ar supfile ) :
.Fl b
.Ar /bar
が使われている場合(
.Ar supfile
ファイル中に
.Ar base=/foo
コマンドがあっても):
.Pp
.Bl -item -compact -offset indent
.It
.Pa /bar/sup/refuse                
.It
.Pa /bar/sup/src-all/refuse                
.It
.Pa /bar/sup/src-all/refuse.cvs:RELENG_3                
.El
.Pp
.\"O and with
.\"O .Fl c
.\"O .Ar stool
.\"O as well:
そして
.Fl c
.Ar stool
も使われている場合:
.Pp
.Bl -item -compact -offset indent
.It
.Pa /bar/stool/refuse
.It 
.Pa /bar/stool/src-all/refuse
.It
.Pa /bar/stool/src-all/refuse.cvs:RELENG_3
.\"O .Sh AUTHENTICATION
.Sh 認証
.\"O .Nm CVSup
.\"O implements an authentication mechanism which can be used by the
.\"O client and server to verify each other's identities.  It uses a
.\"O challenge-response protocol which is immune to packet sniffing and
.\"O replay attacks.  No passwords are sent over the network in either
.\"O direction.  Both the client and the server can independently verify
.\"O the identities of each other.
.Nm CVSup
は認証機構を備えており、これを使ってクライアントとサーバがお互いの身元
を確認することができます。この機構は、パケット盗聴やリプレイ攻撃の影響
を受けない challenge-response プロトコルを用いています。ネットワーク上
では、パスワードはどちらの向きにも流れません。クライアントとサーバのい
ずれも、お互いの身元を独立に確認できます。
.Pp
.\"O The file
.\"O .Li $ Ns Ev HOME Ns Pa /.cvsup/auth
.\"O holds the information used for authentication.  This file contains a
.\"O record for each server that the client is allowed to access.  Each
.\"O record occupies one line in the file.  Lines beginning with
.\"O .Ql #
.\"O are ignored, as are lines containing only white space.  White space is
.\"O significant everywhere else in the file.  Fields are separated by
.\"O .Ql \&:
.\"O characters.
ファイル
.Li $ Ns Ev HOME Ns Pa /.cvsup/auth
には認証に使われる情報が書かれています。このファイルには、クライアント
がアクセス可能な各サーバについてのレコードが入っています。それぞれの
レコードは、ファイル中に 1 行で書かれます。
.Ql #
で始まる行は無視されます。空白文字だけの行も同様です。ただし、ファイル
中の他の場所では空白文字も意味を持ちます。フィールドは
.Ql \&:
文字で区切られます。
.Pp
.\"O Each record of the file has the following form:
ファイルの各レコードは以下の形式です:
.Bd -literal -offset indent
.Sm off
.Xo Ar serverName No : Ar clientName No :
.Ar password No : Ar comment
.Xc
.Sm on 
.Ed 
.Pp 
.\"O All fields must be present even if some of them are empty.
たとえ空であっても、全てのフィールドは存在しなければなりません。
.\"O .Ar ServerName
.\"O is the name of the server to which the record applies.  By convention,
.\"O it is the canonical fully-qualified domain name of the server, e.g.,
.\"O .Ql CVSup177.FreeBSD.ORG .
.Ar ServerName
はレコードが適用されるサーバ名です。慣習的に、これはカノニカルかつ完全
にドメイン名が指定されたサーバ名です(例:
.Ql CVSup177.FreeBSD.ORG
)。
.\"O This must agree with the server's own idea of its name.  The name is
.\"O case-insensitive.
これはサーバが自分の名前と考えているホスト名でなければなりません。
名前については大文字・小文字は区別されません。
.Pp
.\"O .Ar ClientName
.\"O is the name the client uses to gain access to the server.  By
.\"O convention, e-mail addresses are used for all client names, e.g.,
.\"O .Ql BillyJoe@FreeBSD.ORG .
.\"O Client names are case-insensitive.
.Ar ClientName
はクライアントがサーバへのアクセス権を得るときに使う名前です。慣習的に、
クライアント名には全て e-mail アドレスが使われます(例:
.Ql BillyJoe@FreeBSD.ORG
)。クライアント名では大文字・小文字は区別されません。
.Pp
.\"O .Ar Password
.\"O is a secret string of characters that the client uses to prove its
.\"O identity.  It may not contain any
.\"O .Ql \&:
.\"O or newline characters.
.Ar Password
は秘密の文字列であり、クライアントが身元を証明するために使います。
パスワード文字列は
.Ql \&:
や改行文字を含んではいけません。
.Pp
.\"O .Ar Comment
.\"O may contain any additional information to identify the record.  It
.\"O is not interpreted by the program.
.Ar Comment
はレコードを識別するための付加的な情報を持ちます。プログラムに解釈され
ることはありません。
.Pp
.\"O To set up authentication for a given server, one must perform the
.\"O following steps:
指定されたサーバに対する認証の設定を行うには、以下の手順を実行しなけれ
ばなりません:
.Bl -enum
.It
.\"O Obtain the official
.\"O .Ar serverName
.\"O from the administrator of the server or from some other source.
サーバ管理者または別の情報源から公式な
.Ar serverName
を取得します。
.It
.\"O Choose an appropriate
.\"O .Ar clientName .
適切な
.Ar clientName
を選びます。
.\"O It should be in the form of a valid e-mail address, to make it easy
.\"O for the server administrator to contact the user if necessary.
これは有効な電子メールアドレスの形式にすべきです。これは、サーバ管理者
が必要に応じてユーザに連絡しやすくするためです。
.It
.\"O Choose an arbitrary secret
.\"O .Ar password .
秘密の
.Ar password
として任意の文字列を選びます。
.It
.\"O Run the
.\"O .Nm cvpasswd
.\"O utility, and type in the
.\"O .Ar password
.\"O when prompted for it.  The utility will print out a line to send
.\"O to the server administrator, and instruct you how to modify your
.\"O .Li $ Ns Ev HOME Ns Pa /.cvsup/auth
.\"O file.  You should use a secure channel to send the line to the
.\"O server administrator.
.Nm cvpasswd
ユーティリティを実行し、質問に対して
.Ar パスワード
を入力します。このユーティリティはサーバの管理者に送る行を出力し、
それからユーザの
.Li $ Ns Ev HOME Ns Pa /.cvsup/auth
ファイルの修正手順を示します。この行をサーバ管理者に送るには、安全な
手段を使うべきです。
.El
.Pp
.\"O Since
.\"O .Li $ Ns Ev HOME Ns Pa /.cvsup/auth
.\"O contains passwords, you should ensure that it is not readable by
.\"O anyone except yourself.
.Li $ Ns Ev HOME Ns Pa /.cvsup/auth
にはパスワードが入っているので、必ず自分以外には誰も読めないようにして
ください。
.Pp
.\"O Authentication works independently in both directions.  The server
.\"O administrator controls whether you must prove your identity.
認証はそれぞれの向きで独立に動作します。サーバの管理者は、
ユーザが身元を証明しなければならないかどうかを制御します。
.\"O You control whether to check the server's identity, by means of the
.\"O .Fl a
.\"O command line option.
ユーザはサーバの身元をチェックするかどうかを制御します。制御には
.Fl a
コマンドラインオプションを使います。
.\"O .Sh USING CVSup FOR MIRRORING
.Sh ミラーリングのための CVSup の使用
.\"O Although
.\"O .Nm CVSup
.\"O is optimized for CVS repositories, it works quite well as a general
.\"O purpose mirroring tool.
.Nm CVSup
は CVS リポジトリ用に最適化されているので、汎用的なミラーリングとして
非常にうまく動作します。
.\"O It is able to update all types of files.
.Nm CVSup
はどんな種類のファイルの更新にも使えます。
.Bl -bullet -compact
.It
.\"O RCS files are updated by transferring individual tags and deltas,
.\"O and merging them into the client file.
RCS ファイルの更新は、個々のタグと差分の転送および、これらの
クライアント側のファイルへのマージによって行われます。
.It
.\"O Regular files are updated using the rsync algorithm, if it is
.\"O enabled.
通常ファイルは、可能であれば rsync アルゴリズムを使って更新されます。
.\"O If the rsync algorithm is disabled, files which have had data appended
.\"O to them on the server (e.g., log files) receive only the new tail portion.
rsync アルゴリズムが無効にされている場合、追加されたデータを持つサーバ
上のファイル(例: ログファイル)は、新しく加わった末尾の部分だけを受け取
ります。
.\"O Other regular files are replaced in whole.
他の通常ファイルはまるごと置き換えられます。
.It
.\"O Empty directories are preserved.
空のディレクトリは残されます。
.It
.\"O Symbolic links are updated as dictated by
.\"O .Cm symlink
.\"O and
.\"O .Cm rsymlink
.\"O commands in the server's configuration files.  See
.\"O .Xr cvsupd 8 .
シンボリックリンクは、サーバの設定ファイル内で
.Cm symlink
と
.Cm rsymlink
コマンドが指定されていると更新されます。詳しくは
.Xr cvsupd 8
をご覧ください。
.It
.\"O Hard links are preserved within each collection, but not
.\"O between collections.
ハードリンクはそれぞれのコレクション内では保存されますが、コレクション
間では保存されません。
.It
.\"O Device nodes are updated by major and minor device number.
デバイスノードはメジャー番号とマイナー番号を使って更新されます。
.\"O This may not produce the desired results if the client host
.\"O and the server host run different operating systems.
クライアントのホストとサーバのホストで異なるオペレーティングシステムが
動作していると、これは望ましい結果とならないことがあります。
.El
.\"O .Sh CVSup AND FIREWALLS
.Sh CVSup と防火壁
.\"O .Nm
.\"O provides a number of different modes designed to work thorough
.\"O various firewall setups.
.Nm
は、様々な設定の防火壁を超えるために数多くのモードを用意しています。
.\"O These are controlled by the
.\"O .Fl P
.\"O option and by the use of the
.\"O .Nm m3socks
.\"O command.
これらのモードは
.Fl P
オプションか、
.Nm m3socks
コマンドを使って制御できます。
.\"O To allow
.\"O .Nm
.\"O to be used, the firewall must at a minimum permit outbound connections
.\"O to port 5999 of the server host.
.Nm
を使えるようにするには、防火壁はサーバホストの 5999 番ポートへの外向き
の接続を最低限許可しなければなりません。
.\"O If this condition is met, then multiplexed mode
.\"O .Pq Fl P Cm m
.\"O should work, with or without SOCKS.
この条件が満たされていれば、SOCKS の有無に関わらず多重モード
.Pq Fl P Cm m
が動作するはずです。
.Pp
.\"O With slightly more permissive firewall rules it may be possible to
.\"O use passive mode or one of the other modes, for a slight gain in
.\"O efficiency.
もう少し防火壁の制限が緩ければ、passive モードや他のモードの一つを使っ
て、効率を少し上げることができます。
.\"O See the description of the
.\"O .Fl P
.\"O option for details.
詳しくは
.Fl P
オプションの説明をご覧ください。
.Pp
.\"O For more information on using CVSup with specific kinds of firewalls,
.\"O see the CVSup FAQ at
.\"O .Aq http://www.polstra.com/projects/freeware/CVSup/ .
特定の種類の防火壁と CVSup を組み合わせて使う際の情報については、
.Aq http://www.polstra.com/projects/freeware/CVSup/
にある CVSup FAQ をご覧ください。
.\"O .Sh USING CVSup WITH SOCKS
.Sh SOCKS と組み合わせての CVSup の利用
.\"O Communication through a SOCKS proxy server is currently supported only
.\"O under FreeBSD.
SOCKS プロキシサーバ経由での通信は、現在は FreeBSD 上でしかサポートさ
れていません。
.\"O It requires a modified Modula-3 runtime system as provided by the
.\"O .Pa lang/modula-3-lib
.\"O port, and an add-on SOCKS library from the
.\"O .Pa lang/modula-3-socks
.\"O port.
これを用いるためには、port として用意されている
修正版の Modula-3 の実行時システム(
.Pa lang/modula-3-lib
)とアドオンの SOCKS ライブラリ(
.Pa lang/modula-3-socks
)が必要です。
.\"O Also, the SOCKS library uses dynamic linking techniques which require
.\"O that the
.\"O .Nm
.\"O executable be fully dynamic.
また、SOCKS ライブラリは動的リンク技術を使うので、
.Nm
の実行ファイルは完全に動的リンクされている必要があります。
.\"O The FreeBSD port
.\"O .Pa net/cvsup
.\"O links
.\"O .Nm
.\"O fully dynamic as required.
FreeBSD の port の
.Pa net/cvsup
は、必要に応じて
.Nm
を完全に動的にリンクします。
.Pp
.\"O To enable SOCKS operation, simply execute
.\"O .Nm
.\"O with the
.\"O .Cm m3socks
.\"O command provided in the
.\"O .Pa lang/modula-3-socks
.\"O package.
SOCKS の動作を有効にするには、単に
.Pa lang/modula-3-socks
パッケージに含まれる
.Cm m3socks
と組み合わせて
.Nm
を実行してください。
.\"O See
.\"O .Xr m3socks 1
.\"O for further details.
詳細については
.Xr m3socks 1
をご覧ください。
.\"O .Sh USING ssh PORT FORWARDING
.Sh ssh を使ったポート転送
.\"O As an alternative to SOCKS, a user behind a firewall can penetrate it
.\"O with the TCP port forwarding provided by the Secure Shell package
.\"O .Nm ssh .
防火壁の内側のユーザは、SOCKS の代替品として、Secure Shell パッケージの
.Nm ssh
が持っている TCP ポート転送機能を使って防火壁を通過できます。
.\"O The user must have a login account on the
.\"O .Nm CVSup
.\"O server host in order to do this.
これを行うためには、ユーザは
.Nm CVSup
のサーバホストにログインアカウントが必要です。
.\"O The procedure is as follows:
手順を以下に示します:
.Bl -enum
.It
.\"O Establish a connection to the server host with
.\"O .Nm ssh ,
.\"O like this:
以下のようにして、
.Nm ssh
を使ってサーバホストとの接続を確立します:
.Bd -literal
ssh -f -x -L 5999:localhost:5999 serverhost sleep 60
.Ed
.Pp
.\"O Replace
.\"O .Ar serverhost
.\"O with the hostname of the CVSup server, but type
.\"O .Ql localhost
.\"O literally.
普通は
.Ar serverhost
を CVSup サーバのホスト名に置き換えるのですが、ここでは
.Ql localhost
を入力します。
.\"O This sets up the required port forwarding.
これにより、ポート転送に必要な設定ができます。
.\"O You must start
.\"O .Nm
.\"O before the 60-second
.\"O .Nm sleep
.\"O finishes.
60 秒経って
.Nm sleep
が終わるまでに
.Nm
を起動しなければなりません。
.\"O Once the update has begun,
.\"O .Nm ssh
.\"O will keep the forwarded channels open as long as they are needed.
いったん更新が始まると、
.Nm ssh
は必要な間、転送チャネルをオープンした状態を保ちます。
.It
.\"O Run
.\"O .Nm
.\"O on the local host, including these arguments on the command line:
.\"O .Ql -h localhost -P m .
ローカルホストで
.Nm
を実行します。コマンドラインには以下の行を含めます:
.Ql -h localhost -P m
.El
.\"O .Sh FILES
.Sh ファイル
.Bl -tag -width base/sup/collection/checkouts*xx -compact
.It Pa /usr/local/etc/cvsup
.\"O Default
.\"O .Ar base
.\"O directory.
デフォルトの
.Ar base
ディレクトリ。
.It Pa sup
.\"O Default
.\"O .Ar collDir
.\"O subdirectory.
デフォルトの
.Ar collDir
サブディレクトリ。
.Sm off
.It Xo Ar base / Ar collDir / Ar collection
.Pa /checkouts*
.Xc
.Sm on
.\"O List files.
リストファイル。
.Sm off
.It Ar base / Ar collDir Pa /refuse
.Sm on
.\"O Global refuse file.
グローバルの refuse ファイル。
.Sm off
.It Xo Ar base / Ar collDir / Ar collection
.Pa /refuse*
.Xc
.Sm on
.\"O Per-collection and per-release and tag refuse files.
コレクション別の refuse ファイルと、リリースとタグ別の refuse ファイル。
.It Li $ Ns Ev HOME Ns Pa /.cvsup/auth
.\"O Authentication password file.
認証用のパスワードファイル。
.El
.\"O .Sh SEE ALSO
.Sh 関連項目
.Xr ctm 1 ,
.Xr cvpasswd 1 , 
.Xr cvs 1 ,
.Xr cvsupd 8 ,
.Xr m3socks 1 ,
.Xr rcsintro 1 ,
.\"O .Xr ssh 1 .
.Xr ssh 1
.Pp
.Bd -literal
http://www.polstra.com/projects/freeware/CVSup/
.Ed
.\"O .Sh AUTHORS
.Sh 作者
.\"O .An John Polstra Aq jdp@polstra.com .
.An John Polstra Aq jdp@polstra.com
.\"O .Sh BUGS
.Sh バグ
.\"O An RCS file is not recognized as such unless its name ends with
.\"O .Ql \&,v .
RCS ファイルは
.Ql \&,v
で終わっていなければ RCS ファイルと認識されません。
.Pp
.\"O Any directory named
.\"O .Ql Attic
.\"O is assumed to be a CVS Attic, and is treated specially.
.Ql Attic
という名前のディレクトリは CVS Attic として特別扱いされます。
.Pp
.\"O Because of bugs in the SOCKS library or server, most forms of the
.\"O .Fl P
.\"O option cannot be used with SOCKS.
SOCKS ライブラリまたはサーバのバグのため、大部分の形式の
.Fl P
オプションは SOCKS では使えません。
.\"O Multiplexed mode
.\"O .Pq Fl P Cm m
.\"O can be used, but the other forms of
.\"O .Fl P
.\"O are rejected.
多重モード
.Pq Fl P Cm m
を使えますが、他の形式の
.Fl P
オプションは受け付けられません。
.Pp
.\"O The GUI interacts poorly with some window managers, notably FVWM.
GUI と一部のウィンドウマネージャ(特に FVWM)の相性が良くありません。
.\"O There are problems with both versions 1 and 2 of FVWM,
.\"O though it appears that they are not as bad in version 2.
FVWM のバージョン 1, 2 のどちらでも問題が起こるのですが、バージョン 2
の方がまだましのようです。
.\"O Adding the line
.\"O .Pp
.\"O .Dl Style \&"cvsup\&" ClickToFocus
.\"O .Pp
.\"O to FVWM2's
.\"O .Pa .fvwmrc
.\"O file helps quite a bit.
.Pp
.Dl Style \&"cvsup\&" ClickToFocus
.Pp
という行を FVWM2 の
.Pa .fvwmrc
に追加するとかなりよくなります。
.\"O The problem appears to be caused by window manager bugs, triggered by
.\"O the GUI's use of the
.\"O .Ql WM_TAKE_FOCUS
.\"O protocol.
この問題はどうやらウィンドウマネージャのバグが原因らしく、GUI が
.Ql WM_TAKE_FOCUS
プロトコルを使うと起こるようです。
.\"O As a work-around, you can always use the
.\"O .Fl g
.\"O option to disable the GUI entirely.
回避策としては、
.Fl g
オプションを使って、GUI を完全に無効にするとよいでしょう。

