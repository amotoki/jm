.\"WORD:        mail            メール
.\"WORD:        mailer          メーラ
.\"WORD:        processor       プロセッサ
.\"
.\" Japanese Version Copyright (C)COOL WEB 1998
.\"          ALL RIGHTS RESERVED
.\" Modified Sun Jun 10 13:27:00 JST 2002
.\"         by MATSUDA Yoh-ichi (matsuda@palnet.or.jp)
.\" Modified Sun Jul 18 20:27:00 JST 2004
.\"         by MATSUDA Yoh-ichi (yoh@flcl.org)
.\" Thanks to:
.\"   MIURA Hiroshi <miura@da-cha.org>
.\"   OKANO Takayoshi <kano@na.rim.or.jp>
.\"   HAGA Yasufumi <yasufumi.haga@nifty.com>
.\"if n .pl +(135i-\n(.pu)
.de Id
.ds Rv \\$3
.ds Dt \\$4
..
.Id $Id: procmail.1,v 1.5 2005/03/07 16:09:13 motoki Exp $
.TH PROCMAIL 1 \*(Dt BuGless
.rn SH Sh
.de SH
.br
.ne 11
.Sh "\\$1"
..
.rn SS Ss
.de SS
.br
.ne 10
.Ss "\\$1"
..
.rn TP Tp
.de TP
.br
.ne 9
.Tp \\$1
..
.rn RS Rs
.de RS
.na
.nf
.Rs
..
.rn RE Re
.de RE
.Re
.fi
.ad
..
.de Sx
.PP
.ne \\$1
.RS
..
.de Ex
.RE
.PP
..
.na
.\"O .SH NAME
.SH 名前
.\"O procmail \- autonomous mail processor
procmail \- 自律型メールプロセッサ
.\"O .SH SYNOPSIS
.SH 書式
.B procmail
.RB [ \-ptoY ]
.RB [ "\-f \fIfromwhom\fP" ]
.if n .ti +0.5i
.RI [ "parameter\fB=\fPvalue " | " rcfile" ]
\&.\|.\|.
.br
.B procmail
.RB [ \-toY ]
.RB [ "\-f \fIfromwhom\fP" ]
.\"O RB [ "\-a \fIargument\fP" ]
.RB [ "\-a \fI引数\fP" ]
\&.\|.\|.
.if n .ti +0.5i
.B \-d
.\"O I recipient
.I 受取人
\&.\|.\|.
.br
.B procmail
.RB [ \-ptY ]
.B \-m
.\"O RI [ "parameter\fB=\fPvalue" ]
.RI [ "パラメータ\fB=\fP値" ]
\&.\|.\|.
.I rcfile
.if n .ti +0.5i
.\"O RI [ argument ]
.RI [ 引数 ]
\&.\|.\|.
.br
.B procmail
.B \-v
.ad
.\"O .SH DESCRIPTION
.SH 説明
.\"O For a quick start, see
.\"O B NOTES
.\"O at the end.
.\"O 【訳注: 芳賀さんの案を採用。「章」は省略。】
取り敢えずすぐ始めたい場合は、後の
.B その他
を参照されたい。
.PP
.\"O .B Procmail
.\"O should be invoked automatically over the
.\"O .B .forward
.\"O file mechanism as soon as mail arrives.  Alternatively, when installed by
.\"O a system administrator, it can be invoked from within the mailer immediately.
.\"O 【訳注: 芳賀さんの案を半分採用。should be は曖昧表現だろう。】
.B procmail
は、メールの到着後
.B .forward
ファイルの仕組みを通じてただちに自動起動されるだろう。
あるいは、システム管理者がインストールした場合は、
メーラ内部から直接起動されることもある。
【訳注: 原文は mailer と書かれているが、ここでは MUA ではなく MTA を指しているものと推測する。】

.\"O When invoked, it first sets some environment variables to default values,
.\"O reads the mail message from stdin until an EOF, separates the body from the
.\"O header, and then, if no command line arguments are present, it starts to look
.\"O for a file named
.\"O .BR $HOME/.procmailrc .
.\"O 【訳注: 芳賀さんの案を全面採用。】
procmail は起動すると、まずいくつかの環境変数をデフォルト値に設定する。
それから EOF【訳注: End Of File: ファイルの終端】に行き当たるまで、
標準入力からメールメッセージを読み込み、ヘッダーと本文を分離する。
その後、コマンドラインに引数が指定されていなければ、
.BR $HOME/.procmailrc
という名前のファイルを探し始める。

.\"O According to the processing recipes in this file,
.\"O the mail message that just arrived gets distributed into the right folder
.\"O (and more).  If no rcfile is found, or processing of the rcfile falls off
.\"O the end, procmail will store the mail in the default system
.\"O mailbox.
このファイル内の処理レシピに従って、到着したメールメッセージは適切なフォルダ
(及びその他) に配送される。
もし rcfile が見つからないか、 rcfile の処理が終わったら、 procmail は
メールをシステムのデフォルトのメールボックスに保存する。
.PP
.\"O If no rcfiles and no
.\"O .B \-p
.\"O have been specified on the command line, procmail will, prior to reading $HOME/.procmailrc, interpret commands from
.\"O .B /etc/procmailrc
.\"O (if present).
.\"O Care must be taken when creating /etc/procmailrc, because, if circumstances permit, it will be executed with root privileges (contrary to the $HOME/.procmailrc file of course).
.\"O 【訳注: 芳賀さんの案をほぼ全面採用。】
rcfile が存在せず、さらにコマンドラインに
.B \-p
も指定されていない場合、
.B /etc/procmailrc
ファイルが存在すれば、procmail は $HOME/.procmailrc を読み込む前に、
このファイルに書かれているコマンドを解釈する。
/etc/procmailrc を作成するときは十分に注意を払わなければならない。
なぜなら、状況によっては、このファイルの解釈は root 権限で
実行される場合がありえるからである
(もちろん $HOME/.procmailrc の場合はそのようなことはない)
.PP
.\"O If running suid root or with root privileges, procmail will be able to
.\"O perform as a functionally enhanced, backwards compatible mail delivery agent.
.\"O 【訳注: 芳賀さんの案をほぼ全面採用。】
procmail は、 suid root されているか、或は root 権限で動作している場合、
機能拡張され、下位互換性のあるメール配送エージェントとして動作できるようになる。

.PP
.\"O Procmail can also be used as a general purpose mail filter, i.e., provisions
.\"O have been made to enable procmail to be invoked in a special sendmail rule.
.\"O 【訳注: 芳賀さんの案をほぼ全面採用。】
また、procmail は汎用のメールフィルタとしても使える。
つまり、【訳注: 元々は一般的な目的のメールフィルタだったが、】特別な
sendmail のルールを使用して procmail を実行できるようにする仕組みが
設けられたのである。

.PP
.\"O The rcfile format is described in detail in the
.\"O .BR procmailrc (5)
.\"O man page.

rcfile のフォーマットは
.BR procmailrc (5)
マニュアルページで詳細に解説されている。

.PP
.\"O The weighted scoring technique is described in detail in the
.\"O .BR procmailsc (5)
.\"O man page.

「重み付けを伴う得点加算方法 (weighted scoring technique)」は
.BR procmailsc (5)
マニュアルページで詳細に解説されている。

.PP
.\"O Examples for rcfile recipes can be looked up in the
.\"O .BR procmailex (5)
.\"O man page.

rcfile のレシピの例は
.BR procmailex (5)
マニュアルページを参照されたい。

.\"O .SS Signals
.SS シグナル
.TP 1.2i
.B TERMINATE
.\"O Terminate prematurely and requeue the mail.
直ちに終了し、メールをキューに戻す。

.TP
.B HANGUP
.\"O Terminate prematurely and bounce the mail.
直ちに終了し、メールを送信元へ送り返す。

.TP
.B INTERRUPT
.\"O Terminate prematurely and bounce the mail.
直ちに終了し、メールを送信元へ送り返す。

.TP
.B QUIT
.\"O Terminate prematurely and silently lose the mail.
.\"O 【訳注: 芳賀さんの案を全面採用。】
直ちに終了し、ユーザには何も通知せずにメールを消去する。

.TP
.B ALARM
.\"O Force a timeout (see
.\"O .BR TIMEOUT).
強制的に時間切れで終了させる (
.BR TIMEOUT
を参照されたい)。

.TP
.B USR1
.\"O Equivalent to a
.\"O .BR VERBOSE =off.
.BR VERBOSE =off
と同じ意味。

.TP
.B USR2
.\"O Equivalent to a
.\"O .BR VERBOSE =on.
.BR VERBOSE =on
と同じ意味。

.\"O .SH OPTIONS
.SH オプション

.TP 0.5i
.B \-v
.\"O Procmail will print its version number, display its compile time
.\"O configuration and exit.
バージョン番号とコンパイル時の環境設定を表示して終了する。

.TP
.B \-p
.\"O Preserve any old environment.  Normally procmail clears the environment
.\"O upon startup, except for the value of TZ.  However, in any case: any default values will override
.\"O any preexisting environment variables, i.e., procmail will not pay any attention
.\"O to any predefined environment variables, it will happily overwrite them
.\"O with its own defaults.  For the list of environment variables that procmail
.\"O will preset see the
.\"O .BR procmailrc (5)
.\"O man page.  If both \-p and \-m are specified, the
.\"O list of preset environment variables shrinks to just: LOGNAME, HOME, SHELL,
.\"O ORGMAIL and MAILDIR.
古い環境をすべて保存する。
procmail は通常、起動時に TZ を除くすべての環境変数の値を消去する。
但し、どのような場合においても:
procmail が内包するあらゆるデフォルト値は同一名の既存の環境変数より優先される。
すなわち、 procmail は既に定義されている同名の環境変数には全くお構いなく、
procmail のデフォルト値にてそれらを適切に上書きする。
procmail で予め設定されている環境変数の一覧については、
.BR procmailrc (5)
を参照のこと。
\-p と \-m が両方指定されている場合は、予め設定する環境変数は
LOGNAME、HOME、SHELL、ORGMAIL および MAILDIR だけに限定される。
【訳注: procmail の通常動作は、 TZ 以外の親プロセスの環境変数を全削除すると共に、自身の動作にかかわる環境変数を多数「上書き」設定する。 -p オプションが指定されると、 procmail は自身の動作にかかわる5つの環境変数のみを設定し、それ以外の親プロセスにて設定されている環境変数を削除しない。結果として親プロセスの環境が保持される。】

.TP
.B \-t
.\"O Make procmail fail softly, i.e., if procmail cannot deliver the mail to
.\"O any of the destinations you gave, the mail will not bounce, but will return
.\"O to the mailqueue.  Another delivery-attempt will be made at some time in
.\"O the future.
procmail をフェールソフトにする。
つまり、ユーザが指定したどの配送先にも procmail がメールを配送できない場合、
メールはバウンス
【訳注: 配送エラーメールとしてローカルメールスプールへ送られる。】
せず、メールキューに戻る。
その後しばらくしてから再度配送を試みる。

.TP
.I "\fB\-f\fP fromwhom"
.\"O Causes procmail to regenerate the leading `From ' line with
.\"O .I fromwhom
.\"O as the sender (instead of \-f one could use the alternate and
.\"O obsolete \-r).  If
.\"O .I fromwhom
.\"O consists merely of a single `-', then procmail will only
.\"O update the timestamp on the `From ' line (if present, if not, it will
.\"O generate a new one).
.I fromwhom
を送信者(sender)にして、先頭の `From ' 行を再作成する
(\-f の代わりに、今では使われなくなっているが \-r が使用できる)。
.I fromwhom
が `-' 1個だけの場合、procmail は `From ' 行のタイムスタンプの
更新のみ行う
(これはタイムスタンプが存在する場合である。なければ新たに作成する)。

.TP
.B \-o
.\"O Instead of allowing anyone to generate `From ' lines, simply override
.\"O the fakes.
.\"O 【訳注: このオプションは有効に動作しているように見えない。】
誰にも `From ' 行の生成を許可させないで、単に偽物を上書きする。

.TP
.B \-Y
.\"O Assume traditional Berkeley mailbox format, ignore any
.\"O .B Content-Length:
.\"O fields.
.\"O 【訳注: このオプションの検証方法がわからない。】
従来の Berkeley mailbox フォーマットを想定し、
.B Content-Length:
フィールドはすべて無視する。

.TP
.\"O .I "\fB\-a\fP argument"
.\"O This will set $1 to be equal to
.\"O .IR argument .
.\"O Each succeeding
.\"O .I "\fB\-a\fP argument"
.\"O will set the next number variable ($2, $3, etc).  It can be used
.\"O to pass meta information along to procmail.  This is typically done
.\"O by passing along the $@x information from the sendmail mailer rule.
.I "\fB\-a\fP 引数"
このオプションは、 $1 にコマンドライン引数を設定する。
後続する
.I "\fB\-a\fP 引数"
はそれぞれ次の番号の変数 ($2、$3、他) に設定される。
このオプションで procmail にメタ情報を渡すことができる。
通常、sendmail メーラルールから $@x 情報を渡すことに用いられる。
.\"O 【訳注: $@x とは? ぐぐってもわからない。】

.TP
.I "\fB\-d\fP recipient .\|.\|."
.\"O This turns on explicit delivery mode, delivery will be to the local user
.\"O .IR recipient .
.\"O This, of course, only is possible if procmail has root
.\"O privileges (or if procmail is already running with the recipient's euid and egid).
.\"O Procmail will setuid to the intended recipients and delivers the mail as
.\"O if it were invoked by the recipient with no arguments (i.e., if no rcfile
.\"O is found, delivery is like ordinary mail).  This option is incompatible with
.\"O .BR \-p .
これは明示的な配送モードを有効にする。
配送はローカルユーザ
.IR recipient
へ行われる。
もちろん、これは procmail が root 権限を備える場合 (或は procmail が受取人の euid 及び egid で動作している場合) にのみ可能である。
procmail は指定された受取人に setuid され、
受取人により引数のない状態で起動されたかのようにメールを配送する。
(すなわち、 rcfile が見つからない場合、配送は通常のメールのように
行われる)。
このオプションは
.BR \-p
とは互換性がない。

.TP
.B \-m
.\"O Turns procmail into a general purpose mail filter.  In this mode one rcfile
.\"O must be specified on the command line.  After the rcfile, procmail will
.\"O accept an unlimited number of arguments.
.\"O If the rcfile is an absolute path starting with
.\"O .B /etc/procmailrcs/
.\"O without backward references (i.e. the parent directory cannot be mentioned) procmail will, only if no security violations are found, take on the identity of the owner of the rcfile (or symbolic link).
procmail を汎用のメールフィルタにする。
このモードでは rcfile をコマンドラインで一つ指定しなければならない。
rcfile に後続する引数に制限はない。
rcfile が後方参照のない
.B /etc/procmailrcs/
で始まる絶対パスである (すなわち、親ディレクトリが指定できない) 場合、
セキュリティの侵害がない場合のみ procmailは rcfile (またはシンボリックリンク)
の所有者のユーザ属性になる。

.\"O For some advanced usage of this option you should look in the
.\"O .B EXAMPLES
.\"O section below..SH ARGUMENTS
このオプションのより詳細な使用法は下記の
.B 例
を参照されたい。

.\"O Any arguments containing an '=' are considered to be environment variable
.\"O assignments, they will
.\"O .I all
.\"O be evaluated after the default values have been
.\"O assigned and before the first rcfile is opened.
引数に `=' が入っている場合は、すべて環境変数への値の割り当てと見なす。
この割り当ては、全てデフォルト値が割り当てられてから評価され、
その後に最初の rcfile がオープンされる。

.\"O .PP
.\"O Any other arguments are presumed to be rcfile paths (either absolute,
.\"O or if they start with `./' relative to the current
.\"O directory;
.\"O .B any other relative
.\"O path is relative to $HOME, unless the
.\"O .B \-m
.\"O option has been given, in which case all relative paths are relative to the
.\"O current directory); procmail will start with the first one it finds on the
.\"O command line.  The following ones will only be parsed if the preceding ones
.\"O have a not matching HOST-directive entry, or in case they should not exist.
.PP
その他の引数はすべて rcfile のパスと見なされる。
(このパスは絶対パスか、または `./' で始まっていれば
現在のディレクトリからの相対パスのいずれかである。
.B その他のすべての相対
パスは、
.B \-m
オプションを使用しない限り $HOME からの相対パスである。
.B \-m
オプションを使用した場合、すべての相対パスは現在のディレクトリからの
相対パスとなる。)
そして procmail は、コマンドラインで最初に見つかった rcfile を使用して
起動する。
先行する引数に指定されている rcfile に合致する HOST 指示
【訳注: matching HOST-directive entry】 を有しない場合、または引数が
存在しない場合にのみ、コマンドライン上にて次に指定されている rcfile が
一つだけ解析される。
.\"O 【訳注: この文章の意味が不明。合致する HOST ディレクティブエントリ? 】

.PP
.\"O If no rcfiles are specified, it looks for
.\"O .BR $HOME/.procmailrc .
.\"O If not even that can be found, processing will continue according to
.\"O the default settings of the environment variables and the ones specified
.\"O on the command line.
rcfile を何も指定しない場合は
.BR $HOME/.procmailrc
を検索する。
rcfile が見つからなくても、環境変数のデフォルト設定と
コマンドラインで指定された値に従って処理を続行する。

.\"O .SH EXAMPLES
.\"O Examples for rcfile recipes can be looked up in the
.\"O .BR procmailex (5)
.\"O man page.
.\"O A small sample rcfile can be found in the
.\"O B NOTES
.\"O section below.
.SH 例
rcfile のレシピの例は
.BR procmailex (5)
のマニュアルページを参照されたい。
rcfile のちょっとしたサンプルは、後述する
.B その他
にを参照のこと。

.PP
.\"O Skip the rest of this EXAMPLES section unless you are a system administrator
.\"O who is vaguely familiar with sendmail.cf syntax.
sendmail.cf の文法を多少なりとも知っているシステム管理者以外は、
これ以降の「例」は読み飛ばして頂きたい。
.PP
.\"O The
.\"O .B \-m
.\"O option is typically used when procmail is called from within a rule in the
.\"O sendmail.cf file.  In order to be able to do this it is convenient to create
.\"O an extra `procmail' mailer in your sendmail.cf file (in addition to the perhaps
.\"O already present `local' mailer that starts up procmail).  To create such a
.\"O `procmail' mailer I'd suggest something like:
.B \-m
オプションは、sendmail.cf ファイルのルールから procmail を呼び出す際に
使われるのが一般的である。このようにするには、自分の sendmail.cf ファイルに、
(procmail を立ち上げる `local' メーラはおそらく既に存在するだろうが、
それに加えて)  `procmail' メーラを別途追加すると都合が良い。
このような `procmail' メーラを作成するには、次のようにすればいいだろう:
.Sx 2
Mprocmail, P=/usr/bin/procmail, F=mSDFMhun, S=11, R=21,
        A=procmail \-m $h $g $u
.Ex
.\"O This enables you to use rules like the following (most likely in ruleset 0)
.\"O to filter mail through the procmail mailer (please note the leading tab
.\"O to continue the rule, and the tab to separate the comments):
こうすれば、 (大抵の場合 ruleset 0 にある) 以下のようなルールを使用して、
メールを procmail メーラを通じてフィルタできる。
(ただし、ルールを継続して記述するために行頭にタブがあることと、
コメントを分離するためにタブがあることに注意。)

.Sx 4
R$*<@some.where>$*
        $#procmail $@/etc/procmailrcs/some.rc $:$1@some.where.procmail$2
R$*<@$*.procmail>$*
        $1<@$2>$3       Already filtered, map back
.Ex
.\"O And /etc/procmailrcs/some.rc could be as simple as:
そして /etc/procmailrcs/some.rc は次のように簡単になる:
.Sx 9
.\"O SENDER = "<$1>"                 # fix for empty sender addresses
.\"O SHIFT = 1                       # remove it from $@
SENDER = "<$1>"                 # 空の送信者アドレスを修正
SHIFT = 1                       # $@ から除去

.\"O :0                              # sink all junk mail
:0                              # 全てのゴミメールを放り込む
* ^Subject:.*junk
/dev/null

.\"O :0 w                            # pass along all other mail
:0 w                            # それ以外の全てのメールを通過させる
! \-oi \-f "$SENDER" "$@"
.Ex
.\"O Do watch out when sending mail from within the /etc/procmailrcs/some.rc file,
.\"O if you send mail to addresses which match the first rule again, you could
.\"O be creating an endless mail loop.
/etc/procmailrcs/some.rc ファイルの中からメールを送信するときには
特に注意されたい。
最初のルールに合致するアドレスにメールを再度送信すると、メールの
無限ループを引き起こすことになる。
.\"O .SH FILES
.SH ファイル
.TP 2.3i
.B /etc/passwd
.\"O to set the recipient's LOGNAME, HOME and SHELL variable defaults
受取人の LOGNAME, HOME, SHELL の各変数のデフォルトを設定する。
.TP
.B /var/mail/$LOGNAME
.\"O system mailbox; both the system mailbox and the immediate directory
.\"O it is in will be created every time procmail starts and either one is
.\"O not present
システムメールボックス;
システムメールボックスとそれを格納するすぐ上のディレクトリが存在しなければ、
両方とも procmail が起動する度毎に作成される。
.TP
.B /etc/procmailrc
.\"O initial global rcfile
初期のグローバル rcfile
.TP
.B /etc/procmailrcs/
.\"O special privileges path for rcfiles
rcfile に特権を与えるパス
.TP
.B $HOME/.procmailrc
.\"O default rcfile
デフォルトの rcfile
.TP
.B /var/mail/$LOGNAME.lock
.\"O lockfile for the system mailbox (not automatically used by procmail, unless
.\"O $DEFAULT equals /var/mail/$LOGNAME and procmail is delivering to $DEFAULT)
システムメールボックスのlockfile
(procmail が自動的に使用することはない。
但し、変数 $DEFAULT が /var/mail/$LOGNAME と等しく、且つ procmail が
$DEFAULT へ配送する場合を除く。)
.TP
.B /usr/sbin/sendmail
.\"O default mail forwarder
デフォルトのメール転送ソフト
.TP
.B _????`hostname`
.\"O temporary `unique' zero-length files created by procmail
procmail が一時的に作成する、大きさが 0 バイトで `ファイル名が重複しない'
ファイル
.\"O .SH "SEE ALSO"
.SH "関連項目"
.na
.nh
.BR procmailrc (5),
.BR procmailsc (5),
.BR procmailex (5),
.BR sh (1),
.BR csh (1),
.BR mail (1),
.BR mailx (1),
.BR binmail (1),
.BR uucp (1),
.BR aliases (5),
.BR sendmail (8),
.BR egrep (1),
.BR grep (1),
.BR biff (1),
.BR comsat (8),
.BR lockfile (1),
.BR formail (1),
.BR cron (1)
.hy
.ad
.\"O .SH DIAGNOSTICS
.SH 診断【訳注: エラーメッセージ一覧】
.TP 2.3i
.\"O Autoforwarding mailbox found
.\"O The system mailbox had its suid or sgid bit set, procmail terminates with
.\"O EX_NOUSER assuming that this mailbox must not be delivered to.
Autoforwarding mailbox found (自動転送メールボックスが見つかった)
システムメールボックスに suid または sgid ビットがセットされている場合、
procmail は当該メールボックスへ配送してはいけないことを示すべく、 EX_NOUSER で
終了する。
.TP
.\"O Bad substitution of "x"
.\"O Not a valid environment variable name specified.
Bad substitution of "x" ("x" の不正な置換)
有効な環境変数名が指定されていない。
.TP
.\"O Closing brace unexpected
.\"O There was no corresponding opening brace (nesting block).
Closing brace unexpected (閉じ括弧が検出されない)
開き括弧に対応する閉じ括弧がない(ブロックがネストしている)。
.TP
.\"O Conflicting options
.\"O Not all option combinations are useful
Conflicting options (オプションが矛盾する)
有効な組み合わせになっていないオプションがある。
.TP
.\"O Conflicting x suppressed
.\"O Flag x is not compatible with some other flag on this recipe.
Conflicting x suppressed (矛盾する x は削除された)
フラグ x は当該レシピの他のフラグと併存できない。
.TP
.\"O Couldn't create "x"
.\"O The system mailbox was missing and could not/will not be created.
Couldn't create "x" ("x" を作成できない)
システムメールボックスが見つからず、作成できない。または作成されない。
.TP
.\"O Couldn't create maildir part "x"
.\"O The maildir folder "x" is missing one or more required subdirectories and
.\"O procmail could not create them.
Couldn't create maildir part "x" (maildir "x" を作成できない)
maildir フォルダ "x" の作成に必要な1つまたは複数のサブディレクトリが
なく、また procmail はそのサブディレクトリを作成できない。
.TP
.\"O Couldn't create or rename temp file "x"
.\"O An error occurred in the mechanics of  delivering to the directory folder "x".
Couldn't create or rename temp file "x" (一時ファイル "x" の作成または名前変更ができない)
ディレクトリフォルダ "x" への配送の仕組みにエラーが発生した。
.TP
.\"O Couldn't determine implicit lockfile from "x"
.\"O There were no `>>' redirectors to be found, using simply `$LOCKEXT' as
.\"O locallockfile.
Couldn't determine implicit lockfile from "x" ("x" から暗黙の lockfile が決定できない)
リダイレクタ `>>' がないので、単純に `$LOCKEXT' をローカルロックファイルのファイル名として使用する。
.\"O 【訳注: 多分こういう意味ではないかと思う。ただ、これではエラーメッセージと意味が食い違う。検証する必要あり?】
.TP
.\"O Couldn't read "x"
.\"O Procmail was unable to open an rcfile or it was not a regular file, or
.\"O procmail couldn't open an MH directory to find the highest numbered file.
Couldn't read "x" ("x" が読めない)
procmail が rcfile を開くことができなかったか、 rcfile が通常のファイルでなかったか、
或は procmail が最大番号のファイル名のファイルを探そうとしても MH ディレクトリを開くことができなかった。
.TP
.\"O Couldn't unlock "x"
.\"O Lockfile was already gone, or write permission to the directory where the
.\"O lockfile is has been denied.
Couldn't unlock "x" ("x" のロックが解除できない)
ロックファイルが既に消滅しているか、またはロックファイルがあるディレクトリの書き込み
権限がない。
.TP
.\"O Deadlock attempted on "x"
.\"O The locallockfile specified on this recipe is equal to a still active
.\"O $LOCKFILE.
Deadlock attempted on "x" ("x" のデッドロック未遂)
当該レシピで指定されているローカルロックファイルは、
まだ有効に機能し続けている $LOCKFILE と同じである。
.TP
.\"O Denying special privileges for "x"
.\"O Procmail will not take on the identity that comes with the rcfile because
.\"O a security violation was found (e.g. 
.\"O .B \-p
.\"O or variable assignments on the command line) or procmail had insufficient privileges to do so.
Denying special privileges for "x" ("x" への特別な権限を拒否)
セキュリティ侵害が見つかった
(例: 
.B \-p 
オプションまたはコマンドラインの変数割り当て)か、 procmail が不十分な権限しか持っていないので、 procmail は rcfile に付随する識別情報【訳注: ユーザ ID 及びグループ ID】にならない。
【訳注: rcfile のユーザ ID とグループ ID に setuid / setgid しない。 setuid / setgid に関するセキュリティ上の問題に対応するエラーメッセージ。】
.TP
.\"O Descriptor "x" was not open
.\"O As procmail was started, stdin, stdout or stderr was not connected (possibly
.\"O an attempt to subvert security)
Descriptor "x" was not open (ファイル記述子 "x" を開けられなかった)
procmail は起動したが、 stdin, stdout または stderr と接続されなかった。
(おそらくセキュリティが破壊されそうになったためであろう。)
.TP
.\"O Enforcing stricter permissions on "x"
.\"O The system mailbox of the recipient was found to be unsecured, procmail
.\"O secured it.
Enforcing stricter permissions on "x" ("x" のパーミッションをより厳しくする)
受取人のシステムメールボックスが安全でないことがわかったので、
安全性を向上させた。
.\"O Special thanks to: ももくりさめ
.TP
.\"O Error while writing to "x"
.\"O Nonexistent subdirectory, no write permission, pipe died or disk full.
Error while writing to "x" ("x" へ書き込みをする際にエラーが発生した)
サブディレクトリが存在しないか、書き込み許可がないか、パイプが壊れてしまったか、
またはディスクが一杯である。
.TP
.\"O Exceeded LINEBUF
.\"O Buffer overflow detected, LINEBUF was too small, PROCMAIL_OVERFLOW has
.\"O been set.
Exceeded LINEBUF (LINEBUF 超過)
バッファオーバーフローが検出された。LINEBUF が小さすぎる。
PROCMAIL_OVERFLOW が設定された。
.TP
.\"O MAILDIR is not an absolute path
MAILDIR is not an absolute path (MAILDIR が絶対パスでない。)
.TP
.\"O MAILDIR path too long
MAILDIR path too long (MAILDIR パスが長すぎる。)
.TP
.\"O ORGMAIL is not an absolute path
ORGMAIL is not an absolute path (ORGMAIL が絶対パスでない。)
.TP
.\"O ORGMAIL path too long
ORGMAIL path too long (ORGMAIL パスが長すぎる。)
.TP
.\"O default rcfile is not an absolute path
default rcfile is not an absolute path (デフォルトの rcfile が絶対パスでない。)
.TP
.\"O default rcfile path too long
.\"O The specified item's full path, when expanded, was longer than LINEBUF
.\"O or didn't start with a file separator.
default rcfile path too long (デフォルトの rcfile へのパスが長すぎる。)
指定された項目のフルパスは、展開すると LINEBUF よりも長かったか、或は
そのフルパスの先頭がファイルセパレータではなかった。
.TP
.\"O Excessive output quenched from "x"
.\"O The program or filter "x" tried to produce too much output for the current
.\"O LINEBUF, the rest was discarded and PROCMAIL_OVERFLOW has been set.
Excessive output quenched from "x" ("x" からの過剰な出力が抑止された)
プログラムまたはフィルタ "x" の出力が procmail の LINEBUF のサイズを越えたので、
溢れた残りの分は破棄され、 PROCMAIL_OVERFLOW がセットされた。
.TP
.\"O Extraneous x ignored
.\"O The action line or other flags on this recipe makes flag x meaningless.
Extraneous x ignored (無関係な x は無視された)
このレシピで使用しているアクション行、または他のフラグがあるので、
フラグ x は無意味になる。
.TP
.\"O Failed forking "x"
.\"O Process table is full (and NORESRETRY has been exhausted).
Failed forking "x" ( "x" の fork に失敗した)
プロセステーブルが一杯である (と共に NORESRETRY が使い尽くされた)。
.TP
.\"O Failed to execute "x"
.\"O Program not in path, or not executable.
Failed to execute "x" ("x" の実行に失敗した)
プログラムがパスにないか、実行可能ではない。
.TP
.\"O Forced unlock denied on "x"
.\"O No write permission in the directory where
.\"O .B lockfile
.\"O "x" resides, or more than one procmail trying to force a lock at exactly the
.\"O same time.
Forced unlock denied on "x" ("x" へのアンロックの強行に失敗した)
.B ロックファイル 
"x" が存在するディレクトリに書き込み許可がないか、または複数の
procmail が全く同時にロックを強行しようとしている。
.TP
.\"O Forcing lock on "x"
.\"O .B Lockfile
.\"O "x" is going to be removed by force because of a timeout (see also:
.\"O .BR LOCKTIMEOUT ).
Forcing lock on "x" ("x" のロックを強行する)
タイムアウトしたため、
.B ロックファイル
"x" は強制的に削除される。(
.BR LOCKTIMEOUT
も合わせて参照されたい)
.TP
.\"O Incomplete recipe
.\"O The start of a recipe was found, but it stranded in an EOF.
Incomplete recipe (不完全なレシピ)
レシピの開始は見つかったが、レシピの終了が見つからないまま EOF で行き詰まってしまった。
.TP
.\"O Insufficient privileges
.\"O Procmail either needs root privileges, or must have the
.\"O right (e)uid
.\"O .B and
.\"O (e)gid to run in delivery mode.  The mail will bounce.
Insufficient privileges (不十分な権限)
procmail が配送モードで動作するには、procmail に root 権限が
必要であるか、 procmail の (e)uid
.B および
(e)gid が正しいものでなければならない。メールはバウンスする。
.TP
.\"O Invalid regexp "x"
.\"O The regular expression "x" contains errors (most likely some missing or
.\"O extraneous parens).
Invalid regexp "x" (無効な正規表現 "x")
正規表現 "x" にはエラーがある (多くの場合、括弧が不足していたり余計だったりする)。
.TP
.\"O Kernel-lock failed
.\"O While trying to use the kernel-supported locking calls, one of them failed
.\"O (usually indicates an OS error), procmail ignores this error and proceeds.
Kernel-lock failed (カーネルロックが失敗した)
カーネルがサポートするロック機能を試みている間に、
それら機能呼び出しのうちの1つが失敗した (通常 OS エラーを示す)。
procmail はこのエラーを無視し、処理を続行する。
.TP
.\"O Kernel-unlock failed
.\"O See above.
Kernel-unlock failed (カーネルアンロックが失敗した)
上記説明を参照。
.TP
.\"O Lock failure on "x"
.\"O Can only occur if you specify some real weird (and illegal) lockfilenames
.\"O or if the
.\"O .B lockfile
.\"O could not be created because of insufficient permissions or nonexistent
.\"O subdirectories.
Lock failure on "x" ("x" のロック失敗)
このエラーは、適切でない (そして不正な) ロックファイル名を指定しているか、
または権限が不足していたり存在しないサブディレクトリを指定したために
.B ロックファイル
が作成できなかった場合にのみ生じる。
.TP
.\"O Lost "x"
.\"O Procmail tried to clone itself but could not find back rcfile "x" (it either
.\"O got removed or it was a relative path and you changed directory since
.\"O procmail opened it last time).
Lost "x" ("x" が消失した)
procmail は自身のクローンを作ろうとしたが、 rcfile "x" が
見つからなかった (その rcfile が削除されたか、或は rcfile が相対パスで指定されていて、
前回 procmail がその rcfile を開いてからディレクトリを変更したかのいずれかである)。
.TP
.\"O Missing action
.\"O The current recipe was found to be incomplete.
Missing action (動作の不足)
現在のレシピが不完全であることがわかった。
.TP
.\"O Missing closing brace
.\"O A nesting block was started, but never finished.
Missing closing brace (閉じ括弧不足)
ネストしているブロックの開始はあるが終了が無い。
.TP
.\"O Missing name
.\"O The \-f option needs an extra argument.
Missing name (名前の不足)
\-f オプションには特別な引数が必要である。
.TP
.\"O Missing argument
.\"O You specified the \-a option but forgot the argument.
Missing argument (引数の不足)
\-a オプションが指定されたが、引数が忘れられている。
.TP
.\"O Missing rcfile
.\"O You specified the \-m option, procmail expects the name of an
.\"O rcfile as argument.
Missing rcfile (rcfile がない)
\-m オプションが指定されているが、 \-m オプションは引数として
rcfile 名が必要である。
.TP
.\"O Missing recipient
.\"O You specified the \-d option or called procmail under a different
.\"O name, it expects one or more recipients as arguments.
Missing recipient (受取人がない)
\-d オプションを指定したか、または別の名前で procmail が呼び出された。
その際、引数として 1つ以上の受取人が必要である。
.TP
.\"O No space left to finish writing "x"
.\"O The filesystem containing "x" does not have enough free space to permit
.\"O delivery of the message to the file.
No space left to finish writing "x" ("x" の書き込みを終了させるだけの容量がない)
"x" を含むファイルシステムに、配送メッセージをファイルに書き込むだけの十分な空き容量がない。
.TP
.\"O Out of memory
.\"O The system is out of swap space (and NORESRETRY has been exhausted).
Out of memory (メモリ不足)
システムにスワップスペースが不足している (そして NORESRETRY が使い尽くされた)。
.TP
.\"O Processing continued
.\"O The unrecognised options on the command line are ignored, proceeding as
.\"O usual.
Processing continued (処理が続行されている)
コマンドラインで認識されないオプションは無視され、そのまま処理を続行する。
.TP
.\"O Program failure (nnn) of "x"
.\"O Program that was started by procmail returned nnn instead of
.\"O EXIT_SUCCESS (=0);
.\"O if nnn is negative, then this is the signal the program died on.
Program failure (nnn) of "x" (プログラム "x" が失敗した (nnn))
procmail から起動されたプログラムが、EXIT_SUCCESS (=0) ではなく
nnn を返した;
nnn が負なら、そのプログラムが死んだことを示すシグナルである。
.TP
.\"O Quota exceeded while writing "x"
.\"O The filesize quota for the recipient on the filesystem containing "x"
.\"O does not permit delivering the message to the file.
Quota exceeded while writing "x" ("x" の書き込み中にディスクの割当量を超過した)
"x" を含むそのファイルシステムにおける、受取人に対するファイルサイズの制限の為に、
メッセージをファイルへ配送することが許されない。
.TP
.\"O Renaming bogus "x" into "x"
.\"O The system mailbox of the recipient was found to be bogus, procmail performed
.\"O evasive actions.
Renaming bogus "x" into "x" (間違っている名前 "x" を "x" に変更する)
受取人のシステムメールボックスが誤りだったので、
procmail は回避動作を行った。
.TP
.\"O Rescue of unfiltered data succeeded/failed
.\"O A filter returned unsuccessfully, procmail tried to get back the original text.
Rescue of unfiltered data succeeded/failed (フィルタされていないデータの救出に
成功した / 失敗した)
【訳注: procmail から起動した】フィルタの実行に失敗したので、procmail はメールをフィルタに渡す以前のテキストに戻そうとした。
.TP
.\"O Skipped: "x"
.\"O Couldn't do anything with "x" in the rcfile (syntax error), ignoring it.
Skipped: "x" ("x" はスキップされた)
rcfile の "x" については (文法エラーに因り) 何も行われず無視された。
.TP
.\"O Suspicious rcfile "x"
.\"O The owner of the rcfile was not the recipient or root, the file was
.\"O world writable, or the directory that contained it was world writable,
.\"O or this was the default rcfile ($HOME/.procmailrc) and either it was group
.\"O writable or the directory that contained it was group writable (the
.\"O rcfile was not used).
Suspicious rcfile "x" (rcfile "x" は疑わしい)
rcfile の所有者が受取人もしくは root のいずれでもないか、
rcfile 自体またはこれが存在するディレクトリが誰でも書き込み可能になっているか、
この rcfile がデフォルトの rcfile ($HOME/.procmailrc) である場合はそのファイル自体または
ファイルを含むディレクトリがグループ書き込み可能である【訳注: group writable】かのいずれかであった。
(したがって rcfile は使われなかった)
.TP
.\"O Terminating prematurely whilst waiting for .\|.\|.
.\"O Procmail received a signal while it was waiting for .\|.\|.
Terminating prematurely whilst waiting for .\|.\|. (.\|.\|. を待っている間の中途終了)
procmail は .\|.\| を待っている間にシグナルを受信した。
.TP
.\"O Timeout, terminating "x"
.\"O Timeout has occurred on program or filter "x".
Timeout, terminating "x" (時間切れ: "x" の終了)
プログラムまたはフィルタ "x" は実行中に時間切れとなった。
.TP
.\"O Timeout, was waiting for "x"
.\"O Timeout has occurred on program, filter or file "x".  If it was a program or
.\"O filter, then it didn't seem to be running anymore.
Timeout, was waiting for "x" ("x" を待っていたが時間切れになった)
プログラム或はフィルタの実行中、またはファイル "x" の処理中に時間切れとなった。
"x" がプログラムまたはフィルタの場合、もはや動作していないように見えた。
.TP
.\"O Truncated file to former size
.\"O The file could not be delivered to successfully, so the file was truncated
.\"O to its former size.
Truncated file to former size (ファイルを元のサイズに切り詰めた)
ファイルの配送が成功しなかったので、そのファイルは元のサイズに切り詰められた。
.TP
.\"O Truncating "x" and retrying lock
.\"O "x" does not seem to be a valid filename or the file is not empty.
Truncating "x" and retrying lock ("x" の切り詰めとロックの再試行)
"x" は有効なファイル名ではないか。またはファイルが空ではない。
.TP
.\"O Unable to treat as directory "x"
.\"O Either the suffix on "x" would indicate that it should be an MH or
.\"O maildir folder, or it was listed as an second folder into which to link,
.\"O but it already exists and is not a directory.
Unable to treat as directory "x" ("x" をディレクトリとして扱えない)
"x" の末尾が MH または maildir フォルダであることを示しているか、
或はそれらのいずれかへリンクされている二番目のフォルダとして記述されていたが、
"x" は既に存在していて、且つディレクトリではない。
【訳注: メールボックス名の末尾が "/" で終る場合は maildir として、 "/." で終る場合は MH として扱われる。詳細は procmailrc (5) を参照。】
.TP
.\"O Unexpected EOL
.\"O Missing closing quote, or trying to escape EOF.
Unexpected EOL (予期しない EOL)
引用符を閉じ忘れているか、 EOF の回避をし忘れている。
【訳注: 原文及びソース中のエラーメッセージには EOL (End Of Line: 行末) と書かれているが、ソースを参酌すると EOF (End Of File: ファイル終端) の間違いと推測する。】
.\"O 【訳注: 「EOF を回避し忘れる」というのがどういうことを意味しているのか、ソースを見てもわからない。】
.TP
.\"O Unknown user "x"
.\"O The specified recipient does not have a corresponding uid.
Unknown user "x" (未知のユーザ "x")
指定された受取人に対応する uid がない。
.\"O .SH "EXTENDED DIAGNOSTICS"
.\"O Extended diagnostics can be turned on and off through setting the
.\"O VERBOSE variable.
.SH "拡張診断"
VERBOSE 変数に値を設定すると、拡張診断機能を有効/無効にできる。
.TP 2.3i
[pid] time & date
.\"O Procmail's pid and a timestamp.  Generated whenever procmail logs a
.\"O diagnostic and at least a second has elapsed since the last timestamp.
procmail の pid とタイムスタンプである。
procmail が診断をログ記録する時にはいつでも生成され、
少なくとも最後のタイムスタンプから1秒は経過している。
.TP
.\"O Acquiring kernel-lock
.\"O Procmail now tries to kernel-lock the most recently opened file (descriptor).
Acquiring kernel-lock (カーネルロックの獲得)
procmail は、直前に開いたファイル (記述子) をカーネルロックしようとしている。
.TP
.\"O Assigning "x"
.\"O Environment variable assignment.
Assigning "x" ("x" の割り当て)
環境変数割り当て。
.TP
.\"O Assuming identity of the recipient, VERBOSE=off
.\"O Dropping all privileges (if any), implicitly turns off extended diagnostics.
Assuming identity of the recipient, VERBOSE=off (受取人のユーザ属性を想定する。VERBOSE=off)
特権があればそれらをすべて破棄し、拡張診断機能を自動的に無効にする。
.TP
.\"O Bypassed locking "x"
.\"O The mail spool directory was not accessible to procmail, it relied solely
.\"O on kernel locks.
Bypassed locking "x" ("x" のロック回避)
procmail はメールスプールディレクトリへアクセスできなかったので、カーネルのロック機能しかあてにならなかった。
.TP
.\"O Executing "x"
.\"O Starting program "x".  If it is started by procmail directly (without an
.\"O intermediate shell), procmail will show where it separated the arguments
.\"O by inserting commas.
Executing "x" ("x" の実行)
プログラム "x" を起動する。
シェルを介在させずに procmail から直接 "x" を起動する場合、
procmail は引数と引数の間にカンマを挿入して引数の区切りを示す。
.TP
.\"O HOST mismatched "x"
.\"O This host was called "x", HOST contained something else.
HOST mismatched "x" (このホストのホスト名は "x" と一致しない)
このホストのホスト名を "x" と認識した。 HOST には何か余計なものが含まれていた。
【訳注: ホスト名の検証結果に関するメッセージ。】
.TP
.\"O Locking "x"
.\"O Creating lockfile "x".
Locking "x" ("x" をロックする)
ロックファイル "x" を作成する。
.TP
.\"O Linking to "x"
.\"O Creating a hardlink between directory folders.
Linking to "x" ("x" にリンクする)
ディレクトリフォルダ間にハードリンクを作成する。
.TP
.\"O Match on "x"
.\"O Condition matched.
Match on "x" ("x" で一致する)
条件が一致した。
.TP
.\"O Matched "x"
.\"O Assigned "x" to
.\"O .BR MATCH .
Matched "x" (一致した "x")
"x" が
.BR MATCH
に 割り当てられた。
.TP
.\"O No match on "x"
.\"O Condition didn't match, recipe skipped.
No match on "x" ("x" には何も一致しない)
条件が一致せず、レシピは読み飛ばされた。
.TP
.\"O Non-zero exitcode (nnn) by "x"
.\"O Program that was started by procmail as a condition or as the action of
.\"O a recipe with the `W' flag returned nnn instead of
.\"O EXIT_SUCCESS (=0); the usage indicates that this is not an
.\"O entirely unexpected condition.
Non-zero exitcode (nnn) by "x" ("x" は 0 以外の終了コード (nnn) で終了した)
レシピの条件文として、或は `W' フラグのを用いるアクション行として procmail から起動されたプログラムは、 EXIT_SUCCESS (=0) ではない終了コード nnn を返して終了した。
この使い方は全く予期しない状態ではないことを示す。
【訳注: すなわち、プログラムの終了コードを条件分岐に用いるレシピにおいては、このメッセージが出ても必ずしも何らかの異常を示すものではない。】
.TP
.\"O Notified comsat: "$LOGNAME@offset:file"
.\"O Sent comsat/biff a notice that mail arrived for user $LOGNAME at `offset'
.\"O in `file'.
Notified comsat: "$LOGNAME@offset:file" (comsat の通知: "$LOGNAME@offset:file")
`file' の `offset' の位置に、ユーザ $LOGNAME 宛てのメールが
到着したと、comsat/biff へ通知した。
【訳注: biff はメールの到着を通知するユーティリティ。 comsat は biff サーバ。各々 biff.1 及び comsat.1 を参照。】
.TP
.\"O Opening "x"
.\"O Opening file "x" for appending.
Opening "x" ("x" を開いている)
Opening "x" ("x" のオープン)
追加のためにファイル "x" を開く。
【訳注: append mode: 追加モード】
.TP
.\"O Rcfile: "x"
.\"O Rcfile changed to "x".
Rcfile: "x"
rcfile は "x" に変更された。
.TP
.\"O Reiterating kernel-lock
.\"O While attempting several locking methods, one of these failed.  Procmail will
.\"O reiterate until they all succeed in rapid succession.
Reiterating kernel-lock (カーネルロックの繰り返し)
いくつかのロック方式を試行している最中に、そのうちの一つが失敗した。
その試行のすべてが間をおかず連続して成功するまで、
procmail はカーネルロックを繰り返す。
.TP
.\"O Score: added newtotal "x"
.\"O This condition scored `added' points, which resulted in a `newtotal' score.
Score: added newtotal "x" (スコア: 追加の結果、新しい合計値は "x" となった)
この条件によってスコアに点が追加された。
スコアは `新しい合計値' になった。
.TP
.\"O Unlocking "x"
.\"O Removing lockfile "x" again.
Unlocking "x" ("x" のロック解除)
ロックファイル "x" を再び削除する。
.\"O .SH WARNINGS
.\"O You should create a shell script that uses
.\"O .BR lockfile (1)
.\"O before invoking your mail shell on any mailbox file other than the system
.\"O mailbox (unless of course, your mail shell uses the same lockfiles (local
.\"O or global) you specified in your rcfile).
.SH 警告
システムメールボックス以外の任意のメールボックスに対して自分のメールシェルを起動する場合は、その前に
.BR lockfile (1)
を使用するシェルスクリプトを作成すること。
(もちろん、自分のメールシェルが (ローカルであるかグローバルであるかにかかわらず) rcfile で指定したロックファイルと同じものを使用している場合は別である。)
.PP
.\"O In the unlikely event that you absolutely need to kill procmail before it has
.\"O finished, first try and use the regular kill command (i.e.,
.\"O .I not
.\"O kill \-9, see the subsection
.\"O .I Signals
.\"O for suggestions), otherwise some
.\"O .I lockfiles
.\"O might not get removed.
万が一 procmail を自身の正常終了前に絶対 kill しなければならない場合は、
まず最初に通常の kill コマンドを試してみること。
(つまり kill \-9
.I ではない
。終了コードについては
.I シグナル
を参照のこと)
さもないと、
.I ロックファイル
がいくつか削除されない場合がある。
.PP
.\"O Beware when using the
.\"O .B \-t
.\"O option, if procmail repeatedly is unable to deliver the mail (e.g., due to
.\"O an incorrect rcfile), the system mailqueue could fill up.  This could
.\"O aggravate both the local postmaster and other users.
.B \-t
オプションは注意して使用すること。
(例えば rcfile に誤りがあるために)
procmail が何度もメールの配送失敗を繰り返すと、システムのメールキューが
溢れる可能性がある。
こうなると、ローカルの postmaster と他のユーザの両方に迷惑をかけるだろう。
.PP
.\"O The
.\"O .B /etc/procmailrc
.\"O file might be executed with root privileges, so be very careful of what you .\"O put in it.
.B /etc/procmailrc
ファイルは root 権限で実行される場合があるので、
このファイルに書き込む内容には十分に注意すること。
.\"O .B SHELL
.\"O will be equal to that of the current recipient, so if procmail has to invoke the shell, you'd better set it to some safe value first.
.\"O See also\h'-\w' 'u' :
.\"O .BR DROPPRIVS .
.B SHELL
は現在の受取人のシェルと同じになるため、 procmail でシェルを起動する
必要がある場合は、最初にこの変数を何らかの無難な値に設定しておくとよい。
.BR DROPPRIVS
も参照のこと。

.PP
.\"O Keep in mind that if
.\"O .BR chown (1)
.\"O is permitted on files in
.\"O .BR /etc/procmailrcs/ ,
.\"O that they can be chowned to root (or anyone else) by their current owners.
.\"O For maximum security, make sure this directory is
.\"O .I executable
.\"O to root only.
.BR /etc/procmailrcs/
にあるファイルに対して
.BR chown (1)
が許可されていれば、そのファイルの現在の所有者は、そのファイルを
rootにでも (他の誰にでも) chown できることを心に留めておくこと。
そこで、セキュリティを最大限強化するため、このディレクトリは
必ず root だけが
.I 実行可能
であることを確認すること。

.PP
.\"O Procmail is not the proper tool for sharing one mailbox among many
.\"O users, such as when you have one POP account for all mail to your
.\"O domain. It can be done if you manage to configure your MTA to add some
.\"O headers with the envelope recipient data in order to tell Procmail who
.\"O a message is for, but this is usually not the right thing to do.
.\"O Perhaps you want to investigate if your MTA offers `virtual user
.\"O tables', or check out the `multidrop' facility of Fetchmail.
自分のドメイン宛ての全てのメールに対して POP アカウントが1つしかないような、
1つのメールボックスを複数のユーザが共有する場合、
procmail は適切なツールではない。
使用している MTA をどうにかして設定して、
そのメッセージの宛先を procmail に伝えるいくつかのヘッダを受取人データのエンベロープに追加すればそのような共有も可能になるだろう。
しかしこれは通常正しい行為ではない。
おそらく、その MTA に「仮想ユーザテーブル」機能が備わっているかどうかを調べるか、 
Fetchmail の `multidrop' 機能を調べる方がいい。
.\"O .SH BUGS
.\"O After removing a lockfile by force, procmail waits $SUSPEND seconds before
.\"O creating a new lockfile so that another process that decides to remove the
.\"O stale lockfile will not remove the newly created lock by mistake.
.SH バグ
procmail は強制的にロックファイルを削除した後、
新しいロックファイルを作成する前に $SUSPEND 秒待つ。
これは、古くなったロックファイルを削除しようとする他のプロセスが、
新たに作成されたロックファイルを誤って削除しないようにする為である。
.PP
.\"O Procmail uses the regular TERMINATE signal to terminate any runaway filter,
.\"O but it does not check if the filter responds to that signal and it only sends
.\"O it to the filter itself, not to any of the filter's children.
procmail は、暴走したフィルタを終了する為に通常の TERMINATE シグナルを使用する。
しかし、そのシグナルにフィルタが応答するかどうかは確認しない。
それに procmail がシグナルを送るのはそのフィルタ自体であり、
そのフィルタのどの子プロセスにもシグナルは送らない。
.PP
.\"O A continued
.\"O .B Content-Length:
.\"O field is not handled correctly.
複数行に渡る、長過ぎる
.B Content-Length:
フィールドは正しく処理されない。
.PP
.\"O The embedded newlines in a continued header should be skipped when
.\"O matching instead of being treated as a single space as they are now.
複数行に渡る一つのヘッダに含まれる改行は、
マッチングの際にはそれをそのまま1個の空白として扱うのではなく、
無視されるだろう。
.\"O .SH MISCELLANEOUS
.SH その他
.\"O If there is an existing
.\"O .B Content-Length:
.\"O field in the header of the mail and the
.\"O .B \-Y
.\"O option is not specified, procmail will trim the field to report the correct
.\"O size.  Procmail does not change the fieldwidth.
メールヘッダに
.B Content-Length:
フィールドがあり、
.B \-Y
オプションが指定されていなければ、
procmail はそのフィールドに指定されているサイズを正しいサイズになるように調整する。
その際、 procmail は Content-Length: フィールドのフィールド幅を変更しない。
.PP
.\"O If there is no
.\"O .B Content-Length:
.\"O field or the
.\"O .B \-Y
.\"O option has been specified and procmail appends to regular mailfolders, any
.\"O lines in the body of the message that look like postmarks are prepended with
.\"O `>' (disarms bogus mailheaders).  The regular expression that is used
.\"O to search for these postmarks is:
.\"O .RS
.\"O `\\nFrom '
.\"O .RE
.B Content-Length:
フィールドがない場合、または
.B \-Y
オプションが指定されている状態で procmail が通常のメールフォルダに
メールを追加する場合、メッセージ本文中で消印と間違えそうな
全ての行の行頭には `>' が追加される
(これによって偽造メールヘッダを無害化する)。
この消印は、以下の正規表現を用いて検索する:
.RS
`\\nFrom '
.RE
【訳注: 消印: postmark: エンベロープ From を示す行のこと。
mbox 形式メールボックスにメッセージを配送する際には、
識別文字列 "From " と混同しないように、
本文中で行頭に "From" がある場合は、該当する全ての行の行頭に引用符 '>' を付加する。
なお、引用符の追加は MH フォルダ形式と maildir フォルダ形式では行われない。】
.PP
.\"O If the destination name used in explicit delivery mode is not in /etc/passwd,
.\"O procmail will proceed as if explicit delivery mode was not in effect.
.\"O If not in explicit delivery mode and
.\"O should the uid procmail is running under, have no corresponding /etc/passwd
.\"O entry, then HOME will default to /, LOGNAME will default to #uid,
.\"O SHELL will default to /bin/sh, and ORGMAIL will default to
.\"O /tmp/dead.letter.
明示的配送モードで使用される配送先のユーザ名が /etc/passwd になければ、
procmail は明示的配送モードになっていなかったものとして処理を継続する。
明示的配送モードになっておらず、且つ実行中の procmail の uid に
対応する /etc/passwd エントリがない場合、HOME , LOGNAME , SHELL 及び
ORGMAIL の各変数のデフォルト値は、それぞれ / , #uid , /bin/sh , /tmp/dead.letter
になる。
.PP
.\"O When in explicit delivery mode, procmail will generate a leading `From '
.\"O line if none is present.  If one is already present procmail will leave it
.\"O intact.  If procmail is not invoked with one of the following user or group ids\h'-\w' 'u' : root, daemon, uucp, mail, x400, network, list, slist, lists or news, but still has to generate or accept a new `From ' line,
.\"O it will generate an additional `>From ' line to help distinguish
.\"O fake mails.
明示的配送モードの時、メッセージヘッダの先頭に `From ' 行がない場合、procmail はこれを生成する。
`From '行が既にある場合は、 procmail はそれには手を付けずにそのまま残す。
procmail を起動したユーザのユーザ或はグループ ID が
root, daemon, uucp, mail, x400, network, list, slist, lists or news
のいずれでもなく、それでも新しい `From ' 行を生成ないし受け入れる
必要がある場合は、偽造メールと区別しやすくするために
procmail は `>From ' 行を追加する。
.PP
.\"O For security reasons procmail will only use an absolute or
.\"O $HOME-relative rcfile if it is owned by the recipient or root, not
.\"O world writable, and the directory it is contained in is not world
.\"O writable.  The $HOME/.procmailrc file has the additional constraint of not
.\"O being group-writable or in a group-writable directory.
セキュリティ上の理由から、 procmail が使用する rcfile は絶対パスか
$HOME からの相対パス指定であり、且つその所有者が受取人または root であり、
且つ rcfile 自体とこれを含むディレクトリの両方共誰でも書き込みできる状態であってはならない。
【訳注: world writable: other (その他) の書き込みビット (w) が立っている状態を指す。 man chmod 参照。】
更に、$HOME/.procmailrc ファイルの場合は、同一グループユーザが書き込み可能であってはならないし、
また $HOME ディレクトリが同一グループから書き込み可能であってはならない。
.PP
.\"O If /var/mail/$LOGNAME is a bogus mailbox (i.e., does not belong to the
.\"O recipient, is unwritable, is a symbolic link or is a hard link), procmail will
.\"O upon startup try to rename it into a file starting
.\"O with `BOGUS.$LOGNAME.' and
.\"O ending in an inode-sequence-code.  If this turns out to be impossible,
.\"O .B ORGMAIL
.\"O will have
.\"O .I no
.\"O initial value, and hence will inhibit delivery without a proper rcfile.
/var/mail/$LOGNAME が偽のメールボックスである (すなわち、メールボックスの所有者が受取人でないか、
メールボックスが書き込みできないか、メールボックスがシンボリックリンク或はハードリンクである) 場合、
procmail は起動時にそのメールボックスを `BOGUS.$LOGNAME.' で始まり、
inode-sequence-code で終わるファイル名に変更しようとする。
もしこれができないとわかると、
.B ORGMAIL
には初期値が
.I 設定されない。
結果として、適切な rcfile のない状態でメールの配送が行われなくなる。
.PP
.\"O If /var/mail/$LOGNAME already is a valid mailbox, but has got too loose
.\"O permissions on it, procmail will correct this.  To prevent procmail from doing
.\"O this make sure the u+x bit is set.
.\"O 【訳注: この文章の意味が不明。】
/var/mail/$LOGNAME は正規のメールボックスだが、
パーミッションが甘すぎる場合は、 procmail はこれを修正する。
procmail にこのようなパーミッション操作をさせないようにするには、
メールボックスに必ず u+x ビットを立てること。
.PP
.\"O When delivering to directories, MH folders, or maildir folders, you
.\"O .B don't
.\"O need to use lockfiles to prevent several concurrently running procmail
.\"O programs from messing up.
メールをディレクトリ、MH フォルダ、または maildir フォルダに配送する際には、
procmail の複数起動による混乱を防ぐ為にロックファイルを使う必要は
.B ない。
.PP
.\"O Delivering to MH folders is slightly more time consuming than delivering
.\"O to normal directories or mailboxes, because procmail has to search for
.\"O the next available number (instead of having the filename immediately
.\"O available).
MH フォルダへの配送は、通常のディレクトリや mailbox への配送よりも若干の時間を
要する。
これは procmail が (すぐに使えるファイル名を採用しないで) MH フォルダ内で
ファイル名として使える次の番号を検索しなければならないからである。
.PP
.\"O On general failure procmail will return EX_CANTCREAT, unless option
.\"O .B \-t
.\"O is specified, in which case it will return EX_TEMPFAIL.
.B \-t
オプションが指定されていない限り、procmail は一般的な失敗に関して EX_CANTCREAT
を返す。
.B \-t
オプションが指定されている場合には EX_TEMPFAIL を返す。
.PP
.\"O To make `egrepping' of headers more consistent, procmail concatenates all
.\"O continued header fields; but only internally.  When delivering the mail, line
.\"O breaks will appear as before.
egrep 風のヘッダ検索をより良く行う為に、 procmail は複数行にわたる
全てのヘッダフィールドを連結して一行にする。
但し、これは内部的な処理であり、メールを配送する際には、
改行は元の状態に戻る。
.PP
.\"O If procmail is called under a name not starting with `procmail' (e.g., if it
.\"O is linked to another name and invoked as such), it comes up in explicit
.\"O delivery mode, and expects the recipients' names as command line arguments
.\"O (as if \-d had been specified).
(たとえば procmail が違う名前でリンクされていて、その違う名前で
起動される場合のように) 起動する procmail の名前が `procmail' で
始まっていない場合、その procmail は明示的配送モードで起動され、
(\-d オプションが指定された時と同様に) コマンドラインの引数に
受取人名が必要になる。
.PP
.\"O Comsat/biff notifications are done using udp.  They are sent off
.\"O once when procmail generates the regular logfile entry.  The notification
.\"O messages have the following extended format (or as close as you can get when
.\"O final delivery was not to a file):
Comsat/biff 通知は udp を使用して行われる。
この通知は、procmail が通常のログファイルのエントリを生成した時に
一回送出される。通知メッセージは下記の拡張フォーマット
(または最後の配送先がファイル以外の時のフォーマットと酷似したもの)
である:
.RS
$LOGNAME@offset_of_message_in_mailbox\h'-\w' 'u' :absolute_path_to_mailbox
.RE
.PP
.\"O Whenever procmail itself opens a file to deliver to, it
.\"O consistently uses the following kernel locking strategies\h'-\w' 'u' :
.\"O .BR fcntl (2).
procmail がメールの配送の際にファイルを開く時は、 procmail は常に
.BR fcntl (2)
によるカーネルロックの方法を使用する。
.PP
.\"O Procmail is NFS-resistant and eight-bit clean.
.\"O .br
.\"O .ne 11
procmail は NFS 環境でも使用可能で、 8 ビット問題はない。【訳注: 8bit clean: データの8ビット目を遮ることなく透過的にデータ転送を行えることを指す。】
.br
.ne 11
.\"O .SH NOTES
.\"O Calling up procmail with the \-h or \-? options will cause
.\"O it to display a command-line help and recipe flag quick-reference page.
.SH その他
procmail をコマンドラインオプション \-h または \-? にて起動すると、
コマンドラインヘルプとレシピフラグのクイックリファレンスのページが
表示される。
.PP
.\"O There exists an excellent newbie FAQ about mailfilters (and procmail
.\"O in particular); it is maintained by Nancy McGough <nancym@ii.com>
.\"O and can be obtained by sending a mail to mail-server@rtfm.mit.edu with
.\"O the following in the body:
メールフィルタ(特に procmail)に関して、初心者向けに優れた FAQ がある:
これは Nancy McGough <nancym@ii.com> が保守しており、
mail-server@rtfm.mit.edu に以下の内容の本文をメールすれば入手できる:
.RS
send usenet/news.answers/mail/filtering-faq
.RE
【訳注: 2004年5月現在、上記文書は http://www.faqs.org/faqs/mail/filtering-faq/ からも閲覧可能。】
.PP
.\"O If procmail is
.\"O .I not
.\"O installed globally as the default mail delivery agent (ask your system administrator), you have to make sure it is invoked when your mail arrives.
もし procmail が当該ホストのデフォルトのメール配送エージェントとしてインストール
.I されていなければ
(システム管理者に問い合わせること)、自分宛のメールが到着した時に
起動されることを確認する必要がある。
.\"O In this case your $HOME/.forward (beware, it
.\"O .B has
.\"O to be world readable) file should contain the line below.  Be sure to include
.\"O the single and double quotes, and unless you know your site to be running
.\"O smrsh (the SendMail Restricted SHell), it must be an
.\"O .I absolute
.\"O path.
この場合、自分の $HOME/.forward に以下の行を書いておくこと
(このファイルは誰でも読み込み可能で
.B なければならない
ことに注意)。
その際、必ずシングルクォートとダブルクォートを含むこと。
さらに、自分のサイトで smrsh (the SendMail Restricted SHell) が動いている
と分かっていれば別だが、そうでなければ、このパスは
.I 絶対パス
にすること。
.PP
.na
.nf
"\h'-\w' 'u' |exec /usr/bin/procmail"
.fi
.ad
.PP
.\"O Some mailers (notably exim) do not currently accept the above syntax.
.\"O In such case use this instead:
(特に exim のような) メール配送ソフトの中には、現在のところ上記文法を
許さないものがある。
その場合は、代わりに以下のコマンド行を使用する:
.PP
.na
.nf
|/usr/bin/procmail
.fi
.ad
.PP
.\"O Procmail can also be invoked to postprocess an already filled system
.\"O mailbox.  This can be useful if you don't want to or can't use a
.\"O $HOME/.forward file (in which case the following script could
.\"O periodically be called from within
.\"O .BR cron (1),
.\"O or whenever you start reading mail):
procmail は、既に一杯になっているシステムメールボックスの
後処理にも使用できる。 $HOME/.forward ファイルを使いたくないとか、
使用できない場合にこれが役に立つ場合がある。
(この場合は以下のスクリプトを
.BR cron (1)
から定期的に呼び出しても良いし、メールを読み始める際に必ず起動するようにしても良い。)
.Sx 17
#!/bin/sh

ORGMAIL=/var/mail/$LOGNAME

if cd $HOME &&
 test \-s $ORGMAIL &&
 lockfile \-r0 \-l1024 .newmail.lock 2>/dev/null
then
  trap "rm \-f .newmail.lock" 1 2 3 13 15
  umask 077
  lockfile \-l1024 \-ml
  cat $ORGMAIL >>.newmail &&
   cat /dev/null >$ORGMAIL
  lockfile \-mu
  formail \-s procmail <.newmail &&
   rm \-f .newmail
  rm \-f .newmail.lock
fi
exit 0
.Ex
.ne 14
.\"O .SS "A sample small $HOME/.procmailrc:"
.SS "$HOME/.procmailrc のちょっとしたサンプル:"
.na
.nf
PATH=/usr/local/bin:/usr/bin:/bin
MAILDIR=$HOME/Mail      #you'd better make sure it exists
DEFAULT=$MAILDIR/mbox   #completely optional
LOGFILE=$MAILDIR/from   #recommended

:0:
* ^From.*berg
from_me

:0
* ^Subject:.*Flame
/dev/null
.fi
.ad
.PP
.\"O Other examples for rcfile recipes can be looked up in the
.\"O .BR procmailex (5)
.\"O man page.
その他の rcfile レシピの例は
.BR procmailex (5)
マニュアルページを参照されたい。
.Sh ソース
.\"O This program is part of the
.\"O .I procmail mail-processing-package
.\"O (v3.22) available at http://www.procmail.org/ or
.\"O ftp.procmail.org in
.\"O .BR pub/procmail/ .
このプログラムは http://www.procmail.org/ または ftp.procmail.org の
.BR pub/procmail/
で取得可能な
.I procmail mail-processing-package
(v3.22) の一部である。
.\"O .Sh MAILINGLIST
.\"O There exists a mailinglist for questions relating to any program in the
.\"O procmail package:
.Sh メーリングリスト
procmail パッケージの全てのプログラムに関連した質問へのメーリングリストが
ある:
.RS
<procmail-users@procmail.org>
.RS
.\"O for submitting questions/answers.
質問/回答の投稿用アドレス。
.RE
<procmail-users-request@procmail.org>
.RS
.\"O for subscription requests.
参加申込用のアドレス。
.RE
.PP
.RE
.\"O If you would like to stay informed about new versions and official patches send
.\"O a subscription request to
新しいバージョンやオフィシャルパッチについての情報を常時入手したい場合
には、以下のメールアドレスに参加申込をすること:
.RS
procmail-announce-request@procmail.org
.RE
.\"O (this is a readonly list).
(これは読み込み専用のメーリングリストである)。
.\"O .SH AUTHORS
.SH 著者
Stephen R. van den Berg
.RS
<srb@cuci.nl>
.RE
Philip A. Guenther
.RS
<guenther@sendmail.com>
.RE
.\".if n .pl -(\n(.tu-1i)
.rm SH
.rn Sh SH
.rm SS
.rn Ss SS
.rm TP
.rn Tp TP
.rm RS
.rn Rs RS
.rm RE
.rn Re RE
