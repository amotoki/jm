.\" -*- nroff -*-
.\" Copyright 1998, 1999, 2002 Thorsten Kukuk, Germany
.\"
.\" This file is part of ypbind-mt.
.\"
.\" Author: Thorsten Kukuk <kukuk@suse.de>
.\"
.\" ypbind-mt is free software; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of the
.\" License, or (at your option) any later version.
.\"
.\" ypbind-mt is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
.\" General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with ypbind-mt; see the file COPYING.  If not,
.\" write to the Free Software Foundation, Inc., 59 Temple Place - Suite 330,
.\" Boston, MA 02111-1307, USA.
.\"
.\" Japanese Version Copyright (c) 1999 NAKANO Takeo all rights reserved.
.\" Translated Tue Sep 14 1999 by NAKANO Takeo <nakano@apm.seikei.ac.jp>
.\" Updated Fri Oct 22 1999 by NAKANO Takeo
.\"
.\"WORD:	binding		バインド
.\"
.TH ypbind 8 "April 2002" "ypbind-mt Version 1.16"
.\"O .SH NAME
.SH 名前
.\"O ypbind - NIS binding process
ypbind \- NIS バインドプロセス
.\"O .SH SYNOPSIS
.SH 書式
.B
ypbind
[
.BR \-c
] [
.BR \-d | \-debug
] [
.B \-broadcast
] [
.B \-broken-server
] [
.B \-ypset
] [
.B \-ypsetme
] [
.B \-no-ping
] [
.BR \-f " configfile"
]
.LP
.B
ypbind
.BR \--version
.\"O .SH DESCRIPTION
.SH 説明
.\"O .B ypbind
.\"O finds the server for NIS domains and maintains the NIS binding
.\"O information. The client (normaly the NIS routines in the standard C library)
.\"O could get the information over RPC from
.\"O .B ypbind
.\"O or read the binding files. The binding files resides in the directory
.\"O .B /var/yp/binding
.\"O and are conventionally named
.\"O .BR [domainname].[version] .
.\"O The supported versions are 1 and 2.
.\"O There could be several such files since it is possible for an NIS client
.\"O to be bound to more then one domain.
.B ypbind
は NIS ドメインのサーバを探して接続し、その NIS バインド情報を
保持する。クライアント (通常は標準 C ライブラリの NIS ルーチン)
は
.B ypbind
への RPC を用いて、あるいはバインドファイルを読むことによって
この情報を入手することができる。バインドファイルは
.B /var/yp/binding
に置かれており、慣習にしたがって
.B [domainname].[version]
のような名前が付けられている。
サポートされているバージョンは 1 と 2 である。
このようなファイルが複数存在することもあり得る。なぜなら
NIS クライアントは複数のドメインにバインドすることもできるからである。
.LP
.\"O After a binding has been established,
.\"O .B ypbind
.\"O will send YPPROC_DOMAIN requests to the current NIS server at 20 seconds
.\"O intervals. If it doesn't get an response or the NIS server tells that he
.\"O doesn't has this domain any longer,
.\"O .B ypbind
.\"O will search a new NIS server. All 15 minutes
.\"O .B ypbind
.\"O will check, if the current NIS server is the fastest. If it find
.\"O a server which answers faster, it will switch to this server.
.\"O You could tell
.\"O .B ypbind
.\"O to use network broadcasts to find a new server, what is insecure,
.\"O or you could give it a list of known, secure servers.
.\"O In this case
.\"O .B ypbind
.\"O will send a ping to all server and binds to first one which answers.
バインドが確立すると、
.B ypbind
は YPPROC_DOMAIN リクエストを 20 秒間隔で現在の NIS サーバに送信する。
返信が返ってこなかったり、NIS サーバから「当該ドメインの情報はもう
保持していない」旨の返信が来た場合には、
.B ypbind
は新しい NIS サーバを探す。
.B ypbind
は 15 分ごとに、
現在の NIS サーバがもっとも高速であるかどうかのチェックを行う。
もしより高速なサーバがあれば、そちらに接続を切り替える。
新しいサーバを探すときには、
.B ypbind
にネットワークブロードキャストを用いるようにさせることも
できるし (これは安全でない)、または安全なことがわかっている
サーバのリストを与え、その中から探すようにさせることもできる。
後者の場合は、
.B ypbind
はすべてのサーバに ping を送り、最初に答えたサーバにバインドする。
.LP
.\"O Unless the option
.\"O .B \-debug
.\"O is used, ypbind detaches itself from the controlling terminal and puts
.\"O itself into background.
.\"O .B ypbind
.\"O uses
.\"O .BR syslog (3)
.\"O for logging errors and warnings.
.\"O At startup or when receiving signal SIGHUP,
.\"O .B ypbind
.\"O parses the file
.\"O .B /etc/yp.conf
.\"O and tries to use the entries for its initial binding. Valid entries
.\"O are
.B \-debug
オプションが指定されなかった場合は、
.B ypbind
は自分自身を制御端末から分離してバックグラウンドへ置く。
.B ypbind
はエラーや警告メッセージの記録に
.BR syslog (3)
を用いる。
起動時や SIGHUP シグナルを受け取ると、
.B ypbind
は
.B /etc/yp.conf
ファイルをパースして、そのエントリを用いて最初のバインドを
行おうとする。有効なエントリは以下のようなものである。

.B domain
.I nisdomain
.B server
.I hostname
.RS
.\"O Use server
.\"O .I hostname
.\"O for the domain
.\"O .IR nisdomain .
.\"O You could have more then one entry of this type for a single domain.
ドメイン
.I nisdomain
の情報をサーバー
.I hostname
から取得する。
この指定は、一つのドメインに対して複数回行ってかまわない。
.RE

.B domain
.I nisdomain
.B broadcast
.RS
.\"O Use broadcast on the local net for domain
.\"O .IR nisdomain .
ドメイン
.I nisdomain
に対してはローカルネットにブロードキャストを行う。
.RE

.B ypserver
.I hostname
.RS
.\"O Use server
.\"O .I server
.\"O for the local domain.
ローカルドメインの情報をサーバー
.I server
から取得する。
.RE

.\"O A broadcast entry in the configuration file will overwrite a ypserver/server
.\"O entry and a ypserver/server entry broadcast. If all given server are down,
.\"O .B ypbind
.\"O will
.\"O .B not
.\"O switch to use broadcast.
設定ファイルに broadcast エントリがあった場合は、
ypserver/hostname エントリは上書きされる。
boradcast エントリがなかった場合は、その他の
エントリで与えられたサーバ全てがダウンしている場合でも、
.B ypbind
はブロードキャストは\fB用いない\fP。
.\"O .B ypbind
.\"O will try at first
.\"O .B /etc/hosts
.\"O and then
.\"O .B DNS
.\"O for resolving the hosts names from
.\"O .BR /etc/yp.conf .
.B ypbind
が
.B /etc/yp.conf
で与えられたホスト名の解決をする際には、まず
.B /etc/hosts
を試し、次に
.B DNS
を用いようとする。
.\"O If
.\"O .B ypbind
.\"O couldn't reconfigure the search order, it will use only
.\"O .BR DNS .
.\"O If
.\"O .B DNS
.\"O isn't available, you could only use IP-addresses in
.\"O .BR /etc/hosts .
.\"O .B ypbind
.\"O could only reconfigure the search order with glibc 2.x.
.B ypbind
は検索順序の再設定ができない場合には、
.B DNS
だけを用いる。
.B DNS
が使えない場合には、
.B /etc/hosts
に IP アドレスの書かれているホストしか指定できない。
.B ypbind
で検索順序の再設定をするためには glibc 2.x が必要である。
.\"O If the
.\"O .B \-broadcast
.\"O option is specified,
.\"O .B ypbind
.\"O will ignore the configuration file.
.\"O If the file does not exist or if there are no valid entries,
.\"O .B ypbind
.\"O exit.
.B \-boradcast
オプションが指定された場合には、
.B ypbind
は設定ファイルを無視する。
設定ファイルが存在しなかったり、有効なエントリがひとつもなかった
場合には、
.B ypbind
は終了する。
.LP
.\"O This
.\"O .B ypbind
.\"O is a special version which uses
.\"O .BR pthreads .
.\"O It will start 2 more threads.  The master process services RPC requests
.\"O asking for binding info. The first thread initializes the binding and
.\"O checks it periodically. Upon failure, the binding is invalidated and
.\"O the process tries again to find a valid server. The second thread
.\"O will handle all the signals.
この
.B ypbind
は
.B pthreads
を用いた特殊なバージョンである。この
.B ypbind
は 2 つのスレッドを新たに生成する。マスタープロセスは
バインド情報を尋ねてくる RPC リクエストにサービスする。
最初のスレッドはバインドを初期化して、それを定期的にチェックする。
障害が起こった場合にはバインドは無効となり、このプロセスは
有効なサーバを再び見つけようとする。二つめのスレッドは
すべてのシグナルを処理する。

.\"O .SH OPTIONS
.SH オプション
.TP
.B "\-broadcast"
.\"O Send a broadcast to request the information needed to bind to a
.\"O specific NIS server. With this option,
.\"O .B /etc/yp.conf
.\"O will be ignored.
適切な NIS サーバにバインドするために必要な情報を収集するため、
ブロードキャストを送る。このオプションを指定すると
.B /etc/yp.conf
は無視される。
.TP
.B "\-ypset"
.\"O Allow
.\"O .B root
.\"O from any remote machine to change the binding for a domain via the
.\"O .BR ypset (8)
.\"O command. By default, no one can change the binding. This option is really
.\"O insecure. If you change a binding for a domain, all the current known
.\"O servers for this domain will be forgotten. If the new server goes down,
.\"O .B ypbind
.\"O will use the old searchlist.
任意のリモートマシンから、
.BR ypset (8)
を用いてドメインに対するバインドを変更する許可を
.B root
に与える。デフォルトではバインドを変更することは誰にもできない。
このオプションは非常に危険である。ドメインに対するバインドを
変更すると、認識していたそのドメインのサーバを全て忘れてしまう。
もしその新しいサーバがダウンした場合には、
.B ypbind
は古い検索リストを用いることになる。
.TP
.B "\-ypsetme"
.\"O The same as
.\"O .BR \-ypset ,
.\"O but only
.\"O .B root
.\"O on the local machine is allowed to chang the binding. Such requests
.\"O are only allowd from
.\"O .BR loopback .
.B \-ypset
と同じだが、ローカルマシンの
.B root
だけがバインドを変更できる。そのような要求は
.B loopback
からのみ許される。
.TP
.B "\-c"
.\"O .B ypbind
.\"O only checks if the config file has syntax errors and exits.
設定ファイルに文法エラーがないかどうかをチェックして、
そのまま単に終了する。
.TP
.B "\-debug"
.\"O starts
.\"O .B ypbind
.\"O in debug mode.
.\"O .B ypbind
.\"O will not put itself into background, and error messages and debug
.\"O output are written to standard error.
.B ypbind
をデバッグモードで起動する。
.B ypbind
は自身をバックグラウンドに送らず、エラーメッセージと
デバッグ出力を標準エラー出力に書き出す。
.TP
.B "\-broken-server"
.\"O lets
.\"O .B ypbind
.\"O accept answers from servers running on an illegal port number. This should
.\"O usually be avoided, but is required by some
.\"O .BR ypserv (8)
.\"O versions.
正しくないポート番号で動作しているサーバからの返事を受け取る。
これは通常用いるべきでないが、
.BR ypserv (8)
のバージョンによっては必要とされることもある。
.TP
.B "\-no-ping"
.\"O .B ypbind
.\"O will not check if the binding is alive. This option is for use with
.\"O dialup connections to prevent
.\"O .B ypbind
.\"O from keeping the connection unnessecarily open or causing autodials.
バインドが持続しているかをチェックしない。
このオプションはダイアルアップ接続の場合に便利である。
.B ypbind
のみによる不必要な接続を切ったり、オートダイアルをしないようにできる。
.TP
.BR "\-f" " configfile"
.\"O .B ypbind
.\"O will use
.\"O .B configfile
.\"O and not
.\"O .B /etc/yp.conf
.B /etc/yp.conf
の代わりに
.B configfile
を用いる。
.TP
.B "\-\-version"
.\"O Prints the version number
バージョン番号を表示する。
.LP
.\"O .SH NOTES
.SH 注意
.\"O Binding to multiple domains is tested and works.
.\"O Load sharing between multiple servers for a single domain is
.\"O not supported.
.\"O .B ypbind
.\"O will always try to bind a domain to a server. If there is no valid
.\"O server in the list or answers to a broadcast, the domain is unbounded.
複数ドメインへのバインドもテストされており、動作する。
単一ドメインにおける複数サーバへの負荷分散はサポートされていない。
.B ypbind
は常にドメインをサーバへバインドしようとする。
リストに有効なサーバがない場合や、ブロードキャストに対する
反応がない場合には、ドメインへのバインドは解除される。
.LP
.\"O .SH FILES
.SH ファイル
.TP
.B /etc/yp.conf
.\"O configuration file.
設定ファイル。
.TP
.BI /var/yp/binding/[domainname].[version]
.\"O binding file containing information about each NIS domain.
各々の NIS ドメインに関する情報を含むバインドファイル。
.TP
.B /var/run/ypbind.pid
.\"O contains the process id of the currently running
.\"O .B ypbind
.\"O master process.
現在動作している
.B ypbind
マスタープロセスのプロセス id が書かれているファイル。
.LP
.\"O .SH "SEE ALSO"
.SH 関連項目
.BR syslog (3),
.BR domainname (1),
.BR ypdomainname (8),
.BR ypwhich (1),
.BR ypserv (8),
.BR ypset (8)
.\"O .SH AUTHOR
.SH 著者
.\"O .B ypbind-mt
.\"O was written by Thorsten Kukuk <kukuk@suse.de>.
.B ypbind-mt
は Thorsten Kukuk <kukuk@suse.de> によって書かれた。
