.\"
.\" sed.1 - the *roff document processor source for the sed manual
.\"
.\" This file is part of GNU sed.
.\" Copyright (C) 1998 Free Software Foundation, Inc.
.\"
.\" This program is free software; you can redistribute it and/or modify
.\" it under the terms of the GNU General Public License as published by
.\" the Free Software Foundation; either version 2, or (at your option)
.\" any later version.
.\"
.\" This program is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public License
.\" along with this program; if not, write to the Free Software
.\" Foundation, 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA. */
.\"
.\" Japanese Version Copyright (c) 2001 NAKANO Takeo all rights reserved.
.\" Translated Mon 7 May 2001 by NAKANO Takeo <nakano@apm.seikei.ac.jp>
.\"
.TH SED 1 "1998-05-07" "GNU Project"
.ds sd \fIsed\fP
.\"O .ds Sd \fISed\fP
.\"O .SH NAME
.\"O sed \- a Stream EDitor
.SH 名前
sed \- ストリームエディタ
.\"O .SH SYNOPSIS
.SH 書式
.nf
sed [-n] [-V] [--quiet] [--silent] [--version] [--help]
    [-e script] [--expression=script]
    [-f script-file] [--file=script-file]
    [script-if-no-other-script]
    [file...]
.fi
.\"O .SH DESCRIPTION
.SH 説明
.\"O \*(Sd is a stream editor.
.\"O A stream editor is used to perform basic text
.\"O transformations on an input stream
.\"O (a file or input from a pipeline).
.\"O While in some ways similar to an editor which
.\"O permits scripted edits (such as \fIed\fP),
.\"O \*(sd works by making only one pass over the
.\"O input(s), and is consequently more efficient.
.\"O But it is \*(sd's ability to filter text in a pipeline
.\"O which particularly distinguishes it from other types of
.\"O editors.
\*(sd はストリームエディタである。
ストリームエディタは、入力ストリーム
(ファイルまたはパイプラインからの入力)
に対して基本的なテキスト変換を行うために用いられる。
\*(sd は
編集スクリプトを使える (\fIed\fP のような) エディタと
いろいろな面で似ているが、
\*(sd は入力に対して 1 パスだけで動作するので、より効率的である。
また \*(sd はパイプラインのテキストに対してフィルタ動作を行うことができ、
この点は他のタイプのエディタとはっきり違う。

.\"O .SH OPTIONS
.SH オプション
.\"O \*(Sd may be invoked with the following command-line options:
\*(sd の起動時には以下のコマンドラインオプションを指定できる。
.TP
.B -V
.TP
.B --version
.\"O Print out the version of sed that is being run and a copyright notice,
.\"O then exit.
sed のバージョン・著作権表示を出力し、終了する。
.TP
.B -h
.TP
.B --help
.\"O Print a usage message briefly summarizing these command-line options
.\"O and the bug-reporting address,
.\"O then exit.
コマンドラインオプションを簡単にまとめた利用法と
バグレポート先のアドレスを出力し、終了する。
.TP
.B -n
.TP
.B --quiet
.TP
.B --silent
.\"O By default, \*(sd will print out the pattern space
.\"O at the end of each cycle through the script.
.\"O These options disable this automatic printing,
.\"O and \*(sd will only produce output when explicitly told to
.\"O via the
.\"O .B p
.\"O command.
デフォルトでは、
\*(sd はスクリプトの各サイクルの最後でパターンスペースの内容を出力する。
これらのオプションを指定するとこの自動的な出力が行われなくなり、
.B p
コマンドで出力することを指定された場合に限って
\*(sd は出力を生成する。
.TP
.B -e \fIscript\fP
.TP
.BI --expression= script
.\"O Add the commands in
.\"O .I script
.\"O to the set of commands to be run while processing the input.
.I script
のコマンドを、入力の処理中に行われるコマンドセットに追加する。
.TP
.B -f \fIscript-file\fP
.TP
.BI --file= script-file
.\"O Add the commands contained in the file
.\"O .I script-file
.\"O to the set of commands to be run while processing the input.
ファイル
.I script-file
に含まれるコマンドを、入力の処理中に行われるコマンドセットに追加する。
.PP
.\"O If no
.\"O .BR -e , -f , --expression ,
.\"O or
.\"O .B --file
.\"O options are given on the command-line,
.\"O then the first non-option argument on the command line is
.\"O taken to be the
.\"O .I script
.\"O to be executed.
.BR -e ", " -f ", " --expression ", " --file
などのオプションがコマンドラインから全く与えられなかった場合は、
コマンドラインの引き数のうち、オプションでない最初のものが
.I script
として受け取られ、実行される。
.PP
.\"O If any command-line parameters remain after processing the above,
.\"O these parameters are interpreted as the names of input files to
.\"O be processed.
.\"O A file name of
.\"O .B -
.\"O refers to the standard input stream.
.\"O The standard input will processed if no file names are specified.
以上のコマンドラインパラメータを処理したあとに引き数が残った場合は、
それらは処理対象となる入力ファイルのファイル名と解釈される。
.B -
というファイル名は、標準入力ストリームを参照する。
ファイル名が全く指定されなかった場合は標準入力を処理する。

.\"O .SH
.\"O Command Synopsis
.SH コマンドの文法
.\"O This is just a brief synopsis of \*(sd commands to serve as
.\"O a reminder to those who already know sed;
.\"O other documentation (such as the texinfo document)
.\"O must be consulted for fuller descriptions.
これは \*(sd コマンドのごく簡単な文法で、
既に sed を知っている人に対する備忘録程度のものである。
完全な記述を求める場合は他の文書 (texinfo 文書など) にあたること。
.\"O .SS
.\"O Zero-address ``commands''
.SS アドレスを取らないコマンド
.TP
.RI :\  label
.\"O Label for
.\"O .B b
.\"O and
.\"O .B t
.\"O commands.
.B b
コマンドと
.B t
コマンド用のラベル。
.TP
.RI # comment
.\"O The comment extends until the next newline (or the end of a
.\"O .B -e
.\"O script fragment).
次の改行文字まで (あるいは
.B -e
スクリプトフラグメントの末尾まで) をコメントとして取り扱う。
.TP
}
.\"O The closing bracket of a { } block.
{ } ブロックの閉じ括弧。
.\"O .SS
.\"O Zero- or One- address commands
.SS アドレスを 0 または 1 個とるコマンド
.TP
=
.\"O Print the current line number.
現在の行番号を表示する。
.TP
a \e
.TP
.I text
.\"O Append
.\"O .IR text ,
.\"O which has each embedded newline preceeded by a backslash.
.I text
を追加する。
.I text
に改行を含めたい場合は、その前にバックスラッシュを置く。
.TP
i \e
.TP
.I text
.\"O Insert
.\"O .IR text ,
.\"O which has each embedded newline preceeded by a backslash.
.I text
を挿入する。
.I text
に改行を含めたい場合は、その前にバックスラッシュを置く。
.TP
q
.\"O Immediately quit the \*(sd script without processing
.\"O any more input,
.\"O except that if auto-print is not diabled
.\"O the current pattern space will be printed.
これ以上入力の処理を行わず、ただちに \*(sd スクリプトの処理を終了する。
ただし auto-print が diable されていなければ、
カレントのパターンスペースが出力される。
.TP
.RI r\  filename
.\"O Append text read from
.\"O .IR filename .
テキストを
.I filename
から読んで追加する。
.\"O .SS
.\"O Commands which accept address ranges
.SS アドレス範囲をとりうるコマンド
.TP
{
.\"O Begin a block of commands (end with a }).
コマンドブロックの開始 (} で終了する)。
.TP
.RI b\  label
.\"O Branch to
.\"O .IR label ;
.\"O if
.\"O .I label
.\"O is omitted, branch to end of script.
.I label
に分岐する。
.I label
が省略された場合は、スクリプトの末尾に分岐する。
.TP
.RI t\  label
.\"O If a s/// has done a successful substitution since the
.\"O last input line was read and since the last t command,
.\"O then branch to
.\"O .IR label ;
.\"O if
.\"O .I label
.\"O is omitted, branch to end of script.
最後に入力行が読まれ、最後に t コマンドが行われて以降に
s/// が成功していれば、
.I label
に分岐する。
.I label
が省略された場合は、スクリプトの末尾に分岐する。
.TP
c \e
.TP
.I text
.\"O Replace the selected lines with
.\"O .IR text ,
.\"O which has each embedded newline preceeded by a backslash.
選択した行を
.I text
で置換する。
.I text
に改行を含めたい場合は、その前にバックスラッシュを置く。
.TP
d
.\"O Delete pattern space.
.\"O Start next cycle.
パターンスペースを削除する。
次のサイクルを開始する。
.TP
D
.\"O Delete up to the first embedded newline in the pattern space.
.\"O Start next cycle, but skip reading from the input
.\"O if there is still data in the pattern space.
パターンスペースの最初の改行までを削除する。
次のサイクルを開始するが、
パターンスペースにまだデータが残っていたら、
入力からの読み込みをスキップする。
.TP
h H
.\"O Copy/append pattern space to hold space.
パターンスペースをホールドスペースにコピー/追加する。
.TP
g G
.\"O Copy/append hold space to pattern space.
ホールドスペースをパターンスペースにコピー/追加する。
.TP
x
.\"O Exchange the contents of the hold and pattern spaces.
ホールドスペースとパターンスペースの内容を交換する。
.TP
l
.\"O List out the current line in a ``visually unambiguous'' form.
現在の行を「視覚的に紛れのない」形式でリストする。
.TP
n N
.\"O Read/append the next line of input into the pattern space.
入力の次の行をパターンスペースに読み込む/追加する。
.TP
p
.\"O Print the current pattern space.
現在のパターンスペースを出力する。
.TP
P
.\"O Print up to the first embedded newline of the current pattern space.
現在のパターンスペースの最初の改行までを出力する。
.TP
.RI s/ regexp / replacement /
.\"O Attempt to match
.\"O .I regexp
.\"O against the pattern space.
パターンスペースに対して
.I regexp
のマッチを試みる。
.\"O If successful, replace that portion matched
.\"O with
.\"O .IR replacement .
マッチに成功すると、マッチした部分を
.I replacement
に置換する。
.\"O The
.\"O .I replacement
.\"O may contain the special character
.\"O .B &
.\"O to refer to that portion of the pattern space which matched,
.\"O and the special escapes \e1 through \e9 to refer to the
.\"O corresponding matching sub-expressions in the
.\"O .IR regexp .
.I replacement
は特殊文字である
.B &
を含むことができ、これはパターンスペースのマッチした部分を参照する。
また \e1 から \e9 までの特殊エスケープを含むこともでき、
これは
.I regexp
の副表現 (sub-expression) にマッチした部分をそれぞれ参照する。
.TP
.RI w\  filename
.\"O .I filename
.\"O Write the current pattern space to
.\"O .IR filename .
現在のパターンスペースを
.I filename
に書く。
.TP
.RI y/ source / dest /
.\"O Transliterate the characters in the pattern space which appear in
.\"O .I source
.\"O to the corresponding character in
.\"O .IR dest .
パターンスペースにある文字のうち、
.I source
にあるものを、
.I dest
の同じ位置にある文字に交換する。
.\"O .SH
.\"O Addresses
.SH アドレス
.\"O \*(Sd commands can be given with no addresses, in which
.\"O case the command will be executed for all input lines;
.\"O with one address, in which case the command will only be executed
.\"O for input lines which match that address; or with two
.\"O addresses, in which case the command will be executed
.\"O for all input lines which match the inclusive range of
.\"O lines starting from the first address and continuing to
.\"O the second address.
\*(sd のコマンドはアドレスを指定せずに与えることもでき、
この場合そのコマンドはすべての入力行に対して実行される。
アドレスをひとつ与えると、
コマンドはそのアドレスにマッチした入力行に対してのみ実行される。
2 つのアドレスを与えると、最初のアドレスにマッチした行から、
2 番目のアドレスにマッチした行に至る範囲 (両マッチ行を含む)
にあるすべての行に対して実行される。
.\"O Three things to note about address ranges:
.\"O the syntax is
.\"O .IR addr1 , addr2
.\"O (i.e., the addresses are separated by a comma);
.\"O the line which
.\"O .I addr1
.\"O matched will always be accepted,
.\"O even if
.\"O .I addr2
.\"O selects an earlier line;
.\"O and if
.\"O .I addr2
.\"O is a
.\"O .IR regexp ,
.\"O it will not be tested against the line that
.\"O .I addr1
.\"O matched.
アドレスの範囲指定については 3 つのことを注意しておく。
まず指定方法は
.IR addr1 , addr2
である (つまりアドレスをコンマで区切る)。
.I addr1
にマッチした行は、たとえ
.I addr2
がより前の行にマッチした場合でも、常に処理対象となる。
.I addr2
が
.I regexp
(正規表現) の場合には、
.I addr1
にマッチした行に対しては
.I addr2
のマッチは行われない。
.PP
.\"O After the address (or address-range),
.\"O and before the command, a
.\"O .B !
.\"O may be inserted,
.\"O which specifies that the command shall only be
.\"O executed if the address (or address-range) does
.\"O .B not
.\"O match.
アドレス (あるいはアドレス範囲) とコマンドの間には
.B !
を挟むことができる。この場合は、アドレス (あるいはアドレス範囲) が
\fBマッチしなかった\fP行に対してのみコマンドが実行される。
.PP
.\"O The following address types are supported:
以下のアドレスタイプがサポートされている。
.TP
.I number
.\"O Match only the specified line
.\"O .IR number .
.I number
で指定した行だけにマッチする。
.TP
.IR first ~ step
.\"O Match every
.\"O .IR step 'th
.\"O line starting with line
.\"O .IR first .
.\"O For example, ``sed -n 1~2p'' will print all the odd-numbered lines in
.\"O the input stream, and the address 2~5 will match every fifth line,
.\"O starting with the second.
.\"O (This is a GNU extension.)
.I first
行からはじまる
.I step
行おきの行にマッチする。例えば ``sed -n 1~2p'' は
入力行のうち奇数行を表示し、アドレスを 2~5 にすると、
第 2 行から 5 行おきに表示する (これは GNU の拡張である)。
.TP
$
.\"O Match the last line.
最終行にマッチする。
.TP
.RI / regexp /
.\"O Match lines matching the regular expression
.\"O .IR regexp .
正規表現
.I regexp
にマッチした行にマッチする。
.TP
.BI \fR\e\fPc regexp c
.\"O Match lines matching the regular expression
.\"O .IR regexp .
.\"O The
.\"O .B c
.\"O may be any character.
正規表現
.I regexp
にマッチした行にマッチする。
文字
.B c
は何でもよい。
.\"O .SH
.\"O Regular expressions
.SH 正規表現
.\"O POSIX.2 BREs
.\"O .I should
.\"O be supported, but they aren't completely yet.
.\"O The
.\"O .B \en
.\"O sequence in a regular expression matches the newline character.
.\"O There are also some GNU extensions.
.\"O [XXX FIXME: more needs to be said.
.\"O At the very least, a reference to another document which
.\"O describes what is supported should be given.]
POSIX.2 BRE
をサポートすべきであるが、まだ完全にはサポートできていない。
正規表現内部の
.B \en
シーケンスは改行文字にマッチする。
GNU 拡張も存在する。
[要修正: より詳細を記述する必要がある。
少なくとも、何がサポートされているかを述べた、
他の文書へのリファレンスが必要である]
.\"O .SH
.\"O Miscellaneous notes
.SH その他の注意
.\"O This version of sed supports a
.\"O .RB \e <newline>
.\"O sequence in
.\"O all regular expressions, the
.\"O .I replacement
.\"O part of a substitute (s) command, and in the
.\"O .I source
.\"O and
.\"O .I dest
.\"O parts of a transliterate (y) command.
.\"O The \e is stripped, and the newline is kept.
このバージョンの sed は、
あらゆる正規表現の内部・置換コマンドの
.I replacement
の内部・文字交換 (y) コマンドの
.I source
および
.I dest
の内部のいずれにおいても、
.RB \e <newline>
というシーケンスが使える。
.\"O .SH
.\"O SEE ALSO
.SH 関連項目
.BR awk (1),
.BR ed (1),
.BR expr (1),
.BR emacs (1),
.BR perl (1),
.BR tr (1),
.BR vi (1),
.BR regex (5)
.\"O [well, one
.\"O .I ought
.\"O to be written... XXX],
[うーん、書かないとダメですねえ]
【訳注: LDP には
.BR regex (7)
があります】,
sed.info,
.\"O any of various books on \*(sd,
\*(sd に関する様々な本のいずれか,
.na
the \*(sd FAQ (http://www.wollery.demon.co.uk/sedtut10.txt,
http://www.ptug.org/sed/sedfaq.htm).
.\"O .SH
.\"O BUGS
.SH バグ
.PP
.\"O E-mail bug reports to
.\"O .BR bug-gnu-utils@gnu.org .
.\"O Be sure to include the word ``sed'' somewhere in the ``Subject:'' field.
バグレポートは
.B bug-gnu-utils@gnu.org
まで送って下さい。
「Subject:」フィールドのどこかに
「sed」という単語を入れるようにして欲しい。
