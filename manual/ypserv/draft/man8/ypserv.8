.\" -*- nroff -*-
.\" $Id: ypserv.8,v 1.4 2004/02/23 18:56:53 ysato Exp $
.\" 
.\" This manual page is a part of ypserv archive. 
.\" README states the following
.\"
.\" See the file COPYING for copying restrictions. It is available under
.\" the GNU General Public License.
.\"
.\" Japanese Version Copyright (c) 1998, 1999 NAKANO Takeo all rights reserved.
.\" Translated Mon 23 Nov 1998 by NAKANO Takeo <nakano@apm.seikei.ac.jp>
.\" Updated Fri 22 Oct 1999 by NAKANO Takeo
.\" Updated Sun 02 Dec 2001 by NAKANO Takeo
.\"
.TH YPSERV 8 "April 1997" "NYS YP Server" "Linux Reference Manual"
.\"O .SH NAME
.\"O ypserv \- NIS server
.SH 名前
ypserv \- NIS サーバー
.\"O .SH SYNOPSIS
.SH 書式
.B /usr/sbin/ypserv
[
.B \-d
[
.B path
] ]
[
.B \-p port
]
.LP
.\"O .SH DESCRIPTION
.SH 説明
.IX  "ypserv"  ""  "\fLypserv\fP \(em NIS server process"
.LP
.\"O The
.\"O Network Information Service (NIS)
.\"O provides a simple network lookup service
.\"O consisting of databases and processes.  The databases are
.\"O .B gdbm
.\"O files in a directory tree rooted at
.\"O .BR /var/yp .
Network Information Service (NIS) は、
データベースとそれらを扱うプロセスとからなる
シンプルなネットワーク検索サービスである。
データベースは
.B gdbm
形式のファイルで、
.B /var/yp
以下のディレクトリツリーに置かれる。
.LP
.\"O The
.\"O .B ypserv
.\"O daemon is typically activated at system startup.
.B ypserv
デーモンは、通常システムのスタートアップの時に起動される。
.\"O .B ypserv
.\"O runs only on
.\"O .SM NIS
.\"O server machines with a complete
.\"O .SM NIS
.\"O database. On other machines using the
.\"O .SM NIS
.\"O services, you have to run
.\"O .B ypbind
.\"O as client or under Linux you could use the libc with
.\"O .SM NYS
.\"O support.
.B ypserv
は、完全な
.SM NIS
データーベースを保管する
.SM NIS
サーバーマシンでのみ実行される。
.SM NIS
サービスを利用する他のマシンでは、クライアントとして
.B ypbind
を動作しさえすればよい。あるいは Linux なら
.SM NYS
のサポートされた libc を用いてもよい。
.\"O .B ypbind
.\"O must run on every machine which has
.\"O .SM NIS
.\"O client processes;
.\"O .B ypserv
.\"O may or may not be running on the same node,
.\"O but must be running somewhere
.\"O on the network. On startup or when receiving the signal SIGHUP,
.\"O .B ypserv
.\"O parses the file
.\"O .B /etc/ypserv.conf.
.B ypbind
は
.SM NIS
クライアントプロセスの動作するすべてのマシンで起動しなければならない。
その際
.B ypserv
の動作しているマシンは、
ネットワークの同じノードでも他のノードでもかまわないが、
必ずネットワークのどこかに存在していなければならない。
スタートアップの時や SIGHUP シグナルを受け取った時には、
.B ypserv
は
.B /etc/ypserv.conf
ファイルを読み込み、その内容を解釈して利用する。
.LP
.\"O .SH OPTIONS
.SH オプション
.TP
.B "\-d" "\-\-debug" "[path]"
.\"O Causes the server to run in debugging mode. Normally,
.\"O .B ypserv
.\"O reports only errors (access violations, dbm failures)
.\"O using the syslog(3) facility. In debug mode, the server does not
.\"O background itself and prints extra status messages to stderr for
.\"O each request that it revceives.
.\"O .B path
.\"O is an optionally parameter.
.\"O .B ypserv
.\"O is using this directory instead of /var/yp
サーバーをデバッグモードで起動する。
通常
.B ypserv
は
.BR syslog (3)
を通してエラーメッセージ (アクセス権の侵害や dbm の障害など) のみを
報告する。これに対してデバッグモードでは、
サーバーはバックグラウンドへ待避せず、
アクセス要求を受けるたびに細かなステータスメッセージを
標準エラー出力に表示する。
.B path
は省略可能なパラメータで、指定すると
.B ypserv
はこのディレクトリを /var/yp の代わりに利用する。
.TP
.B "\-p" "\-\-port"  port
.\"O .B ypserv
.\"O will bind itself to this port.
.\"O This makes it possible to have a router filter packets
.\"O to the NIS ports, so that access to the NIS server from
.\"O hosts on the Internet can be restricted.
.B ypserv
がバインドするポート番号を指定する。このオプションを用いると、
ルータに NIS ポートへのパケットをフィルタリングさせ、
インターネットからの NIS サーバーへのアクセスを制限できる。
.TP
.B "\-v" "\-\-version"
.\"O Prints the version number
バージョン番号を表示する。
.\"O .SH SECURITY
.SH セキュリティ
.\"O In general, any remote user can issue an RPC to
.\"O .B ypserv
.\"O and retrieve the contents of your NIS maps, if he knows your
.\"O domain name. To prevent such unauthorized transactions,
.\"O .B ypserv
.\"O supports a feature called
.\"O .B securenets
.\"O which can be used to restrict access to a given set of hosts.
.\"O At startup or when arriving the SIGHUP Signal,
.\"O .B ypserv
.\"O will attempt to load the securenets information from a file
.\"O called
.\"O .B /var/yp/securenets .
.\"O This file contains entries that consist of a netmask
.\"O and a network pair separated by white spaces.
.\"O Lines starting with ``#'' are considered to be comments.
いったんドメインネームがわかってしまうと、リモートユーザーは誰でも
.B ypserv
への RPC を発行して、 NIS マップの内容を入手できてしまう。
このような、本来許可されるべきでないトランザクションを防ぐために、
.B ypserv
では
.B securenets
という機能をサポートしており、指定されたホスト以外からのアクセスを
制限できるようになっている。起動時や SIGHUP シグナルを受けた時に、
.B ypserv
は
.B /var/yp/securenets
というファイルから securenets 情報をロードしようと試みる。
このファイルにはネットワークとネットマスクの組を、スペースで
区切ったものが指定されている。``#'' で始まる行はコメントと
みなされる。
.TP
.\"O A sample securenets file might look like this:
以下に securenets ファイルの簡単な例を示す。

# allow connections from local host -- necessary
.br
host 127.0.0.1
.br
# same as 255.255.255.255 127.0.0.1
.br
#
.br
# allow connections from any host
.br
# on the 131.234.223.0 network
.br
255.255.255.0   131.234.223.0
.br
# allow connections from any host
.br
# between 131.234.214.0 and 131.234.215.255
.br
255.255.254.0   131.234.214.0
.LP
.\"O If
.\"O .B ypserv
.\"O receives a request from an address that fails to match a rule,
.\"O the request will be ignored and a warning message will be
.\"O logged. If the
.\"O .B /var/yp/securenets
.\"O file does not exist,
.\"O .B ypserv
.\"O will allow connections from any host.
.B ypserv
がルールにマッチしなかったアドレスからの要求を受け取ると、
その要求は無視され、警告メッセージがログに記録される。
.B /var/yp/securentes
ファイルが存在しない場合には、
.B ypserv
はすべてのホストからの接続を許可する。
.LP
.\"O In the
.\"O .B /etc/ypserv.conf
.\"O you could specify some access rules for special maps and hosts. But
.\"O it is not very secure, it makes the life only a little bit harder
.\"O for a potential hacker. If a mapname doesn't match a rule, ypserv will
.\"O look for the YP_SECURE key in the map. If it exists, ypserv will
.\"O only allow requests on a reserved port.
.B /etc/ypserv.conf
に、特殊なマップやホストに対するアクセスルールを指定することもできる。
しかしこれは必ずしも安全ではなく、クラッカーからのアタックを多少面倒に
させるだけにすぎない。 mapname がルールにマッチしないと、
.B ypserv
はそのマップの YPSECURE キーを見る。キーが存在すれば、
.B ypserv
は特権ポートからの要求以外を許可しない。

.\"O For security reasons, ypserv will only accept ypproc_xfr requests for
.\"O updating maps from the same master server as the old one. This means,
.\"O you have to reinstall the slave servers if you change the master server
.\"O for a map.
セキュリティ上の理由から、
.B ypserv
はマップ更新のために用いられる ypproc_xfr 要求を、以前と同じ
マスターサーバーからしか受けつけない。つまり、あるマップに対する
マスターサーバを変更するには、スレーブサーバーは
再インストールする必要がある。
.\"O .SH FILES
.SH ファイル
/etc/ypserv.conf
/var/yp/securenets
.\"O .SH "SEE ALSO"
.SH 関連項目
.BR domainname (1),
.BR ypcat (1),
.BR ypmatch (1),
.BR ypserv.conf (5),
.BR netgroup (5),
.BR makedbm (8),
.BR revnetgroup (8),
.BR ypinit (8),
.BR yppoll (8),
.BR yppush (8),
.BR ypset (8),
.BR ypwhich (8),
.BR ypxfr (8),
.BR rpc.ypxfrd (8)
.LP
.\"O The Network Information Service
.\"O (\s-1NIS\s0)
.\"O was formerly known as Sun Yellow Pages
.\"O (\s-1YP\s0).
.\"O The functionality of the two remains the same;
.\"O only the name has changed.
.\"O The name Yellow Pages is a registered trademark in the United Kingdom
.\"O of British Telecommunications plc,
.\"O and may not be used without permission.
Network Information Service
(\s-1NIS\s0)
は、以前は Sun Yellow Pages
(\s-1YP\s0).
と呼ばれていた。
この両者の機能はまったく同じものであり、名前が違うだけである。
Yellow Pages という名前は、英国で
British Telecommunications plc の登録商標となっており、
許可を得ずに用いることはできない。
.\"O .SH AUTHOR
.SH 著者
.\"O .B ypserv
.\"O was written by Peter Eriksson <pen@lysator.liu.se>.
.\"O Thorsten Kukuk <kukuk@suse.de> added support for master/slave
.\"O server and is the new Maintainer.
.B ypserv
は Peter Eriksson <pen@lysator.liu.se> によって書かれた。
Thorsten Kukuk <kukuk@suse.de> がマスター/スレーブサーバの
サポートを追加し、現在のメンテナンスを行っている。
