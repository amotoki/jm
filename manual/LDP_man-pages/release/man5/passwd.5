.\" Copyright (c) 1993 Michael Haardt (michael@moria.de),
.\"     Fri Apr  2 11:32:09 MET DST 1993
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111,
.\" USA.
.\"
.\" Modified Sun Jul 25 10:46:28 1993 by Rik Faith (faith@cs.unc.edu)
.\" Modified Sun Aug 21 18:12:27 1994 by Rik Faith (faith@cs.unc.edu)
.\" Modified Sun Jun 18 01:53:57 1995 by Andries Brouwer (aeb@cwi.nl)
.\" Modified Mon Jan  5 20:24:40 MET 1998 by Michael Haardt
.\"  (michael@cantor.informatik.rwth-aachen.de)
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH PASSWD 5 2012\-02\-14 Linux "Linux Programmer's Manual"
.SH 名前
passwd \- パスワードファイル
.SH 説明
\fI/etc/passwd\fP ファイルは、そのシステムのユーザのログインアカウントリス
トを記述したテキストファイルである。パスワードファイルの読み出し許可は
全ユーザーに対して与えるが(\fIls\fP(1) 等の多くのユーティリティではユーザー
ID をユーザー名に 対応させるのに \fBpasswd\fP ファイルを使用する)、書き込
み許可はスーパーユーザーにのみ与えるようにすべきである。
.PP
古き良き時代には、この全ユーザーに対する読み取り許可は 特別な問題を起こ
さなかった。誰でも暗号化されたパスワードを 読むことが出来たが、上手に選
ばれたパスワードを破るのには 当時のハードウェアの速度はあまりに遅かった
し、それに加えて 友好的なユーザー社会であることを基本的な前提としていた。
最近では多くの人が、何らかのバージョンの shadow password suite
(シャドウ・パスワード機能を実現するためのプログラム群) を動かしている。
その場合 \fI/etc/passwd\fP ファイルのパスワード欄には
\(aqx\(aq 文字が設定され、暗号化されたパスワードは
\fI/etc/shadow\fP ファイルに保持される。 \fI/etc/shadow\fP ファイルはスーパー
ユーザーだけが読み出すことができる。
.PP
shadow password が使われているかどうかにはよらず、多くのシステム管理者は、
暗号化パスワード欄にアスタリスク (*) を設定することで、そのユーザーが
パスワードでの認証が受けられないようにしている (下記の「注意」の項を参照)。
.PP
新しいユーザーを登録する場合には、パスワード欄にアスタリスク (*) を設定しておき、
\fBpasswd\fP(1) コマンドにより設定を行うようにすること。
.PP
ファイルの 1 行が 1 ユーザの情報を表し、書式は以下の通りである。
.sp
.RS
account:password:UID:GID:GECOS:directory:shell
.RE
.sp
各フィールドは以下の通りである:
.TP  12
\fIaccount\fP
そのシステムでのユーザー名。大文字を含まないようにする。
.TP 
\fIpassword\fP
ユーザーの暗号化されたパスワード、アスタリスク、または文字 \(aqx\(aq (\(aqx\(aq の説明については \fBpwconv\fP(8)
を参照)。
.TP 
\fIUID\fP
ユーザー ID 番号。
.TP 
\fIGID\fP
ユーザーが属するプライマリグループ ID 番号。
.TP 
\fIGECOS\fP
本欄は省略可能で、情報提供の目的のみに使われる。ユーザーのフルネームを
設定することが多い。GECOS は General Electric Comprehensive Operating
System を意味しており、GE 社の大規模システム部門が Honeywell 社に売却さ
れた際に GCOS へと変更された。Dennis Ritchie 氏は次のように言っている:
「時々プリンタ出力や、バッチジョブを GCOS マシンに送ったりするが、 パ
スワードファイルの gcos 欄は $IDENT カード用の情報を 隠しておくための場
所なんだ。まるっきりエレガントじゃない。」
.TP 
\fIdirectory\fP
ユーザーの \fB$HOME\fP ディレクトリ。
.TP 
\fIshell\fP
ログイン時に動くプログラム名 (空欄の場合 \fI/bin/sh\fP が使われる)。 存在しない実行プログラムが設定された場合、 \fBlogin\fP(1)
によるシステムへのログインはできなくなる。
.SH ファイル
\fI/etc/passwd\fP
.SH 注意
ユーザーグループを作りたい場合には、そのグループが \fI/etc/group\fP の中に
定義されていなければならない。そうしないとグループを作ったことにはならない。
.PP
暗号化パスワードとしてアスタリスク (*) を設定すると、 \fBlogin\fP(1) を
使ってのログインができなくなるが、 \fBrlogin\fP(1) ではまだログインができるし、
\fBrsh\fP(1), \fBcron\fP(8), \fBat\fP(1) やメールのフィルタ等を使い、現存するプロセスを
実行させたり、新たなプロセスを起動したりすることができる。
使用する shell の欄を、単に変更することでアカウントを 使えないようにする
のも同様の結果となる。その場合にはさらに \fBsu\fP(1) も有効なまま残ってしまう。
.SH 関連項目
\fBlogin\fP(1), \fBpasswd\fP(1), \fBsu\fP(1), \fBgetpwent\fP(3), \fBgetpwnam\fP(3),
\fBgroup\fP(5), \fBshadow\fP(5)
