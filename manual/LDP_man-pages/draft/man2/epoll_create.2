.\"
.\"  epoll by Davide Libenzi ( efficient event notification retrieval )
.\"  Copyright (C) 2003  Davide Libenzi
.\"
.\"  This program is free software; you can redistribute it and/or modify
.\"  it under the terms of the GNU General Public License as published by
.\"  the Free Software Foundation; either version 2 of the License, or
.\"  (at your option) any later version.
.\"
.\"  This program is distributed in the hope that it will be useful,
.\"  but WITHOUT ANY WARRANTY; without even the implied warranty of
.\"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\"  GNU General Public License for more details.
.\"
.\"  You should have received a copy of the GNU General Public License
.\"  along with this program; if not, write to the Free Software
.\"  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
.\"
.\"  Davide Libenzi <davidel@xmailserver.org>
.\"
.\" Modified 2004-06-17 by Michael Kerrisk <mtk.manpages@gmail.com>
.\" Modified 2005-04-04 by Marko Kohtala <marko.kohtala@gmail.com>
.\" 2008-10-10, mtk: add description of epoll_create1()
.\"
.\" Japanese Version Copyright (c) 2004-2005 Yuichi SATO
.\"         all rights reserved.
.\" Translated Wed Jun  9 05:02:07 JST 2004
.\"         by Yuichi SATO <ysato444@yahoo.co.jp>
.\" Updated & Modified Wed Dec 29 07:12:00 JST 2004 by Yuichi SATO
.\" Updated & Modified Tue Apr 19 06:51:12 JST 2005 by Yuichi SATO
.\" Updated 2009-03-05 by Kentaro Shirakata <argrath@ub32.org>
.\"
.\"WORD:	backing store	バッキングストア
.\"
.TH EPOLL_CREATE 2 2009-01-17 "Linux" "Linux Programmer's Manual"
.\"O .SH NAME
.SH 名前
.\"O epoll_create, epoll_create1 \- open an epoll file descriptor
epoll_create, epoll_create1 \- epoll ファイルディスクリプタをオープンする
.\"O .SH SYNOPSIS
.SH 書式
.nf
.B #include <sys/epoll.h>
.sp
.BI "int epoll_create(int " size );
.BI "int epoll_create1(int " flags );
.fi
.\"O .SH DESCRIPTION
.SH 説明
.\"O .BR epoll_create ()
.\"O creates an epoll "instance",
.\"O requesting the kernel to allocate an event backing store dimensioned for
.\"O .I size
.\"O descriptors.
.\"O The
.\"O .I size
.\"O is not the maximum size of the backing store but
.\"O just a hint to the kernel about how to dimension internal structures.
.BR epoll_create ()
は、
.I size
個のディスクリプタを保持できる大きさのイベントバッキング
ストアの割り当てをカーネルに対して要求することにより、
epoll 「インスタンス」を作成する。
.I size
はバッキングストアの最大サイズではなく、
内部構造の大きさをどの位にするかをカーネルに知らせるヒントでしかない。
.\"O (Nowadays,
.\"O .I size
.\"O is ignored; see NOTES below.)
(現在は
.I size
は無視される。下記の「注意」を参照。)

.\"O .BR epoll_create ()
.\"O returns a file descriptor referring to the new epoll instance.
.\"O This file descriptor is used for all the subsequent calls to the
.\"O .B epoll
.\"O interface.
.\"O When no longer required, the file descriptor returned by
.\"O .BR epoll_create ()
.\"O should be closed by using
.\"O .BR close (2).
.BR epoll_create ()
は、新しい epoll インスタンスを参照するファイルディスクリプタを返す。
このファイルディスクリプタは、その後の
.B epoll
インタフェースの呼び出しに使われる。
もう必要でなくなった場合は、
.BR epoll_create ()
で返されたファイルディスクリプタは
.BR close (2)
を使ってクローズされるべきである。
.\"O When all file descriptors referring to an epoll instance have been closed,
.\"O the kernel destroys the instance
.\"O and releases the associated resources for reuse.
ある epoll インスタンスを参照する全てのファイルディスクリプタがクローズされると、
カーネルはそのインスタンスを破壊して、対応するリソースを解放し、
再使用できるようにする。

.\"O If
.\"O .I flags
.\"O is 0, then, other than the fact that the obsolete
.\"O .I size
.\"O argument is dropped,
.\"O .BR epoll_create1 ()
.\"O is the same as
.\"O .BR epoll_create ().
.\"O The following value can be included in
.\"O .IR flags
.\"O to obtain different behavior:
.BR epoll_create1 ()
は、
.I flags
が 0 の場合、現在では使われていない
.I size
引き数がなくなっている点を除けば
.BR epoll_create ()
と同じである。
.I flags
に以下の値をビット毎の論理和 (OR) で指定することで、
異なる動作をさせることができる。
.TP
.B EPOLL_CLOEXEC
.\"O Set the close-on-exec
.\"O .RB ( FD_CLOEXEC )
.\"O flag on the new file descriptor.
.\"O See the description of the
.\"O .B O_CLOEXEC
.\"O flag in
.\"O .BR open (2)
.\"O for reasons why this may be useful.
新しいファイルディスクリプタに対して
close-on-exec
.RB ( FD_CLOEXEC )
フラグをセットする。
このフラグが役に立つ理由については、
.BR open (2)
の
.B O_CLOEXEC
フラグの説明を参照のこと。
.\"O .SH "RETURN VALUE"
.SH 返り値
.\"O On success,
.\"O these system calls
.\"O return a nonnegative file descriptor.
成功すると、これらのシステムコールは
非負のファイルディスクリプタを返す。
.\"O On error, \-1 is returned, and
.\"O .I errno
.\"O is set to indicate the error.
エラーの場合、\-1 を返し、
.I errno
にエラーを示す値を設定する。
.\"O .SH ERRORS
.SH エラー
.TP
.B EINVAL
.\"O .I size
.\"O is not positive.
.I size
が正でない。
.TP
.B EINVAL
.\"O .RB ( epoll_create1 ())
.\"O Invalid value specified in
.\"O .IR flags .
.RB ( epoll_create1 ())
.I flags
に無効な値が指定された。
.TP
.B EMFILE
.\"O The per-user limit on the number of epoll instances imposed by
.\"O .I /proc/sys/fs/epoll/max_user_instances
.\"O was encountered.
.\"O See
.\"O .BR epoll (7)
.\"O for further details.
.I /proc/sys/fs/epoll/max_user_instances
によって指定されている、epoll インスタンスのユーザー単位の制限に達した。
更なる詳細については
.BR epoll (7)
を参照のこと。
.TP
.B ENFILE
.\"O The system limit on the total number of open files has been reached.
オープンされたファイルの総数がシステム制限に達した。
.TP
.B ENOMEM
.\"O There was insufficient memory to create the kernel object.
カーネルオブジェクトを作成するのに十分なメモリがなかった。
.\"O .SH CONFORMING TO
.SH 準拠
.\"O .BR epoll_create ()
.\"O is Linux-specific, and was introduced in kernel 2.5.44.
.BR epoll_create ()
は Linux 独自であり、カーネル 2.5.44 で導入された。
.\"O .\" The interface should be finalized by Linux kernel 2.5.66.
.\" インタフェースは Linux カーネル 2.5.66 で確定されるべきである。
.\"O .SH NOTES
.SH 注意
.\"O Since Linux 2.6.8, the
.\"O .I size
.\"O argument is unused.
.\"O (The kernel dynamically sizes the required data structures
.\"O without needing this initial hint.)
Linux 2.6.8 以降では、
.I size
引き数は使用されない
(カーネルは、動的に必要なデータ構造の大きさを決定し、
最初のヒントを必要しない)。
.\"O .SH "SEE ALSO"
.SH 関連項目
.BR close (2),
.BR epoll_ctl (2),
.BR epoll_wait (2),
.BR epoll (7)
