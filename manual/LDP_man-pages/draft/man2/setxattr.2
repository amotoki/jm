.\"
.\" Extended attributes system calls manual pages
.\"
.\" Copyright (C) Andreas Gruenbacher, February 2001
.\" Copyright (C) Silicon Graphics Inc, September 2001
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111,
.\" USA.
.\"
.\" Japanese Version Copyright (c) 2003  Akihiro MOTOKI
.\"         all rights reserved.
.\" Translated Tue Jul  8 04:43:40 JST 2003
.\"         by Akihiro MOTOKI <amotoki@dd.iij4u.or.jp>
.\"
.\"WORD:	extended attributes	拡張属性
.\"WORD:	namespace		名前空間
.\"
.TH SETXATTR 2 2001-12-31 "Linux" "Linux Programmer's Manual"
.\"O .SH NAME
.\"O setxattr, lsetxattr, fsetxattr \- set an extended attribute value
.SH 名前
setxattr, lsetxattr, fsetxattr \- 拡張属性の値を設定する
.\"O .SH SYNOPSIS
.SH 書式
.fam C
.nf
.B #include <sys/types.h>
.B #include <attr/xattr.h>
.sp
.BI "int setxattr(const char\ *" path ", const char\ *" name ,
.BI "              const void\ *" value ", size_t " size ", int " flags );
.BI "int lsetxattr(const char\ *" path ", const char\ *" name ,
.BI "              const void\ *" value ", size_t " size ", int " flags );
.BI "int fsetxattr(int " fd ", const char\ *" name ,
.BI "              const void\ *" value ", size_t " size ", int " flags );
.fi
.fam T
.\"O .SH DESCRIPTION
.SH 説明
.\"O Extended attributes are
.\"O .IR name :\c
.\"O .I value
.\"O pairs associated with inodes (files, directories, symbolic links, etc.).
.\"O They are extensions to the normal attributes which are associated
.\"O with all inodes in the system (i.e., the
.\"O .BR stat (2)
.\"O data).
.\"O A complete overview of extended attributes concepts can be found in
.\"O .BR attr (5).
拡張属性は、inode (ファイル、ディレクトリ、シンボリックリンク等) に
関連付けられた
.IR name :\c
.I value
の対である。
これらは、システム上のすべての inode に関連付けられた通常の属性
.RB ( stat (2)
が返すデータ) を拡張するものである。
拡張属性のコンセプトは
.BR attr (5)
に書かれている。
.PP
.\"O .BR setxattr ()
.\"O sets the
.\"O .I value
.\"O of the extended attribute identified by
.\"O .I name
.\"O and associated with the given
.\"O .I path
.\"O in the file system.
.\"O The
.\"O .I size
.\"O of the
.\"O .I value
.\"O must be specified.
.BR setxattr ()
は、ファイルシステム内の指定された
.I path
に対応する、名前
.I name
の拡張属性の値
.I value
を設定する。
.I value
の
.I size
は必ず指定しなければならない。
.PP
.\"O .BR lsetxattr ()
.\"O is identical to
.\"O .BR setxattr (),
.\"O except in the case of a symbolic link, where the extended attribute is
.\"O set on the link itself, not the file that it refers to.
.BR lsetxattr ()
は
.BR setxattr ()
と同じだが、シンボリックリンクの場合に、リンクが参照しているファイル
ではなく、リンクそのものの拡張属性を設定する点だけが異なる。
.PP
.\"O .BR fsetxattr ()
.\"O is identical to
.\"O .BR setxattr (),
.\"O only the extended attribute is set on the open file referred to by
.\"O .I fd
.\"O (as returned by
.\"O .BR open (2))
.\"O in place of
.\"O .IR path .
.BR fsetxattr ()
は
.BR setxattr ()
と同じだが、
.I path
の代わりに
.I fd
で参照されたオープン済みファイルの情報だけを設定する点が異なる
.RI ( filedes
は
.BR open (2)
によって返される)。
.PP
.\"O An extended attribute name is a simple null-terminated string.
.\"O The
.\"O .I name
.\"O includes a namespace prefix; there may be several, disjoint
.\"O namespaces associated with an individual inode.
.\"O The
.\"O .I value
.\"O of an extended attribute is a chunk of arbitrary textual or
.\"O binary data of specified length.
拡張属性の名前
は普通の NULL 終端された文字列である。
.I name
には、名前空間を表す接頭辞 (prefix) が含まれる。
個々の inode に対して、互いに独立な名前空間が複数あってもよい。
拡張属性の値
.I value
は、ある一定の長さの任意のテキスト・データまたは
バイナリ・データの集合である。
.PP
.\"O The
.\"O .I flags
.\"O argument can be used to refine the semantics of the operation.
操作の意味を明確にするために
.I flags
引き数を使用することができる。
.\"O .B XATTR_CREATE
.\"O specifies a pure create, which fails if the named
.\"O attribute exists already.
.B XATTR_CREATE
は属性の作成だけを行うことを指定する。
指定された名前の属性がすでに存在する場合は失敗する。
.\"O .B XATTR_REPLACE
.\"O specifies a pure replace operation, which fails if the
.\"O named attribute does not already exist.
.B XATTR_REPLACE
は属性の置換だけを行うことを指定する。
指定された名前の属性がまだ存在しない場合は失敗する。
.\"O By default (no flags), the extended attribute will be created if
.\"O need be, or will simply replace the value if the attribute exists.
デフォルトでは (フラグを指定しない場合)、拡張属性は必要な場合は作成され、
属性がすでに存在する場合は属性値の置換を行う。
.\"O .SH RETURN VALUE
.SH 返り値
.\"O On success, zero is returned.
.\"O On failure, \-1 is returned and
.\"O .I errno
.\"O is set appropriately.
成功した場合、 0 が返される。
失敗した場合、 \-1 が返され、
.I errno
に適切な値がセットされる。
.PP
.\"O If
.\"O .B XATTR_CREATE
.\"O is specified, and the attribute exists already,
.\"O .I errno
.\"O is set to
.\"O .BR EEXIST .
.B XATTR_CREATE
が指定され、かつ属性がすでに存在する場合、
.I errno
に
.B EEXIST
がセットされる。
.\"O If
.\"O .B XATTR_REPLACE
.\"O is specified, and the attribute does not exist,
.\"O .I errno
.\"O is set to
.\"O .BR ENOATTR .
.B XATTR_REPLACE
が指定され、属性がまだ存在しない場合、
.I errno
に
.B ENOATTR
がセットされる。
.PP
.\"O If there is insufficient space remaining to store the extended attribute,
.\"O .I errno
.\"O is set to either
.\"O .BR ENOSPC ,
.\"O or
.\"O .B EDQUOT
.\"O if quota enforcement was the cause.
拡張属性を記憶するのに十分なスペースが残っていない場合、
.I errno
に
.B ENOSPC
または
.B EDQUOT
(quota による制限が原因の場合) がセットされる。
.PP
.\"O If extended attributes are not supported by the file system, or are disabled,
.\"O .I errno
.\"O is set to
.\"O .BR ENOTSUP .
拡張属性がそのファイルシステムでサポートされていない場合、
もしくは無効になっている場合、
.I errno
に
.B ENOTSUP
がセットされる。
.PP
.\"O The errors documented for the
.\"O .BR stat (2)
.\"O system call are also applicable here.
.BR stat (2)
システムコールの説明に書かれているエラーは
これらのシステムコールにも適用される。
.\"O .SH VERSIONS
.SH バージョン
.\"O These system calls have been available on Linux since kernel 2.4;
.\"O glibc support is provided since version 2.3.
これらのシステムコールはカーネル 2.4 以降の Linux で利用できる。
glibc でのサポートはバージョン 2.3 以降で行われている。
.\"O .SH "CONFORMING TO"
.SH 準拠
.\"O These system calls are Linux-specific.
これらのシステムコールは Linux 独自である。
.\"O .\" .SH AUTHORS
.\" .SH 著者
.\"O .\" Andreas Gruenbacher,
.\"O .\" .RI < a.gruenbacher@computer.org >
.\"O .\" and the SGI XFS development team,
.\"O .\" .RI < linux-xfs@oss.sgi.com >.
.\"O .\" Please send any bug reports or comments to these addresses.
.\" Andreas Gruenbacher,
.\" .RI < a.gruenbacher@computer.org >
.\" と SGI XFS 開発チーム,
.\" .RI < linux-xfs@oss.sgi.com >。
.\" バグレポートやコメントは上記のアドレスまで送って下さい。
.\"O .SH SEE ALSO
.SH 関連項目
.BR getfattr (1),
.BR setfattr (1),
.BR getxattr (2),
.BR listxattr (2),
.BR open (2),
.BR removexattr (2),
.BR stat (2),
.BR attr (5),
.BR symlink (7)
