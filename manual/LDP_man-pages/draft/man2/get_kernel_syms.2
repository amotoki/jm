.\" Copyright (C) 1996 Free Software Foundation, Inc.
.\" This file is distributed according to the GNU General Public License.
.\" See the file COPYING in the top level source directory for details.
.\"
.\" 2006-02-09, some reformatting by Luc Van Oostenryck; some
.\" reformatting and rewordings by mtk
.\"
.\" Japanese Version Copyright (c) 2006 Akihiro MOTOKI all rights reserved.
.\" Translated 2006-07-31, Akihiro MOTOKI <amotoki@dd.iij4u.or.jp>
.\"
.TH GET_KERNEL_SYMS 2 2007-06-03 "Linux" "Linux Programmer's Manual"
.\"O .SH NAME
.SH 名前
.\"O get_kernel_syms \- retrieve exported kernel and module symbols
get_kernel_syms \- 公開されているカーネルやモジュールのシンボルの取得
.\"O .SH SYNOPSIS
.SH 書式
.nf
.B #include <linux/module.h>
.sp
.BI "int get_kernel_syms(struct kernel_sym *" table );
.fi
.\"O .SH DESCRIPTION
.SH 説明
.\"O If
.\"O .I table
.\"O is NULL,
.\"O .BR get_kernel_syms ()
.\"O returns the number of symbols available for query.
.\"O Otherwise it fills in a table of structures:
.BR get_kernel_syms ()
は、
.I table
が NULL の場合、
問い合わせできるシンボルの数を返す。
NULL 以外の場合、以下の構造体の列 (table) に値を入れて返す。
.PP
.in +4n
.nf
struct kernel_sym {
    unsigned long value;
    char          name[60];
};
.fi
.in
.PP
.\"O The symbols are interspersed with magic symbols of the form
.\"O .BI # module-name
.\"O with the kernel having an empty name.
.\"O The value associated with a symbol of this form is the address at
.\"O which the module is loaded.
シンボルの中には、
.BI # module-name
という形式の、カーネルが空の名前を持っているマジックシンボル
(magic symbol) が散在している。この形式のシンボルに対応する値は
モジュールがロードされたアドレスとなる。
.PP
.\"O The symbols exported from each module follow their magic module tag
.\"O and the modules are returned in the reverse of the
.\"O order in which they were loaded.
個々のモジュールから公開 (export) されたシンボルは、マジックモジュールタグ
の後ろに置かれる。また、モジュールはロードされた順番とは逆順で返される。
.\"O .SH "RETURN VALUE"
.SH 返り値
.\"O On success, returns the number of symbols copied to
.\"O .IR table .
.\"O On error, \-1 is returned and
.\"O .I errno
.\"O is set appropriately.
成功すると、
.I table
にコピーされたシンボル数を返す。
エラーの場合、\-1 を返し、
.I errno
を適切に設定する。
.\"O .SH ERRORS
.SH エラー
.\"O There is only one possible error return:
返る可能性があるエラーは一つだけである。
.TP
.B ENOSYS
.\"O .BR get_kernel_syms ()
.\"O is not supported in this version of the kernel.
.BR get_kernel_syms ()
がこのバージョンのカーネルではサポートされていない。
.\"O .SH VERSIONS
.SH バージョン
.\"O This system call is only present on Linux up until kernel 2.4;
.\"O it was removed in Linux 2.6.
このシステムコールが存在するのはカーネル 2.4 までの Linux だけである。
Linux 2.6 では削除された。
.\" Removed in Linux 2.5.48
.\"O .SH "CONFORMING TO"
.SH 準拠
.\"O .BR get_kernel_syms ()
.\"O is Linux-specific.
.BR get_kernel_syms ()
は Linux 固有である。
.\"O .SH BUGS
.SH バグ
.\"O There is no way to indicate the size of the buffer allocated for
.\"O .IR table .
.\"O If symbols have been added to the kernel since the
.\"O program queried for the symbol table size, memory will be corrupted.
.I table
用に確保したバッファの大きさを伝える方法がない。
プログラムがシンボルテーブルの大きさを問い合わせた後に、カーネルに
シンボルが追加されると、メモリの内容が破壊されることになる。
.PP
.\"O The length of exported symbol names is limited to 59 characters.
公開されるシンボル名の長さが 59 文字に制限されている。
.PP
.\"O Because of these limitations, this system call is deprecated in
.\"O favor of
.\"O .BR query_module (2)
.\"O (which is itself nowadays deprecated
.\"O in favor of other interfaces described on its manual page).
これらの制限があるので、このシステムコールを使うよりは
.BR query_module (2)
を使うのが望ましい
(現在では
.BR query_module (2)
自身もそのマニュアルページに書かれているように
他のインタフェースを使うのが望ましいとされている)。
.\"O .SH "SEE ALSO"
.SH 関連項目
.BR create_module (2),
.BR delete_module (2),
.BR init_module (2),
.BR query_module (2)
