.\" Contributed by Niki A. Rahimi, LTC Security Development
.\" narahimi@us.ibm.com
.\" May be freely distributed.
.\"
.\" Japanese Version Copyright (c) 2004 Yuichi SATO
.\"         all rights reserved.
.\" Translated Sat Jun 19 17:51:11 JST 2004
.\"         by Yuichi SATO <ysato444@yahoo.co.jp>
.\"
.TH PCICONFIG_READ 2 2003-07-14 "Linux" "Linux Programmer's Manual"
.\"O .SH NAME
.SH 名前
.\"O pciconfig_read, pciconfig_write, pciconfig_iobase \- pci device information handling
pciconfig_read, pciconfig_write, pciconfig_iobase \- pci デバイス情報を扱う
.\"O .SH SYNOPSIS
.SH 書式
.nf
.B #include <pci.h>
.sp
.BI "int pciconfig_read(unsigned long " bus ", unsigned long " dfn ,
.BI "          unsigned long " off ", unsigned long " len ", void *" buf );
.BI "int pciconfig_write(unsigned long " bus ", unsigned long " dfn ,
.BI "          unsigned long " off ", unsigned long " len ", void *" buf );
.BI "int pciconfig_iobase(long " which ", unsigned long " bus ,
.BI "          unsigned long " devfn );
.fi
.\"O .SH DESCRIPTION
.SH 説明
.PP
.\"O Most of the interaction with PCI devices is already handled by the
.\"O kernel PCI layer,
.\"O and thus these calls should not normally need to be accessed from userspace.
PCI デバイスとのやり取り (interaction) は
カーネル PCI レイヤですでに処理されているので、
通常はこららの関数をユーザ空間からアクセスする必要はない。
.TP
.BR pciconfig_read ()
.\"O Reads to
.\"O .I buf
.\"O from device
.\"O .I dev
.\"O at offset
.\"O .I off
.\"O value.
デバイス
.I dev
のオフセット
.I off
の値を
.I buf
に読み込む。
.TP
.BR pciconfig_write ()
.\"O Writes from
.\"O .I buf
.\"O to device
.\"O .I dev
.\"O at offset
.\"O .I off
.\"O value.
デバイス
.I dev
のオフセット
.I off
に
.I buf
の値を書き込む。
.TP
.BR pciconfig_iobase ()
.\"O You pass it a bus/devfn pair and get a physical address for either the
.\"O memory offset (for things like prep, this is 0xc0000000),
.\"O the IO base for PIO cycles, or the ISA holes if any.
.\"Osato:
.\"Osato: prep は PowerPC Reference Platform のことか。
.\"Osato: PIO cycles は memory offset にもかかるのか。
.\"Osato: if any はどこまでかかるのか。
.\"Osato:
bus/devfn ペアをこの関数に渡し、
メモリオフセット (prep のようなものでは、この値は 0xc0000000 である) と
PIO サイクルの IO ベースの物理アドレスを取得する。
また、もしあるならば ISA hole の物理アドレスを取得する。
.\"O .SH "RETURN VALUE"
.SH 返り値
.TP
.BR pciconfig_read ()
.\"O On success zero is returned.
.\"O On error, \-1 is returned and
.\"O .I errno
.\"O is set appropriately.
成功した場合、0 が返される。
エラーの場合、\-1 が返され、
.I errno
が適切に設定される。
.TP
.BR pciconfig_write ()
.\"O On success zero is returned.
.\"O On error, \-1 is returned and
.\"O .I errno
.\"O is set appropriately.
成功した場合、0 が返される。
エラーの場合、\-1 が返され、
.I errno
が適切に設定される。
.TP
.BR pciconfig_iobase ()
.\"O Returns information on locations of various I/O
.\"O regions in physical memory according to the
.\"O .I which
.\"O value.
.\"O Values for
.\"O .I which
.\"O are:
.\"O .BR IOBASE_BRIDGE_NUMBER ,
.\"O .BR IOBASE_MEMORY ,
.\"O .BR IOBASE_IO ,
.\"O .BR IOBASE_ISA_IO ,
.\"O .BR IOBASE_ISA_MEM .
.I which
の値に基づいて、物理メモリ内の様々な I/O 領域の位置情報が返される。
.I which
の値は、
.BR IOBASE_BRIDGE_NUMBER ,
.BR IOBASE_MEMORY ,
.BR IOBASE_IO ,
.BR IOBASE_ISA_IO ,
.B IOBASE_ISA_MEM
である。
.\"O .SH ERRORS
.SH エラー
.TP
.B EINVAL
.\"O .I len
.\"O value is invalid.
.\"O This does not apply to
.\"O .BR pciconfig_iobase ().
.I len
の値が無効である。
このエラーは
.BR pciconfig_iobase ()
には適用されない。
.TP
.B EIO
.\"O I/O error.
I/O エラー。
.TP
.B ENODEV
.\"O For
.\"O .BR pciconfig_iobase (),
.\"O "hose" value is NULL.
.\"O For the other calls, could not find a slot.
.BR pciconfig_iobase ()
の場合、でホース (hose) の値が NULL である。
他の呼び出しの場合、スロット (slot) が見つからない。
.TP
.B ENOSYS
.\"O The system has not implemented these calls
.\"O .RB ( CONFIG_PCI
.\"O not defined).
このシステムはこれらの呼び出しを実装していない。
.RB ( CONFIG_PCI
が定義されていない)。
.TP
.B EOPNOTSUPP
.\"O This return value is only valid for
.\"O .BR pciconfig_iobase ().
この返り値は
.BR pciconfig_iobase ()
でのみ有効である。
.\"O It is returned if the value for
.\"O .I which
.\"O is invalid.
このエラーは
.I which
の値が無効であるときに返される。
.TP
.B EPERM
.\"O User does not have the \fBCAP_SYS_ADMIN\fP capability.
.\"O This does not apply to
.\"O .BR pciconfig_iobase ().
ユーザが
.B CAP_SYS_ADMIN
権限を持っていない。
このエラーは
.BR pciconfig_iobase ()
には適用されない。
.\"O .SH "CONFORMING TO"
.SH 準拠
.\"O These calls are Linux-specific, available since Linux 2.0.26/2.1.11.
これらの呼び出しは Linux 特有のものであり、
Linux 2.0.26/2.1.11 から使用可能である。
.\"O .SH "SEE ALSO"
.SH 関連項目
.BR capabilities (7)
