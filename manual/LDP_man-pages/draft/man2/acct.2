.\" Hey Emacs! This file is -*- nroff -*- source.
.\"
.\" Copyright (c) 1993 Michael Haardt
.\" (michael@moria.de),
.\" Fri Apr  2 11:32:09 MET DST 1993
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111,
.\" USA.
.\"
.\" Modified 1993-07-22 by Rik Faith <faith@cs.unc.edu>
.\" Modified 1993-08-10 by Alan Cox <iiitac@pyramid.swansea.ac.uk>
.\" Modified 1998-11-04 by Tigran Aivazian <tigran@sco.com>
.\" Modified 2004-05-27, 2004-06-17, 2004-06-23 by Michael Kerrisk
.\"
.\" Japanese Version Copyright (c) 1997 HANATAKA Shinya
.\"         all rights reserved.
.\" Translated 1997-02-22, HANATAKA Shinya <hanataka@abyss.rim.or.jp>
.\" Modified 1998-11-30, HANATAKA Shinya <hanataka@abyss.rim.or.jp>
.\" Updated and Modified 2001-06-02, Yuichi SATO <ysato@h4.dion.ne.jp>
.\" Updated and Modified 2001-10-15, Yuichi SATO
.\" Updated and Modified 2004-12-28, Yuichi SATO <ysato444@yahoo.co.jp>
.\" Updated 2008-08-04, Akihiro MOTOKI <amotoki@dd.iij4u.or.jp>
.\"
.\"WORD:	account			アカウント
.\"WORD:	process			プロセス
.\"
.TH ACCT 2 2008-06-16 "Linux" "Linux Programmer's Manual"
.\"O .SH NAME
.SH 名前
.\"O acct \- switch process accounting on or off
acct \- プロセス・アカウントのオンとオフを切り換える
.\"O .SH SYNOPSIS
.SH 書式
.ad l
.nf
.B #include <unistd.h>
.sp
.BI "int acct(const char *" filename );
.fi
.ad b
.sp
.in -4n
.\"O Feature Test Macro Requirements for glibc (see
.\"O .BR feature_test_macros (7)):
glibc 向けの機能検査マクロの要件
.RB ( feature_test_macros (7)
参照):
.in
.sp
.BR acct ():
_BSD_SOURCE || (_XOPEN_SOURCE && _XOPEN_SOURCE\ <\ 500)
.\"O .SH DESCRIPTION
.SH 説明
.\"O The
.\"O .BR acct ()
.\"O system call enables or disables process accounting.
.\"O If called with the name of an existing file as its argument,
.\"O accounting is turned on,
.\"O and records for each terminating process are appended to
.\"O \fIfilename\fP as it terminates.
.\"O An argument of NULL causes accounting to be turned off.
.BR acct ()
システムコールは、プロセス・アカウントの有効・無効を切り替える。
既存のファイルの名前を引き数に指定して呼び出されたら、
アカウント (account) が有効になり、
終了したプロセスの記録が \fIfilename\fP に追記される。
NULL を引き数として呼び出されたらアカウントをオフにする。
.\"O .SH "RETURN VALUE"
.SH 返り値
.\"O On success, zero is returned.
.\"O On error, \-1 is returned, and
.\"O .I errno
.\"O is set appropriately.
成功した場合は 0 が返される。エラーの場合は \-1 が返され、
.I errno
が適切に設定される。
.\"O .SH ERRORS
.SH エラー
.TP
.B EACCES
.\"O Write permission is denied for the specified file.
指定したファイルへの書き込み許可がなく、書き込みが拒否された。
.TP
.B EACCES
.\"O Write permission is denied for the specified file,
指定したファイルへの書き込み許可がなく、書き込みが拒否された。
.\"O or search permission is denied for one of the directories
.\"O in the path prefix of
.\"O .I filename
.\"O (see also
.\"O .BR path_resolution (7)),
または
.I filename
のディレクトリ部分の何れかのディレクトリに検索許可がなく拒否された
.RB ( path_resolution (7)
も参照すること)。
.\"O or
.\"O .I filename
.\"O is not a regular file.
または
.I filename
が通常 (regular) のファイルでない。
.TP
.B EFAULT
.\"O .I filename
.\"O points outside your accessible address space.
アクセスできるアドレス空間の外を
.I filename
が指している。
.TP
.B EIO
.\"O Error writing to the file
.\"O .IR filename .
.I filename
への書き込みにエラーが発生した。
.TP
.B EISDIR
.\"O .I filename
.\"O is a directory.
.I filename
がディレクトリである。
.TP
.B ELOOP
.\"O Too many symbolic links were encountered in resolving
.\"O .IR filename .
.I filename
の実体にたどり着くまでのシンボリックリンクの数が多すぎる。
.TP
.B ENAMETOOLONG
.\"O .I filename
.\"O was too long.
.I filename
が長すぎる。
.TP
.B ENFILE
.\"O The system limit on the total number of open files has been reached.
オープンされたファイルの総数がシステム制限に達した。
.TP
.B ENOENT
.\"O The specified filename does not exist.
指定されたファイルが存在しない。
.TP
.B ENOMEM
.\"O Out of memory.
メモリが足りない。
.TP
.B ENOSYS
.\"O BSD process accounting has not been enabled when the operating system
.\"O kernel was compiled.
.\"O The kernel configuration parameter controlling this feature is
.\"O .BR CONFIG_BSD_PROCESS_ACCT .
カーネルをコンパイルした時に BSD プロセス・アカウントが有効になっていない。
この機能はカーネルのコンフィグの
.B CONFIG_BSD_PROCESS_ACCT
パラメータによって制御される。
.TP
.B ENOTDIR
.\"O A component used as a directory in
.\"O .I filename
.\"O is not in fact a directory.
.I filename
の中でディレクトリして扱われている要素が、
実際はディレクトリでない。
.TP
.B EPERM
.\"O The calling process has insufficient privilege to enable process accounting.
呼び出したプロセスにはプロセス・アカウントを有効にするのに十分な特権がない。
.\"O On Linux the
.\"O .B CAP_SYS_PACCT
.\"O capability is required.
Linux では
.B CAP_SYS_PACCT
ケーパビリティ (capability) が必要である。
.TP
.B EROFS
.\"O .I filename
.\"O refers to a file on a read-only file system.
読み込みだけのファイルシステム上のファイルを
.I filename
が参照している。
.TP
.B EUSERS
.\"O There are no more free file structures or we ran out of memory.
使用可能なファイル構造体がないか、メモリが足りない。
.\"O .SH "CONFORMING TO"
.SH 準拠
.\"O SVr4, 4.3BSD (but not POSIX).
.\"O .\" SVr4 documents an EBUSY error condition,
.\"O .\" but no EISDIR or ENOSYS. Also AIX and HPUX document EBUSY (attempt is made
.\"O .\" to enable accounting when it is already enabled), as does Solaris
.\"O .\" (attempt is made to enable accounting using the same file that is
.\"O .\" currently being used).
SVr4, 4.3BSD (POSIX ではない)。
.\" SVr4 には EBUSY エラーが記述されているが、EISDIR, ENOSYS はない。
.\" AIX と HPUX には、EBUSY について「すでにアカウントが有効にされている場合に、
.\" さらに有効にしようとした」という記述がある。
.\" これは Solaris における「現在、アカウントに使われているファイルと
.\" 同じファイルでアカウントを有効にしようとした」という記述と同じである。
.\"O .SH NOTES
.SH 注意
.\"O No accounting is produced for programs running when a system crash occurs.
.\"O In particular, nonterminating processes are never accounted for.
システムがクラッシュした時に実行中だったプログラムのアカウントは生成されない。
特に、終了しないプログラムがアカウントされることはない。

.\"O The structure of the records written to the accounting file is described in
.\"O .BR acct (5).
アカウント用ファイルに書き込まれるレコードの構造体については
.BR acct (5)
に説明がある。
.\"O .SH "SEE ALSO"
.SH 関連項目
.\"O .BR acct (5)
.BR acct (5)
