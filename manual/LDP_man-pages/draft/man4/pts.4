.\" Hey Emacs! This file is -*- nroff -*- source.
.\" This man page was written by Jeremy Phelps <jphelps@notreached.net>.
.\" Notes added - aeb
.\" Redistribute and revise at will.
.\"
.\" Japanese Version Copyright (c) 2003  Akihiro MOTOKI
.\"         all rights reserved.
.\" Translated Tue Jul  8 00:28:17 JST 2003
.\"         by Akihiro MOTOKI <amotoki@dd.iij4u.or.jp>
.\"
.\"WORD:	pseudoterminal		擬似端末
.\"WORD:	pts			擬似端末
.\"
.TH PTS 4 2002-10-09 "Linux" "Linux Programmer's Manual"
.\"O .SH NAME
.SH 名前
.\"O ptmx, pts \- pseudoterminal master and slave
ptmx, pts \- 擬似端末のマスタとスレーブ
.\"O .SH DESCRIPTION
.SH 説明
.\"O The file \fI/dev/ptmx\fP is a character file with major number 5 and
.\"O minor number 2, usually of mode 0666 and owner.group of root.root.
.\"O It is used to create a pseudoterminal master and slave pair.
ファイル \fI/dev/ptmx\fP は、メジャーナンバー (major number) 5、
マイナーナンバー (minor number) 2 を持つキャラクタ・ファイルであり、
通常、モードは 0666 で、所有者.グループは root.root である。
このファイルは、擬似端末 (pseudoterminal) のマスタとスレーブの
ペアを作成するために使用される。
.PP
.\"O When a process opens \fI/dev/ptmx\fP, it gets a file
.\"O descriptor for a pseudoterminal master (PTM),
.\"O and a pseudoterminal slave (PTS) device is created in the
.\"O .I /dev/pts
.\"O directory.
.\"O Each file descriptor obtained by opening \fI/dev/ptmx\fP
.\"O is an independent PTM with its own associated PTS, whose path can
.\"O be found by passing the descriptor to
.\"O .BR ptsname (3).
プロセスが \fI/dev/ptmx\fP をオープンすると、そのプロセスには
擬似端末マスタ (pseudoterminal master; PTM) へのファイル・
ディスクリプタが返され、
.I /dev/pts
ディレクトリに擬似端末スレーブ (pseudoterminal slave; PTS)
デバイスが作成される。
\fI/dev/ptmx\fP をオープンして得られるファイル・ディスクリプタは
それぞれ独立の PTM であり、対応する PTS を各々持つ。
PTS のパス名は、PTM のファイル・ディスクリプタを
.BR ptsname (3)
に渡すと知ることができる。
.PP
.\"O Before opening the pseudoterminal slave, you must pass the master's file
.\"O descriptor to
.\"O .BR grantpt (3)
.\"O and
.\"O .BR unlockpt (3).
擬似端末スレーブをオープンする前に、必ず、マスタのファイル・ディスクリプタを
引き数として
.BR grantpt (3)
と
.BR unlockpt (3)
を呼び出さなければならない。
.PP
.\"O Once both the pseudoterminal master and slave are open, the slave provides
.\"O processes with an interface that is identical to that of a real terminal.
擬似端末のマスタとスレーブの両方がオープンされた後は、スレーブは、
プロセスに対して、実端末 (real terminal) と全く同じインタフェースを提供する。
.PP
.\"O Data written to the slave is presented on the master descriptor as input.
.\"O Data written to the master is presented to the slave as input.
スレーブに書かれたデータはマスタ・ディスクリプタに対する入力として扱われ、
マスタに書かれたデータはスレーブに対する入力として扱われる。
.PP
.\"O In practice, pseudoterminals are used for implementing terminal emulators
.\"O such as
.\"O .BR xterm (1),
.\"O in which data read from the pseudoterminal master is interpreted by the
.\"O application in the same way
.\"O a real terminal would interpret the data, and for implementing remote-login
.\"O programs such as
.\"O .BR sshd (8),
.\"O in which data read from the pseudoterminal master is sent across the network
.\"O to a client program that is connected to a terminal or terminal emulator.
実例をあげると、擬似端末は
.BR xterm (1)
のような端末エミュレータを実装するのに使用されている。
端末エミュレータでは、擬似端末のマスタから読み込まれたデータは、
アプリケーションにとって実端末のデータと全く同じもののように見える。
また、
.BR sshd (8)
のようなリモート・ログイン用のプログラムの実装では、
擬似端末マスタから読み込まれたデータは、ネットワークを経由して、
端末や端末エミュレータに接続されているクライアント・プログラムに送信される。
.PP
.\"O Pseudoterminals can also be used to send input to programs that normally
.\"O refuse to read input from pipes (such as
.\"O .BR su (1),
.\"O and
.\"O .BR passwd (1)).
擬似端末は、
.RB ( su (1)
や
.BR passwd (1)
のような) 通常はパイプからの入力を拒否するプログラムに、
入力を送信するためにも使用できる。
.\"O .SH FILES
.SH ファイル
.IR /dev/ptmx ,
.I /dev/pts/*
.\"O .SH NOTES
.SH 備考
.\"O The Linux support for the above (known as UNIX 98 pseudoterminal naming)
.\"O is done using the
.\"O .I devpts
.\"O file system, that should be mounted on
.\"O .IR /dev/pts .
(UNIX 98 pseudoterminal naming と呼ばれる)
上記の機能の Linux でのサポートは、通常
.I /dev/pts
にマウントされるはずの
.I devpts
ファイルシステムを通して実現されている、
.LP
.\"O Before this UNIX 98 scheme, master pseudoterminals were called
.\"O .IR /dev/ptyp0 ", ..."
.\"O and slave pseudoterminals
.\"O .IR /dev/ttyp0 ", ..."
.\"O and one needed lots of preallocated device nodes.
この UNIX 98 スキームが導入される前は、マスタ擬似端末は
.IR /dev/ptyp0 ", ..."
、スレーブ擬似端末は
.IR /dev/ttyp0 ", ..."
と呼ばれており、あらかじめたくさんのデバイス・ノードを割り当てて
おく必要があった。
.\"O .SH "SEE ALSO"
.SH 関連項目
.BR getpt (3),
.BR grantpt (3),
.BR ptsname (3),
.BR unlockpt (3),
.BR pty (7)
