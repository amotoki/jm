.\" Copyright (c) Michael Haardt (michael@cantor.informatik.rwth-aachen.de),
.\"     Sun Jan 15 19:16:33 1995
.\"
.\" %%%LICENSE_START(GPLv2+_DOC_FULL)
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, see
.\" <http://www.gnu.org/licenses/>.
.\" %%%LICENSE_END
.\"
.\" Modified, Sun Feb 26 15:02:58 1995, faith@cs.unc.edu
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.\"
.\" Japanese Version Copyright (c) 1996,1997,1998
.\"         ISHIKAWA Mutsumi, TAKAHASHI Mutsuji
.\"                             all rights reserved.
.\" Translated Tue Feb 13 22:48:47 JST 1997
.\"         by ISHIKAWA Mutsumi <ishikawa@linux.or.jp>
.\"            and TAKAHASHI Mutsuji <muz@ilp.iijnet.or.jp>
.\"
.TH LP 4 2020\-08\-13 Linux "Linux Programmer's Manual"
.SH 名前
lp \- ラインプリンターデバイス
.SH 書式
\fB#include <linux/lp.h>\fP
.SH 設定
\fBlp\fP[0\(en2] are character devices for the parallel line printers; they
have major number 6 and minor number 0\(en2.  The minor numbers correspond
to the printer port base addresses 0x03bc, 0x0378, and 0x0278.  Usually they
have mode 220 and are owned by user \fIroot\fP and group \fIlp\fP.  You can use
printer ports either with polling or with interrupts.  Interrupts are
recommended when high traffic is expected, for example, for laser printers.
For typical dot matrix printers, polling will usually be enough.  The
default is polling.
.SH 説明
次の \fBioctl\fP(2)  コールがサポートされている。
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPTIME, int \fP\fIarg\fP\fB)\fP"
Sets the amount of time that the driver sleeps before rechecking the printer
when the printer's buffer appears to be filled to \fIarg\fP.  If you have a
fast printer, decrease this number; if you have a slow printer, then
increase it.  This is in hundredths of a second, the default 2 being 0.02
seconds.  It influences only the polling driver.
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPCHAR, int \fP\fIarg\fP\fB)\fP"
Sets the maximum number of busy\-wait iterations which the polling driver
does while waiting for the printer to get ready for receiving a character to
\fIarg\fP.  If printing is too slow, increase this number; if the system gets
too slow, decrease this number.  The default is 1000.  It influences only
the polling driver.
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPABORT, int \fP\fIarg\fP\fB)\fP"
もし、\fIarg\fP が 0 なら、プリンタードライバはエラーについて再試行 を行う。それ以外の場合は中止する。デフォルトは 0 である。
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPABORTOPEN, int \fP\fIarg\fP\fB)\fP"
もし、\fIarg\fP が 0 なら \fBopen\fP(2)  の結果がエラーの場合、動作が中止される。それ以外ならエラーは無
視される。デフォルトではエラーは無視される。
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPCAREFUL, int \fP\fIarg\fP\fB)\fP"
If \fIarg\fP is 0, then the out\-of\-paper, offline, and error signals are
required to be false on all writes, otherwise they are ignored.  The default
is to ignore them.
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPWAIT, int \fP\fIarg\fP\fB)\fP"
.\" FIXME . Actually, since Linux 2.2, the default is 1
プリンターが送られた文字を受け取るのを待つため、ドライバが文字を送っ てからストローブ(strobe)するまでの待ちの繰り返しの回数と、ストローブ
を再びオフにするまでの待ちの繰り返しの回数を \fIarg\fPに設定 する。仕様によればこの時間は 0.5 マイクロ秒とするべきだが、経験によれば
このコードによって生じる遅れで十分である。そのため、デフォルトでは 0 で ある。これは、ポーリングと割り込みドライバの両方で使われる。
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPSETIRQ, int \fP\fIarg\fP\fB)\fP"
この \fBioctl\fP(2)  を使うには、スーパーユーザーの権限が必要である。新しいIRQを示す \fIint\fP
を引数としてとる。また、副作用としてプリンターはリセットされる。 \fIarg\fPが0の時またはデフォルトの動作では、ポーリングドライバーが使わ れる。
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPGETIRQ, int *\fP\fIarg\fP\fB)\fP"
現在使われているIRQを\fIarg\fPにいれる。
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPGETSTATUS, int *\fP\fIarg\fP\fB)\fP"
ステータスポートの値を\fIarg\fPに収める。各ビットには次のような意味が ある：
.TS
l l.
LP_PBUSY	ビジー信号の反転、ハイがアクティブ
LP_PACK	アクノリッジ信号、ローがアクティブ
LP_POUTPA	紙切れ信号、ハイがアクティブ
LP_PSELECD	選択信号、ハイがアクティブ
LP_PERRORP	エラー信号、ローがアクティブ
.TE
.IP
信号の意味については各自のプリンターのマニュアルを参照のこと。プリンター によっては記載のないビットもセットされるかもしれないので、注意のこと。
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPRESET)\fP"
プリンターをリセットする。引数はとらない。
.SH ファイル
.\" .SH AUTHORS
.\" The printer driver was originally written by Jim Weigand and Linus
.\" Torvalds.
.\" It was further improved by Michael K.\& Johnson.
.\" The interrupt code was written by Nigel Gamble.
.\" Alan Cox modularized it.
.\" LPCAREFUL, LPABORT, LPGETSTATUS were added by Chris Metcalf.
\fI/dev/lp*\fP
.SH 関連項目
\fBchmod\fP(1), \fBchown\fP(1), \fBmknod\fP(1), \fBlpcntl\fP(8), \fBtunelp\fP(8)
.SH この文書について
この man ページは Linux \fIman\-pages\fP プロジェクトのリリース 5.10 の一部である。プロジェクトの説明とバグ報告に関する情報は
\%https://www.kernel.org/doc/man\-pages/ に書かれている。
