'\" t
.\" Copyright (c) 2000 lars brinkhoff <lars@nocrew.org>
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111,
.\" USA.
.\"
.\" Modified, Thu Jan 27 19:16:19 CET 2000, lars@nocrew.org
.\"
.\" Japanese Version Copyright (c) 2000 Yuichi SATO
.\"         all rights reserved.
.\" Translated Tue Jul 11 20:05:48 JST 2000
.\"         by Yuichi SATO <sato@complex.eng.hokudai.ac.jp>
.\"
.\"WORD:	handshake	ハンドシェイク
.\"WORD:	device		デバイス
.\"WORD:	processer	プロセッサー
.\"WORD:	transmit	送信
.\"WORD:	recieve		受信
.\"WORD:	quantity	単位
.\"
.TH DSP56K 4 2000-03-01 "Linux" "Linux Programmer's Manual"
.\"O .SH NAME
.SH 名前
.\"O dsp56k \- DSP56001 interface device
dsp56k \- DSP56001 のインターフェース・デバイス
.\"O .SH SYNOPSIS
.SH 書式
.nf
#include <asm/dsp56k.h>
.sp
.BI "ssize_t read(int " fd ", void *" data ", size_t " length );
.BI "ssize_t write(int " fd ", void *" data ", size_t " length );

.BI "int ioctl(int " fd ", DSP56K_UPLOAD, struct dsp56k_upload *" program );
.BI "int ioctl(int " fd ", DSP56K_SET_TX_WSIZE, int " wsize );
.BI "int ioctl(int " fd ", DSP56K_SET_RX_WSIZE, int " wsize );
.BI "int ioctl(int " fd ", DSP56K_HOST_FLAGS, struct dsp56k_host_flags *" flags );
.BI "int ioctl(int " fd ", DSP56K_HOST_CMD, int " cmd );
.fi
.\"O .SH CONFIGURATION
.SH 設定
.\"O The dsp56k device is a character device with major number 55 and minor
.\"O number 0.
dsp56k デバイスは、メジャー番号 55、マイナー番号 0 の
キャラクター・デバイスである。
.\"O .SH DESCRIPTION
.SH 説明
.\"O The Motorola DSP56001 is a fully programmable 24-bit digital signal
.\"O processor found in Atari Falcon030-compatible computers.
.\"O The \fIdsp56k\fP special file is used to control the DSP56001, and
.\"O to send and receive data using the bidirectional handshaked host
.\"O port.
Motorola DSP56001 は、Atari Falcon030 互換のコンピュータで使われている
フルプログラマブルな 24 ビットのデジタルシグナルプロセッサーである。
スペシャルファイル \fIdsp56k\fP は、DSP56001 の制御と
双方向ハンドシェイクホストポートでのデータの送受信のために使われる。
.PP
.\"O To send a data stream to the signal processor, use
.\"O .BR write (2)
.\"O to the
.\"O device, and
.\"O .BR read (2)
.\"O to receive processed data.
.\"O The data can be sent or
.\"O received in 8, 16, 24, or 32-bit quantities on the host side, but will
.\"O always be seen as 24-bit quantities in the DSP56001.
データストリームをシグナルプロセッサーに送信するためには、
デバイスに対して
.BR write (2)
を使うこと。
処理されたデータを受信するためには、
.BR read (2)
を使うこと。
ホスト側では、データは 8, 16, 24, 32 ビット単位で送受信できるが、
DSP56001 内では、24 ビット単位で扱われる。
.PP
.\"O The following
.\"O .BR ioctl (2)
.\"O calls are used to control the
.\"O \fIdsp56k\fP device:
次の
.BR ioctl (2)
コールが \fIdsp56k\fP デバイスを制御するために使われる。
.IP \fBDSP56K_UPLOAD\fP
.\"O resets the DSP56001 and uploads a program.
.\"O The third
.\"O .BR ioctl(2)
.\"O argument must be a pointer to a \fIstruct dsp56k_binary\fP with members
.\"O \fIbin\fP pointing to a DSP56001 binary program, and \fIlen\fP set to
.\"O the length of the program, counted in 24-bit words.
DSP56001 をリセットし、プログラムをアップロードする。
.BR ioctl (2)
の 3 番目の引き数は、
構造体 \fIstruct dsp56k_binary\fP へのポインタでなければならない。
構造体のメンバー \fIbin\fP は DSP56001 バイナリプログラムを指し、
構造体のメンバー \fIlen\fP は 24 ビットワードで数えた
プログラムの長さに設定されていなければならない。
.IP \fBDSP56K_SET_TX_WSIZE\fP
.\"O sets the transmit word size.
.\"O Allowed values are in the range 1 to 4,
.\"O and is the number of bytes that will be sent at a time to the
.\"O DSP56001.
.\"O These data quantities will either be padded with zero
.\"O bytes, or truncated to fit the native 24-bit data format of the
.\"O DSP56001.
送信ワードサイズを設定する。
設定できる値は 1 〜 4 の範囲で、このバイト数分だけ 1 度に DSP56001 に送信する。
このデータ単位は、DSP56001 本来の 24 ビットデータ形式に合わせるため、
ゼロのバイトで埋められたり、切り詰められたりする。
.IP \fBDSP56K_SET_RX_WSIZE\fP
.\"O sets the receive word size.
.\"O Allowed values are in the range 1 to 4,
.\"O and is the number of bytes that will be received at a time from the
.\"O DSP56001.
.\"O These data quantities will either truncated, or padded with
.\"O a null byte (\(aq\\0\(aq) to fit the native 24-bit data format of the DSP56001.
受信ワードサイズを設定する。
設定できる値は 1 〜 4 の範囲で、
このバイト数分だけ 1 度に DSP56001 から受信する。
このデータ単位は、DSP56001 本来の 24 ビットデータ形式に合わせるため、
切り詰められたり、NULL バイト (\(aq\\0\(aq) で埋められたりする。
.IP \fBDSP56K_HOST_FLAGS\fP
.\"O read and write the host flags.
.\"O The host flags are four
.\"O general-purpose bits that can be read by both the hosting computer and
.\"O the DSP56001.
.\"O Bits 0 and 1 can be written by the host, and bits 2 and
.\"O 3 can be written by the DSP56001.
ホストフラグを読み書きする。
ホストフラグは、一般的な目的で使うことのできるビットで、
ホストコンピュータと DSP56001 の両方から読むことができる。
ビット 0 と 1 は、ホストによって書き込むことができ、
ビット 2 と 3 は、DSP56001 によって書き込むことができる。

.\"O To access the host flags, the third
.\"O .BR ioctl (2)
.\"O argument must be a pointer
.\"O to a \fIstruct dsp56k_host_flags\fP.
.\"O If bit 0 or 1 is set in the
.\"O \fIdir\fP member, the corresponding bit in \fIout\fP will be written
.\"O to the host flags.
.\"O The state of all host flags will be returned in
.\"O the lower four bits of the \fIstatus\fP member.
ホストフラグにアクセスするためには、
.BR ioctl (2)
の 3 番目の引き数が
構造体 \fIstruct dsp56k_host_flags\fP へのポインタでなければならない。
この構造体のメンバー \fIdir\fP のビット 0 または 1 が設定されると、
メンバー \fIout\fP の対応するビットの値がホストフラグに書き込まれる。
すべてのホストフラグの状態は、構造体のメンバー \fIstatus\fP の
下から 4 ビットとして返される。
.IP \fBDSP56K_HOST_CMD\fP
.\"O sends a host command.
.\"O Allowed values are in the range 0 to 31, and is a
.\"O user-defined command handled by the program running in the DSP56001.
ホストコマンドを送信する。
送信できる値は 0 〜 31 の範囲で、DSP56001 で動作しているプログラムによって
処理されるユーザー定義コマンドである。
.\"O .SH FILES
.SH ファイル
/dev/dsp56k
.\"O .\" .SH AUTHORS
.\" .SH 著者
.\" Fredrik Noring <noring@nocrew.org>, lars brinkhoff <lars@nocrew.org>,
.\" Tomas Berndtsson <tomas@nocrew.org>.
.\"O .SH "SEE ALSO"
.SH 関連項目
.IR linux/include/asm-m68k/dsp56k.h ,
.IR linux/drivers/char/dsp56k.c ,
.IR http://dsp56k.nocrew.org/ ,
DSP56000/DSP56001 Digital Signal Processor User's Manual
