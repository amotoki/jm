'\" t
.\" Copyright (c) 1993 Michael Haardt (michael@cantor.informatik.rwth-aachen.de)
.\" and 1994,1995 Alain Knaff (Alain.Knaff@imag.fr)
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111,
.\" USA.
.\"
.\" Modified, Sun Feb 26 15:00:02 1995, faith@cs.unc.edu
.\"
.\" Japanese Version Copyright (c) 1996,1997,1998 ISHIKAWA Mutsumi
.\"         all rights reserved.
.\" Translated Sun Jan 11 03:25:38 JST 1998
.\"         by ISHIKAWA Mutsumi <ishikawa@linux.or.jp>
.\"
.\" WORD:	floppy disk		フロッピーディスク
.\" WORD:	double density		倍密度
.\" WORD:	high density		高密度
.\" WORD:	extra density		拡張密度
.\" WORD:	interleaved format	インターリーブドフォーマット
.\" WORD:	media			メディア
.\" WORD:	geometry		ジオメトリ
.\" WORD:	buffer cache		バッファキャッシュ
.\" WORD:	threshold		閾値
.\" WORD:	clear			クリアー
.\"
.TH FD 4 2010-08-29 "Linux" "Linux Programmer's Manual"
.\"O .SH NAME
.\"O fd \- floppy disk device
.SH 名前
fd \- フロッピーディスク(floppy disk)デバイス
.\"O .SH CONFIGURATION
.SH 設定
.\"O Floppy drives are block devices with major number 2.
.\"O Typically they
.\"O are owned by
.\"O .I root.floppy
.\"O (i.e., user root, group floppy) and have
.\"O either mode 0660 (access checking via group membership) or mode 0666
.\"O (everybody has access).
.\"O The minor
.\"O numbers encode the device type, drive number, and controller number.
.\"O For each device type (that is, combination of density and track count)
.\"O there is a base minor number.
.\"O To this base number, add the drive's
.\"O number on its controller and 128 if the drive is on the secondary
.\"O controller.
.\"O In the following device tables, \fIn\fP represents the
.\"O drive number.
フロッピードライブはメジャーナンバー 2 を持つブロックデバイスである。
一般的には、このデバイスのオーナーは
.I root.floppy
(オーナー root、グループ floppy) で、
モード 0660 (グループの構成員であることによってアクセスチェックが行われる)、
または、モード 0666 (誰でもアクセスできる) である。
マイナーナンバーはデバイスのタイプ、ドライブの番号、
コントローラーの番号を符号化したものである。それぞれのデバイスタイプ
(これは、密度 (density) とトラックカウント (track count) の組合せである)
は、ベースとなるマイナーナンバーを持っている。このベースナンバーにその
コントローラー上のドライブナンバーを加える。もし、そのドライブが 2 番目の
コントローラーに接続されているなら、さらに 128 を加える。次のデバイス
テーブルでは、 \fIn\fP はドライブ番号を表す。
.PP
.\"O \fBWarning: If you use formats with more tracks
.\"O than supported by your drive, you may cause it mechanical damage.\fP
.\"O Trying once if more tracks than the usual 40/80 are supported should not
.\"O damage it, but no warranty is given for that.
.\"O If you are not sure, don't create device
.\"O entries for those formats, so as to prevent their usage.
\fB警告: ドライブがサポートしているよりも多くのトラックを持つように
フォーマットした場合、ドライブに機械的なダメージを与えることになる
かもしれない。\fP
通常の 40/80 よりも多くのトラックがサポートされているかどうかを
一度試すだけではドライブにダメージを与えることはないはずだが、
ダメージを与えないという保証はない。
確信がない場合は、そのような使い方が行われないように、
そうしたフォーマットのドライブ・エントリを作成しないこと。
.PP
[訳注]
以下の表に用いられる用語は表の整形の関係から
(一行にうまく納める事ができなかったため)
から原文のままとなっています。日本語との対応は以下の通りです。
.TS
l l.
Name	名前
Capac.	容量
Cyl.	シリンダ数
Sect.	セクター数
Heads.	ヘッダ数
Base minor #	ベースマイナーナンバー
.TE

.\"O Drive-independent device files which automatically detect the media
.\"O format and capacity:
メディアのフォーマットと容量を自動的に検出する
ドライブ非依存のデバイスファイル:
.TS
l l.
Name	Base minor #
_
\fBfd\fP\fIn\fP	0
.TE
.PP
.\"O 5.25 inch double density device files:
5.25 インチ倍密度(double density)デバイスファイル:
.TS
lw(1i) l l l l l.
Name	Capac.	Cyl.	Sect.	Heads	Base minor #
_
\fBfd\fP\fIn\fP\fBd360\fP	360K	40	9	2	4
.TE
.PP
.\"O 5.25 inch high density device files:
5.25 インチ高密度(high density)デバイスファイル:
.TS
lw(1i) l l l l l.
Name	Capac.	Cyl.	Sect.	Heads	Base minor #
_
\fBfd\fP\fIn\fP\fBh360\fP	360K	40	9	2	20
\fBfd\fP\fIn\fP\fBh410\fP	410K	41	10	2	48
\fBfd\fP\fIn\fP\fBh420\fP	420K	42	10	2	64
\fBfd\fP\fIn\fP\fBh720\fP	720K	80	9	2	24
\fBfd\fP\fIn\fP\fBh880\fP	880K	80	11	2	80
\fBfd\fP\fIn\fP\fBh1200\fP	1200K	80	15	2	8
\fBfd\fP\fIn\fP\fBh1440\fP	1440K	80	18	2	40
\fBfd\fP\fIn\fP\fBh1476\fP	1476K	82	18	2	56
\fBfd\fP\fIn\fP\fBh1494\fP	1494K	83	18	2	72
\fBfd\fP\fIn\fP\fBh1600\fP	1600K	80	20	2	92
.TE
.PP
.\"O 3.5 inch double density device files:
3.5 インチ倍密度(double density)デバイスファイル:
.TS
lw(1i) l l l l l.
Name	Capac.	Cyl.	Sect.	Heads	Base minor #
_
\fBfd\fP\fIn\fP\fBD360\fP	360K	80	9	1	12
\fBfd\fP\fIn\fP\fBD720\fP	720K	80	9	2	16
\fBfd\fP\fIn\fP\fBD800\fP	800K	80	10	2	120
\fBfd\fP\fIn\fP\fBD1040\fP	1040K	80	13	2	84
\fBfd\fP\fIn\fP\fBD1120\fP	1120K	80	14	2	88
.TE
.PP
.\"O 3.5 inch high density device files:
3.5 インチ高密度(high density)デバイスファイル:
.TS
lw(1i) l l l l l.
Name	Capac.	Cyl.	Sect.	Heads	Base minor #
_
\fBfd\fP\fIn\fP\fBH360\fP	360K	40	9	2	12
\fBfd\fP\fIn\fP\fBH720\fP	720K	80	9	2	16
\fBfd\fP\fIn\fP\fBH820\fP	820K	82	10	2	52
\fBfd\fP\fIn\fP\fBH830\fP	830K	83	10	2	68
\fBfd\fP\fIn\fP\fBH1440\fP	1440K	80	18	2	28
\fBfd\fP\fIn\fP\fBH1600\fP	1600K	80	20	2	124
\fBfd\fP\fIn\fP\fBH1680\fP	1680K	80	21	2	44
\fBfd\fP\fIn\fP\fBH1722\fP	1722K	82	21	2	60
\fBfd\fP\fIn\fP\fBH1743\fP	1743K	83	21	2	76
\fBfd\fP\fIn\fP\fBH1760\fP	1760K	80	22	2	96
\fBfd\fP\fIn\fP\fBH1840\fP	1840K	80	23	2	116
\fBfd\fP\fIn\fP\fBH1920\fP	1920K	80	24	2	100
.TE
.PP
.\"O 3.5 inch extra density device files:
3.5 インチ拡張密度(extra density)デバイスファイル:
.TS
lw(1i) l l l l l.
Name	Capac.	Cyl.	Sect.	Heads	Base minor #
_
\fBfd\fP\fIn\fP\fBE2880\fP	2880K	80	36	2	32
\fBfd\fP\fIn\fP\fBCompaQ\fP	2880K	80	36	2	36
\fBfd\fP\fIn\fP\fBE3200\fP	3200K	80	40	2	104
\fBfd\fP\fIn\fP\fBE3520\fP	3520K	80	44	2	108
\fBfd\fP\fIn\fP\fBE3840\fP	3840K	80	48	2	112
.TE
.\"O .SH DESCRIPTION
.SH 説明
.\"O \fBfd\fP special files access the floppy disk drives in raw mode.
.\"O The following
.\"O .BR ioctl (2)
.\"O calls are supported by \fBfd\fP devices:
\fBfd\fP スペシャルファイルはフロッピーディスクドライブにローモード
(raw mode)で
アクセスする。\fBfd\fP では、次の
.BR ioctl (2)
コールがサポートされている。
.\"O .IP \fBFDCLRPRM\fP
.\"O clears the media information of a drive (geometry of disk in drive).
.IP \fBFDCLRPRM\fP
ドライブのメディア情報(ドライブ内のディスクのジオメトリ情報)をクリアす
る。
.\"O .IP \fBFDSETPRM\fP
.\"O sets the media information of a drive.
.\"O The media information will be
.\"O lost when the media is changed.
.IP \fBFDSETPRM\fP
ドライブのメディア情報をセットする。メディア情報はメディアが交換された
時、失われる。
.\"O .IP \fBFDDEFPRM\fP
.\"O sets the media information of a drive (geometry of disk in drive).
.\"O The media information will not be lost when the media is changed.
.\"O This will disable autodetection.
.\"O In order to reenable autodetection, you
.\"O have to issue an \fBFDCLRPRM\fP.
.IP \fBFDDEFPRM\fP
ドライブのメディア情報(ドライブ内のディスクのジオメトリ情報)をセットす
る。メディア情報はメディアが交換された時でも失われない。これは(メディ
ア情報の)自動検出を無効にする。自動検出を再び有効にするために、
\fBFDCLRPRM\fP を発行しなければならない。
.\"O .IP \fBFDGETDRVTYP\fP
.\"O returns the type of a drive (name parameter).
.\"O For formats which work
.\"O in several drive types, \fBFDGETDRVTYP\fP returns a name which is
.\"O appropriate for the oldest drive type which supports this format.
.IP \fBFDGETDRVTYP\fP
ドライブのタイプ(名前引数)を返す。それぞれのドライブタイプに適合するよ
うにフォーマットを行うため、\fBFDGETDRVTYP\fP はフォーマットをサポート
する最も古いドライブタイプのために適切な名前を返す。
.\"O .IP \fBFDFLUSH\fP
.\"O invalidates the buffer cache for the given drive.
.IP \fBFDFLUSH\fP
与えられたドライブのバッファキャッシュを無効にする。
.\"O .IP \fBFDSETMAXERRS\fP
.\"O sets the error thresholds for reporting errors, aborting the operation,
.\"O recalibrating, resetting, and reading sector by sector.
.IP \fBFDSETMAXERRS\fP
エラーの報告、操作の中止、再試行、リセット、セクター毎の読み込みのため
のエラー閾値をセットする。
.\"O .IP \fBFDSETMAXERRS\fP
.\"O gets the current error thresholds.
.IP \fBFDGETMAXERRS\fP
現在のエラー閾値を得る。
.\"O .IP \fBFDGETDRVTYP\fP
.\"O gets the internal name of the drive.
.IP \fBFDGETDRVTYP\fP
ドライブの内部名を得る。
.\"O .IP \fBFDWERRORCLR\fP
.\"O clears the write error statistics.
.IP \fBFDWERRORCLR\fP
書き込みエラーの統計をクリアーする。
.\"O .IP \fBFDWERRORGET\fP
.\"O reads the write error statistics.
.\"O These include the total number of
.\"O write errors, the location and disk of the first write error, and the
.\"O location and disk of the last write error.
.\"O Disks are identified by a
.\"O generation number which is incremented at (almost) each disk change.
.IP \fBFDWERRORGET\fP
書き込みエラーの統計を読む。統計は、書き込みエラーの合計、最初の書き込
みエラーはどのディスクのどこで起こったか、そして、最後の書き込みエラー
がどのディスクのどこで起こったかという情報を含んでいる。ディスクはディ
スクの交換ごとに増えるジェネレーション番号によって識別される。
.\"O .IP \fBFDTWADDLE\fP
.\"O Switch the drive motor off for a few microseconds.
.\"O This might be
.\"O needed in order to access a disk whose sectors are too close together.
.IP \fBFDTWADDLE\fP
数ミリ秒の間ドライブのモーターのスイッチを切る。これはディスクのセクター
同士が接近しすぎているディスクのアクセスのために必要であろう。
.\"O .IP \fBFDSETDRVPRM\fP
.\"O sets various drive parameters.
.IP \fBFDSETDRVPRM\fP
ドライブの様々なパラメータをセットする。
.\"O .IP \fBFDGETDRVPRM\fP
.\"O reads these parameters back.
.IP \fBFDGETDRVPRM\fP
(\fBFDSETDRVPRM\fP を使ってセットした)パラメータを読みだす。
.\"O .IP \fBFDGETDRVSTAT\fP
.\"O gets the cached drive state (disk changed, write protected et al.)
.IP \fBFDGETDRVSTAT\fP
キャッシュされているドライブの状態(ディスクの交換、ライトプロテクトな
ど)を得る。
.\"O .IP \fBFDPOLLDRVSTAT\fP
.\"O polls the drive and return its state.
.IP \fBFDPOLLDRVSTAT\fP
ドライブをポーリングして、その状態を返す。
.\"O .IP \fBFDGETFDCSTAT\fP
.\"O gets the floppy controller state.
.IP \fBFDGETFDCSTAT\fP
フロッピーコントローラーの状態を得る。
.\"O .IP \fBFDRESET\fP
.\"O resets the floppy controller under certain conditions.
.IP \fBFDRESET\fP
フロッピーコントローラーを信頼できる状態にリセットする。
.\"O .IP \fBFDRAWCMD\fP
.\"O sends a raw command to the floppy controller.
.IP \fBFDRAWCMD\fP
フロッピーコントローラーに低レベルのコマンド(raw command)を送る。
.PP
.\"O For more precise information, consult also the \fI<linux/fd.h>\fP and
.\"O \fI<linux/fdreg.h>\fP include files, as well as the
.\"O .BR floppycontrol (1)
.\"O manual page.
より正確な情報のためには、マニュアルページ
.BR floppycontrol (1)
だけでなく、インクルードファイル \fI<linux/fd.h>\fP と
\fI<linux/fdarg.h>\fP も参照のこと。
.\"O .SH FILES
.SH ファイル
/dev/fd*
.\"O .SH NOTES
.SH 注意
.\"O The various formats permit reading and writing many types of disks.
.\"O However, if a floppy is formatted with an inter-sector gap that is too small,
.\"O performance may drop,
.\"O to the point of needing a few seconds to access an entire track.
.\"O To prevent this, use interleaved formats.
様々なディスクのタイプで様々な種類のフォーマットの読み書きが許されている。
しかし、小さすぎるセクター間ギャップでフォーマットされたフロッピーでは、
トラック全体のアクセスに数秒必要になるため、性能が低下することだろう。
これを防ぐためには、インターリーブド・フォーマット
(interleaved format) を用いればよい。

.\"O It is not possible to
.\"O read floppies which are formatted using GCR (group code recording),
.\"O which is used by Apple II and Macintosh computers (800k disks).
Apple II や Macintosh コンピュータで使用されている、
GCR (group code recording) を使ってフォーマットされたフロッピー
(800k ディスク) を読むことはできない。

.\"O Reading floppies which are hard sectored (one hole per sector, with
.\"O the index hole being a little skewed) is not supported.
.\"O This used to be common with older 8-inch floppies.
ハードセクター型のフロッピーの読み込みはサポートされていない
(ハードセクター型のフロッピーでは、セクター毎にホール (hole) が一つあり、
少しずれた位置にインデックスホールが存在する)。
これは、昔の 8 インチフロッピーで一般的に使われていた方式である。
.\"O .\" .SH AUTHORS
.\" .SH 著者
.\" Alain Knaff (Alain.Knaff@imag.fr), David Niemi
.\" (niemidc@clark.net), Bill Broadhurst (bbroad@netcom.com).
.\"O .SH "SEE ALSO"
.SH 関連項目
.BR chown (1),
.BR floppycontrol (1),
.BR getfdprm (1),
.BR mknod (1),
.BR superformat (1),
.BR mount (8),
.BR setfdprm (8)
.\" .SH 翻訳者
.\" 石川 睦 <ishikawa@linux.or.jp>
