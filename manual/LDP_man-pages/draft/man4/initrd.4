.\" -*- nroff -*-
.\" This man-page is Copyright (C) 1997 John S. Kallal
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one.
.\"
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.
.\"
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and author(s) of this work.
.\"
.\" If the you wish to distribute versions of this work under other
.\" conditions than the above, please contact the author(s) at the following
.\" for permission:
.\"
.\"  John S. Kallal -
.\"	email: <kallal@voicenet.com>
.\"	mail: 518 Kerfoot Farm RD, Wilmington, DE 19803-2444, USA
.\"	phone: (302)654-5478
.\"
.\" $Id: initrd.4,v 1.1.1.1 1999/07/19 01:49:27 cvs Exp $
.\"
.\" Japanese Version Copyright (c) 1997,1998
.\"           ISHIKAWA Mutsumi, all rights reserved.
.\" Translated 1997-12-15, ISHIKAWA Mutsumi <ishikawa@linux.or.jp>
.\" Modified 1998-02-09, ISHIKAWA Mutsumi <ishikawa@linux.or.jp>
.\" Updated & Modified 2005-10-08, Akihiro MOTOKI <amotoki@dd.iij4u.or.jp>
.\"
.TH INITRD 4 2009-04-04 "Linux" "Linux Programmer's Manual"
.\"O .SH NAME
.SH 名前
.\"O initrd \- boot loader initialized RAM disk
initrd \- ブートローダによって初期化された RAM ディスク
.\"O .SH CONFIGURATION
.SH 設定
.\"O The
.\"O .I /dev/initrd
.\"O is a read-only block device assigned
.\"O major number 1 and minor number 250.
.\"O Typically
.\"O .I /dev/initrd
.\"O is owned by
.\"O .I root.disk
.\"O with mode 0400 (read access by root only).
.\"O If the Linux system does not have
.\"O .I /dev/initrd
.\"O already created, it can be created with the following commands:
.I /dev/initrd
は、メジャー番号 1、マイナー番号 250 が割り当てられた
読み込み専用のブロックデバイスである。
普通、
.I /dev/initrd
の所有者は
.I root.disk
であり、モードは 400 (root のみが読み出し可能) である。
もし、Linux システムに作成済の
.I /dev/initrd
ファイルがなかった場合、以下のコマンドで作成することができる:
.nf
\fB
        mknod \-m 400 /dev/initrd b 1 250
        chown root:disk /dev/initrd
\fP
.fi
.PP
.\"O Also, support for both "RAM disk" and "Initial RAM disk"
.\"O (e.g.
.\"O .BR CONFIG_BLK_DEV_RAM=y
.\"O and
.\"O .BR CONFIG_BLK_DEV_INITRD=y )
.\"O must be compiled directly into the Linux kernel to use
.\"O .IR /dev/initrd .
.\"O When using
.\"O .IR /dev/initrd ,
.\"O the RAM disk driver cannot be loaded as a module.
また、
.I /dev/initrd
を使用するためには、
"RAM disk" と "Initial RAM disk" の両方の機能が
Linux カーネルに直接組み込まれていなければならない
(例えば、カーネルのコンパイル時の設定で
.B CONFIG_BLK_DEV_RAM=y
かつ
.B CONFIG_BLK_DEV_INITRD=y
とする)。
.I /dev/initrd
を使用する場合には、RAM ディスクドライバをモジュールとして
ロードすることはできない。
.\"
.\"
.\"
.\"O .SH DESCRIPTION
.SH 説明
.\"O The special file
.\"O .I /dev/initrd
.\"O is a read-only block device.
.\"O This device is a RAM disk that is initialized (e.g., loaded)
.\"O by the boot loader before the kernel is started.
.\"O The kernel then can use
.\"O .IR /dev/initrd "'s "
.\"O contents for a two-phase system boot-up.
.I /dev/initrd
スペシャルファイルは読み込み専用のブロックデバイスである。
このデバイスはカーネルが起動される前にブートローダ (boot loader)
によって初期化 (例えば、ロード) される RAM ディスクである。
その後、カーネルは
.I /dev/initrd
の内容を二段階のシステム起動 (two-phase system boot-up)
で利用することができる。
.PP
.\"O In the first boot-up phase, the kernel starts up
.\"O and mounts an initial root file-system from the contents of
.\"O .I /dev/initrd
.\"O (e.g., RAM disk initialized by the boot loader).
.\"O In the second phase, additional drivers or other modules
.\"O are loaded from the initial root device's contents.
.\"O After loading the additional modules, a new root file system
.\"O (i.e., the normal root file system) is mounted from a
.\"O different device.
最初のブートアップ段階 (first boot-up phase) では、カーネルは
(例えば、ブートローダによって初期化された RAM disk である)
.I /dev/initrd
の内容を初期ルートファイルシステム (root file-system) としてマウント
して起動する。
第二段階では初期ルートデバイスに含まれているものから、追加のドライ
バやその他のモジュールがロードされる。
追加のモジュールがロードされた後、新しいルートファイルシステム
(すなわち、通常時のルートファイルシステム)
が別のデバイスからマウントされる。
.\"
.\"
.\"
.\"O .SS "Boot-up Operation"
.SS ブートアップ作業
.\"O When booting up with
.\"O .BR initrd ,
.\"O the system boots as follows:
.B initrd
を利用した時は、システムは次のようにブートする:
.IP 1. 3
.\"O The boot loader loads the kernel program and
.\"O .IR /dev/initrd 's
.\"O contents into memory.
ブートローダはカーネルプログラムと
.I /dev/initrd
の内容をメモリにロードする。
.IP 2.
.\"O On kernel startup,
.\"O the kernel uncompresses and copies the contents of the device
.\"O .I /dev/initrd
.\"O onto device
.\"O .I /dev/ram0
.\"O and then frees the memory used by
.\"O .IR /dev/initrd .
カーネル起動時、カーネルは
.I /dev/initrd
デバイスの内容を展開 (uncompress) し、
.I /dev/ram0
にコピーする。さらに、
.I /dev/initrd
の使っていたメモリを解放する。
.IP 3.
.\"O The kernel then read-write mounts the device
.\"O .I /dev/ram0
.\"O as the initial root file system.
カーネルは
.I /dev/ram0
デバイスを初期のルートファイルシステムとして読み書き可能な形式でマウン
トする。
.IP 4.
.\"O If the indicated normal root file system is also the initial
.\"O root file-system (e.g.
.\"O .IR /dev/ram0 )
.\"O then the kernel skips to the last step for the usual boot sequence.
指示されたルートファイルシステムが初期ルートファイルシステム
(例えば
.IR /dev/ram0 )
と同一の場合は、カーネルは普通のブートシーケンスのための最後のステップを
省略する。
.IP 5.
.\"O If the executable file
.\"O .IR /linuxrc
.\"O is present in the initial root file-system,
.\"O .I /linuxrc
.\"O is executed with UID 0.
.\"O (The file
.\"O .I /linuxrc
.\"O must have executable permission.
.\"O The file
.\"O .I /linuxrc
.\"O can be any valid executable, including a shell script.)
.I /linuxrc
という実行可能なファイルが初期ルートファイルシステムに存在すれば、
.I /linuxrc
を UID 0 (すなわち、root) の権限で実行する。
.RI ( /linuxrc
ファイルは実行可能パーミッションが与えられていなければならない。
.I /linuxrc
は正当な実行ファイルであればよく、シェルスクリプトでも構わない。)
.IP 6.
.\"O If
.\"O .I /linuxrc
.\"O is not executed or when
.\"O .I /linuxrc
.\"O terminates, the normal root file system is mounted.
.\"O (If
.\"O .I /linuxrc
.\"O exits with any file-systems mounted on the initial root
.\"O file-system, then the behavior of the kernel is
.\"O .BR UNSPECIFIED .
.\"O See the NOTES section for the current kernel behavior.)
.I /linuxrc
が実行されない、または、
.I /linuxrc
の実行が終了した時は、通常時ルートファイルシステムがマウントされる。
.RI ( /linuxrc
を終了した時、何らかのファイルシステムが初期ルートファイルシステム上に
マウントされている場合のカーネルの動作は
\fB決められていない (不定である)\fR。
現在のカーネルがどのように動作するかは、
「注意」のセクションを参照のこと。)
.IP 7.
.\"O If the normal root file system has a directory
.\"O .IR /initrd ,
.\"O the device
.\"O .I /dev/ram0
.\"O is moved from
.\"O .IR /
.\"O to
.\"O .IR /initrd .
.\"O Otherwise if the directory
.\"O .IR /initrd
.\"O does not exist, the device
.\"O .I /dev/ram0
.\"O is unmounted.
.\"O (When moved from
.\"O .IR /
.\"O to
.\"O .IR /initrd ,
.\"O .I /dev/ram0
.\"O is not unmounted and therefore processes can remain running from
.\"O .IR /dev/ram0 .
.\"O If directory
.\"O .I /initrd
.\"O does not exist on the normal root file system
.\"O and any processes remain running from
.\"O .IR /dev/ram0
.\"O when
.\"O .I /linuxrc
.\"O \"O exits, the behavior of the kernel is
.\"O .BR UNSPECIFIED .
.\"O See the NOTES section for the current kernel behavior.)
通常時ルートファイルシステムに
ディレクトリ
.I /initrd
があれば、
.I /dev/ram0
デバイスは
.I /
から
.I /initrd
に移動される。
.I /initrd
ディレクトリが存在しない場合は、
.I /dev/ram0
はアンマウントされる。
.RI ( /
が
.I /initrd
に移動された場合には、
.I /dev/ram0
はアンマウントされず、その結果、
.I /dev/ram0
で走り始めたプロセスはそのまま残る事ができる。
もし、
.I /initrd
ディレクトリが通常時ルートファイルシステムに存在せず、
.I /linuxrc
が終了した時に
.I /dev/ram0
上で実行された、なんらかのプロセスが走り続けていた場合の
カーネルの動作は
.BR "決められていない (不定である)" 。
現在のカーネルが、この時どのような動作をするかについては、
「注意」を参照のこと。)
.IP 8.
.\"O The usual boot sequence (e.g., invocation of
.\"O .IR /sbin/init )
.\"O is performed on the normal root file system.
普通のブートシーケンス (例えば、
.I /sbin/init
の起動) が通常時ルートファイルシステム上で行われる。
.\"
.\"
.\"
.\"O .SS Options
.SS オプション
.\"O The following boot loader options, when used with
.\"O .BR initrd ,
.\"O affect the kernel's boot-up operation:
.B initrd
を用いる場合に、カーネルのブートアップ操作に影響を与える
ブートローダ・オプションは次のようなものがある、
.TP
.\"O .BI initrd= "filename"
.\"O Specifies the file to load as the contents of
.\"O .IR /dev/initrd .
.\"O For
.\"O .B LOADLIN
.\"O this is a command-line option.
.\"O For
.\"O .B LILO
.\"O you have to use this command in the
.\"O .B LILO
.\"O configuration file
.\"O .IR /etc/lilo.config .
.\"O The filename specified with this
.\"O option will typically be a gzipped file-system image.
.BI initrd= "filename"
.I /dev/initrd
の内容としてロードするファイルを指定する。
.B LOADLIN
では、これはコマンドラインオプションである。
.B LILO
では、
.B LILO
の設定ファイル
.I /etc/lilo.config
内でコマンドとして使用しなければならない。
このオプションで指定されるファイルは、多くの場合 gzip 圧縮された
ファイルシステムイメージである。
.TP
.\"O .I noinitrd
.\"O This boot option disables the two-phase boot-up operation.
.\"O The kernel performs the usual boot sequence as if
.\"O .I /dev/initrd
.\"O was not initialized.
.\"O With this option, any contents of
.\"O .I /dev/initrd
.\"O loaded into memory by the boot loader contents are preserved.
.\"O This option permits the contents of
.\"O .I /dev/initrd
.\"O to be any data and need not be limited to a file system image.
.\"O However, device
.\"O .I /dev/initrd
.\"O is read-only and can be read only one time after system startup.
.B noinitrd
この起動オプションは二段階の起動操作を無効にする。
カーネルは
.I /dev/initrd
が初期化されていない場合と同様の、通常のブートアップ動作を行う。
このオプションを用いると、ブートローダによってメモリ上にロードされた
.I /dev/initrd
の内容はそのまま保存される。
つまり、このオプションを用いることによって、
.I /dev/initrd
の内容を (ブート以外の目的に) 利用することが可能になる。また、その内容は
ファイルシステムイメージに限定されない。
しかし、
.I /dev/initrd
デバイスは読みだしのみ可能であり、システムの起動後 1 度しか読み出す事
ができない。
.TP
.\"O .BI root= "device-name"
.\"O Specifies the device to be used as the normal root file system.
.\"O .RB "For " LOADLIN
.\"O this is a command-line option.
.\"O .RB "For " LILO " this is a boot time option or
.\"O can be used as an option line in the
.\"O .B LILO
.\"O configuration file
.\"O .IR /etc/lilo.config .
.\"O The device specified by the this option must be a mountable
.\"O device having a suitable root file-system.
.BI root= "device-name"
通常時ルートファイルシステムとして使われるデバイスを指定する。
.B LOADLIN
では、これはコマンドラインオプションである。
.B LILO
ではコマンドラインオプション、または、
.B LILO
の設定ファイルである
.I /etc/lilo.config
のオプションラインとして使用する。
このオプションで指定されるデバイスは、適切なルートファイルシステムとし
てマウント可能なデバイスでなければならない。
.\"
.\"
.\"
.\"O .SS "Changing the Normal Root File System"
.SS 通常時ルートファイルシステムの変更
.\"O By default,
.\"O the kernel's settings
.\"O (e.g., set in the kernel file with
.\"O .BR rdev (8)
.\"O or compiled into the kernel file),
.\"O or the boot loader option setting
.\"O is used for the normal root file systems.
.\"O For an NFS-mounted normal root file system, one has to use the
.\"O .B nfs_root_name
.\"O and
.\"O .B nfs_root_addrs
.\"O boot options to give the NFS settings.
.\"O For more information on NFS-mounted root see the kernel documentation file
.\"O .BR Documentation/filesystems/nfsroot.txt .
.\"O For more information on setting the root file system see also the
.\"O .BR LILO
.\"O and
.\"O LOADLIN
.\"O documentation.
デフォルトでは、カーネルの設定
(例えば、
.BR rdev (8)
を用いてカーネルファイル内にセットされたもの、または、コンパイル時にカー
ネルファイル内に埋め込まれたもの)、
または、ブートローダのオプション設定によって指定されたものが通常時ルー
トファイルシステムとして使われる。
NFS マウントされた通常時ルートファイルシステムを利用する場合、
.B nfs_root_name
と
.B nfs_root_addrs
ブートオプションを使って NFS の設定を与えなければならない。
NFS マウントされたルート (ファイルシステム) についての
より詳しい情報は、カーネルのドキュメントファイル
.B Documentation/filesystems/nfsroot.txt
を参照のこと。
ルートファイルシステムの設定についてのより詳しい情報は、
.B LILO
と
.B LOADLIN
のドキュメントも参照のこと。
.PP
.\"O It is also possible for the
.\"O .I /linuxrc
.\"O executable to change the normal root device.
また、
.I /linuxrc
を用いる事によっても通常時ルートファイルシステムデバイスを変更すること
ができる。
.\"O For
.\"O .I /linuxrc
.\"O to change the normal root device,
.\"O .IR /proc
.\"O must be mounted.
.I /linuxrc
を用いて、通常時ルートデバイスを変更するためには、
.I /proc
がマウントされていなければならない。
.\"O After mounting
.\"O .IR /proc ,
.\"O .I /linuxrc
.\"O changes the normal root device by writing into the proc files
.\"O .IR /proc/sys/kernel/real-root-dev ,
.\"O .IR /proc/sys/kernel/nfs-root-name ,
.\"O and
.\"O .IR /proc/sys/kernel/nfs-root-addrs .
.I /proc
をマウントした後で、
.I /linuxrc
は proc ファイル
.IR /proc/sys/kernel/real-root-dev ,
.IR /proc/sys/kernel/nfs-root-name ,
.I /proc/sys/kernel/nfs-root-addrs
に書き込みを行い、通常時ルートデバイスを変更する。
.\"O For a physical root device, the root device is changed by having
.\"O .I /linuxrc
.\"O write the new root file system device number into
.\"O .IR /proc/sys/kernel/real-root-dev .
(NFS ではない) 物理的なルートデバイスの場合、
.I /linuxrc
が新しいルートファイルシステムのデバイス番号を
.I /proc/sys/kernel/real-root-dev
に書き込むことで、ルートデバイスが変更される。
.\"O For an NFS root file system, the root device is changed by having
.\"O .I /linuxrc
.\"O write the NFS setting into files
.\"O .IR /proc/sys/kernel/nfs-root-name
.\"O and
.\"O .I /proc/sys/kernel/nfs-root-addrs
.\"O and then writing 0xff (e.g., the pseudo-NFS-device number) into file
.\"O .IR /proc/sys/kernel/real-root-dev .
NFS ルートファイルシステムの場合、
.I /linuxrc
が NFS の設定を
.I /proc/sys/kernel/nfs-root-name
と
.I /proc/sys/kernel/nfs-root-addrs
に書き込み、それから
.I /proc/sys/kernel/real-root-dev
に (疑似 NFS デバイスナンバーである) 0xff を書き込むことで、
ルートデバイスが変更される。
.\"O For example, the following shell command line would change
.\"O the normal root device to
.\"O .IR /dev/hdb1 :
例えば、次のシェルコマンドラインにより、通常時ルートデバイスを
.I /dev/hdb1
に変更できるだろう:
.nf

    echo 0x365 >/proc/sys/kernel/real-root-dev

.fi
.\"O For an NFS example, the following shell command lines would change the
.\"O normal root device to the NFS directory
.\"O .I /var/nfsroot
.\"O on a local networked NFS server with IP number 193.8.232.7 for a system with
.\"O IP number 193.8.232.7 and named "idefix":
また、NFS の場合、次のようなシェルコマンドラインにより、
ローカルネットワークの 193.8.232.2 という IP アドレスを持つ NFS サーバの
NFS ディレクトリ
.I /var/nfsroot
を 193.8.232.7 という IP アドレスを持つ "idefix" という名前のシ
ステムの通常時ルートデバイスとしてマウントするように変更できるだろう:
.nf

    echo /var/nfsroot >/proc/sys/kernel/nfs-root-name
    echo 193.8.232.2:193.8.232.7::255.255.255.0:idefix \\
        >/proc/sys/kernel/nfs-root-addrs
    echo 255 >/proc/sys/kernel/real-root-dev
.fi

.\"O .BR Note :
.BR 注意 :
.\"O The use of
.\"O .I /proc/sys/kernel/real-root-dev
.\"O to change the root file system is obsolete.
ルートファイルシステムを変更するために
.I /proc/sys/kernel/real-root-dev
を使うのは以前の方法である。
.\"O See the kernel source file
.\"O .I Documentation/initrd.txt
.\"O as well as
.\"O .BR pivot_root (2)
.\"O and
.\"O .BR pivot_root (8)
.\"O for information on the modern method of changing the root file system.
.\"O .\" FIXME the manual page should describe the pivot_root mechanism.
ルートファイルシステムを変更する新しい方法についての情報は、
カーネルソースに含まれる
.I Documentation/initrd.txt
ファイルや、
.BR pivot_root (2)
や
.BR pivot_root (8)
を参照してほしい。
.\" FIXME マニュアルページで pivot_root の仕組みを説明する必要がある。
.\"
.\"
.\"
.\"O .SS Usage
.SS 使い方
.\"O The main motivation for implementing
.\"O .B initrd
.\"O was to allow for modular kernel configuration at system installation.
.B initrd
が実装された主な目的は、システムインストール時に、モジュール化されたカー
ネルの設定を可能にすることであった。
.PP
.\"O A possible system installation scenario is as follows:
次のような流れのシステムインストールが可能になる:
.IP 1. 3
.\"O The loader program boots from floppy or other media with a minimal kernel
.\"O (e.g., support for
.\"O .IR /dev/ram ,
.\"O .IR /dev/initrd ,
.\"O and the ext2 file-system) and loads
.\"O .IR /dev/initrd
.\"O with a gzipped version of the initial file-system.
ローダプログラムは、フロッピーやその他のメディアから、
最小限のカーネル (例えば、
.IR /dev/ram ,
.IR /dev/initrd ,
ext2 ファイルシステムのみのサポートしたカーネル) をブートし、
gzip 圧縮された初期ファイルシステムイメージを
.I /dev/initrd
にロードする。
.IP 2.
.\"O The executable
.\"O .I /linuxrc
.\"O determines what is needed to (1) mount the normal root file-system
.\"O (i.e., device type, device drivers, file system) and (2) the
.\"O distribution media (e.g., CD-ROM, network, tape, ...).
.\"O This can be done by asking the user, by auto-probing,
.\"O or by using a hybrid approach.
実行ファイル
.I /linuxrc
は、(1) 通常時ルートファイルシステムのマウントに何が必要か
(すなわち、デバイスタイプ、デバイスドライバ、ファイルシステム)、
(2) 配布メディアに何が必要か (例えば、CD-ROM, ネットワーク、テープなど)
を決定する。決定は、ユーザへの問い合わせ、自動検出、あるいはその両者の
方法を組み合わせて行われる。
.IP 3.
.\"O The executable
.\"O .I /linuxrc
.\"O loads the necessary modules from the initial root file-system.
実行ファイル
.I /linuxrc
は、初期ルートファイルシステムから必要なモジュールをロードする。
.IP 4.
.\"O The executable
.\"O .I /linuxrc
.\"O creates and populates the root file system.  (At this stage the normal
.\"O root file system does not have to be a
.\"O completed system yet.)
実行ファイル
.I /linuxrc
は、ルートファイルシステムを作成し、配置する (この段階では、通常時ルー
トファイルシステムは完全なシステムである必要はない)。
.IP 5.
.\"O The executable
.\"O .IR /linuxrc
.\"O sets
.\"O .IR /proc/sys/kernel/real-root-dev ,
.\"O unmount
.\"O .IR /proc ,
.\"O the normal root file system and any other file
.\"O systems it has mounted, and then terminates.
実行ファイル
.I /linuxrc
は、
.I /proc/sys/kernel/real-root-dev
を設定し、
.IR /proc "、"
マウントされている通常時ファイルシステム及びその他のファイルシステム
をアンマウントし、
実行を終了する。
.IP 6.
.\"O The kernel then mounts the normal root file system.
次に、カーネルは、通常時ルートファイルシステムをマウントする。
.IP 7.
.\"O Now that the file system is accessible and intact,
.\"O the boot loader can be installed.
この段階で、ファイルシステムは全く変更が行われていない状態で、
アクセスできる状態になる。
また、ブートローダをインストールすることができる。
.IP 8.
.\"O The boot loader is configured to load into
.\"O .I /dev/initrd
.\"O a file system with the set of modules that was used to bring up the system.
.\"O (e.g., Device
.\"O .I /dev/ram0
.\"O can be modified, then unmounted, and finally, the image is written from
.\"O .I /dev/ram0
.\"O to a file.)
ブートローダを設定し、システム起動時に使用されるカーネルモジュールのセッ
トを含んだファイルシステムを
.I /dev/initrd
にロードする (例えば、
.I /dev/ram0
デバイスの内容を修正し、アンマウントする。最後に、
.I /dev/ram0
のイメージをファイルに書き出す)。
.IP 9.
.\"O The system is now bootable and additional installation tasks can be
.\"O performed.
これで、システムがブート可能になる。この後、さらにその他のインストール
の作業を実行できる。
.PP
.\"O The key role of
.\"O .I /dev/initrd
.\"O in the above is to reuse the configuration data during normal system operation
.\"O without requiring initial kernel selection, a large generic kernel or,
.\"O recompiling the kernel.
上記の動作での
.I /dev/initrd
の役割のキーポイントは、初期カーネルの選択や大きなジェネリックカーネル、
カーネルの再構築なしに、通常のシステム操作で再利用可能な設定データを利
用することにある。
.PP
.\"O A second scenario is for installations where Linux runs on systems with
.\"O different hardware configurations in a single administrative network.
.\"O In such cases, it may be desirable to use only a small set of kernels
.\"O (ideally only one) and to keep the system-specific part of configuration
.\"O information as small as possible.
.\"O In this case, create a common file
.\"O with all needed modules.
.\"O Then, only the
.\"O .I /linuxrc
.\"O file or a file executed by
.\"O .I /linuxrc
.\"O would be different.
2 番目のケースは、一つの管理上のネットワークにおいて、異なる設定のハー
ドウェアのシステム上で Linux を動作させるためのインストールを行う場合
である。
このようなケースの場合、ごく小数のカーネルのセット (理想的にはたった一
つのカーネル) のみを利用し、システム固有の設定情報は可能な限り小さくす
ることが望ましいであろう。
この場合、全ての必要なモジュールが入った共通ファイルを作成する。
そして、
.I /linuxrc
ファイル、または、
.I /linuxrc
から実行されるファイルのみを異なったものにしておく。
.PP
.\"O A third scenario is more convenient recovery disks.
.\"O Because information like the location of the root file-system
.\"O partition is not needed at boot time, the system loaded from
.\"O .I /dev/initrd
.\"O can use a dialog and/or auto-detection followed by a
.\"O possible sanity check.
3 番目のケースは、より便利な復旧用ディスクを作る場合である。
ルートファイルシステムのパーティションの位置といった情報は
ブート時に必要ないため、
.I /dev/initrd
からロードされたシステムは、
必要な正常性チェックを行った後で、ユーザへの問い合わせや自動検出
(もしくはその両方) を行うことができるようになる。
.PP
.\"O Last but not least, Linux distributions on CD-ROM may use
.\"O .B initrd
.\"O for easy installation from the CD-ROM.
.\"O The distribution can use
.\"O .B LOADLIN
.\"O to directly load
.\"O .I /dev/initrd
.\"O from CD-ROM without the need of any floppies.
.\"O The distribution could also use a
.\"O .B LILO
.\"O boot floppy and then bootstrap a bigger ram disk via
.\"O .IR /dev/initrd
.\"O from the CD-ROM.
(他にもたくさん例があるだろうが) 最後の例としては、
.B initrd
を利用すると、CD-ROM 上の Linux ディストリビューションを
より簡単に CD-ROM からインストールすることができるだろう。
ディストリビューションは、
.B LOADLIN
を使って、フロッピーを全く利用せずに CD-ROM から
.I /dev/initrd
を直接ロードすることができる。
また、
.B LILO
ブートフロッピーを使ってブートを行い、
.I /dev/initrd
を通して CD-ROM からより大きな RAM ディスクを起動することもできる。
.\"
.\"
.\"
.\"O .SH FILES
.SH ファイル
.I /dev/initrd
.br
.I /dev/ram0
.br
.I /linuxrc
.br
.I /initrd
.\"
.\"
.\"
.\"O .SH NOTES
.SH 注意
.IP 1. 3
.\"O With the current kernel, any file systems that remain mounted when
.\"O .I /dev/ram0
.\"O is moved from
.\"O .I /
.\"O to
.\"O .I /initrd
.\"O continue to be accessible.
.\"O However, the
.\"O .I /proc/mounts
.\"O entries are not updated.
現在のカーネルでは、
.I /dev/ram0
が
.I /
から
.I /initrd
に移動された際に、移動時にマウントされていたファイルシステムは、
その後も継続的にアクセス可能である。しかし、
.I /proc/mounts
のエントリは更新されない。
.IP 2.
.\"O With the current kernel, if directory
.\"O .I /initrd
.\"O does not exist, then
.\"O .I /dev/ram0
.\"O will
.\"O .B not
.\"O be fully unmounted if
.\"O .I /dev/ram0
.\"O is used by any process or has any file-system mounted on it.
.\"O If
.\"O .IR /dev/ram0
.\"O is
.\"O .B not
.\"O fully unmounted, then
.\"O .I /dev/ram0
.\"O will remain in memory.
現在のカーネルでは、ディレクトリ
.I /initrd
が存在しない場合、
.I /dev/ram0
を何らかのプロセスが利用していたり、何らかのファイルシステムが
.I /dev/ram0
上にマウントされていると、
.I /dev/ram0
は完全にはアンマウント「されない」。
.I /dev/ram0
が、完全にアンマウント「されなければ」、
.I /dev/ram0
はメモリ上に残ってしまうはずである。
.IP 3.
.\"O Users of
.\"O .I /dev/initrd
.\"O should not depend on the behavior give in the above notes.
.\"O The behavior may change in future versions of the Linux kernel.
.I /dev/initrd
の利用者は、上記の注意事項で述べた動作に依存しないようにすべきである。
これらの動作は Linux カーネルの将来のバージョンでは変更される
かもしれないからだ。
.\"
.\"
.\"
.\"O .\" .SH AUTHOR
.\" .SH 著者
.\"O .\" The kernel code for device
.\"O .\" .BR initrd
.\"O .\" was written by Werner Almesberger <almesber@lrc.epfl.ch> and
.\"O .\" Hans Lermen <lermen@elserv.ffm.fgan.de>.
.\" .BR initrd
.\" デバイスのためのカーネルコードは Werner Almesberger <almesber@lrc.epfl.ch>
.\" と Hans Lermen <lermen@elserv.ffm.fgan.de> によって書かれた。
.\"O .\" The code for
.\"O .\" .BR initrd
.\"O .\" was added to the baseline Linux kernel in development version 1.3.73.
.\" .BR initrd
.\" のためのコードは、開発者向けバージョンの 1.3.73 で
.\" メインの Linux カーネルに組み込まれた。
.\"O .SH "SEE ALSO"
.SH 関連項目
.BR chown (1),
.BR mknod (1),
.BR ram (4),
.BR freeramdisk (8),
.BR rdev (8)

.\"O The documentation file
.\"O .I initrd.txt
.\"O in the kernel source package, the LILO documentation,
.\"O the LOADLIN documentation, the SYSLINUX documentation.
カーネルソースパッケージに含まれるドキュメントファイル
.IR initrd.txt "、"
LILO のドキュメント、LOADLIN のドキュメント、SYSLINUX のドキュメント。
