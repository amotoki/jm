.\" This man page is Copyright (C) 1998 Heiner Eisen.
.\" Permission is granted to distribute possibly modified copies
.\" of this page provided the header is included verbatim,
.\" and in case of nontrivial modification author and date
.\" of the modification is added to the header.
.\" $Id: x25.7,v 1.4 1999/05/18 10:35:12 freitag Exp $
.\"
.\" Japanese Version Copyright (c) 1999 NAKANO Takeo all rights reserved.
.\" Translated Mon 6 Dec 1999 by NAKANO Takeo <nakano@apm.seikei.ac.jp>
.\"
.TH X25 7 2008-08-08 "Linux" "Linux Programmer's Manual"
.\"O .SH NAME
.\"O x25, AF_X25 \- ITU-T X.25 / ISO-8208 protocol interface.
.SH 名前
x25, AF_X25 \- ITU-T X.25 / ISO-8208 プロトコルインターフェース
.\"O .SH SYNOPSIS
.SH 書式
.B #include <sys/socket.h>
.br
.B #include <linux/x25.h>
.sp
.B x25_socket = socket(AF_X25, SOCK_SEQPACKET, 0);
.\"O .SH DESCRIPTION
.SH 説明
.\"O X25 sockets provide an interface to the X.25 packet layer protocol.
.\"O This allows applications to
.\"O communicate over a public X.25 data network as standardized by
.\"O International Telecommunication Union's recommendation X.25
.\"O (X.25 DTE-DCE mode).
.\"O X25 sockets can also be used for communication
.\"O without an intermediate X.25 network (X.25 DTE-DTE mode) as described
.\"O in ISO-8208.
X25 ソケットは X.25 パケット層プロトコルに対するインターフェースを提供する。
これにより、アプリケーションはパブリックな X.25 データネットワークで
通信することができるようになる。 X.25 は
International Telecommunication Union's recommendation X.25
(X.25 DTE-DCE mode) で標準化されている。
X25 ソケットは、中間層のない X.25 ネットワーク (X.25 DTE-DTE mode)
での通信にも用いることができる。
DTE-DTE モードは ISO-8208 に記述されている。
.PP
.\"O Message boundaries are preserved \(em a
.\"O .BR read (2)
.\"O from a socket will
.\"O retrieve the same chunk of data as output with the corresponding
.\"O .BR write (2)
.\"O to the peer socket.
.\"O When necessary, the kernel takes care
.\"O of segmenting and reassembling long messages by means of
.\"O the X.25 M-bit.
.\"O There is no hard-coded upper limit for the
.\"O message size.
.\"O However, reassembling of a long message might fail if
.\"O there is a temporary lack of system resources or when other constraints
.\"O (such as socket memory or buffer size limits) become effective.
.\"O If that
.\"O occurs, the X.25 connection will be reset.
メッセージ境界は保存される。ソケットからの
.BR read (2)
は、反対側のソケットからの対応する
.BR write (2)
と同じ大きさのデータを受け取り、出力する。
必要がある場合は、カーネルが長いメッセージの
分割 (segmenting) と再構成 (reassembling) を行う。
これには X.25 の M ビットが用いられる。
メッセージサイズには、ハードコーディングされた上限はない。
しかし、一時的にシステムリソースが足りなかったり、
他の制約 (ソケットメモリバッファのサイズ制限など) が
効いてしまうと、長いメッセージの再構成には失敗するかもしれない。
この場合、その X.25 接続はリセットされることになる。
.\"O .SS Socket Addresses
.SS ソケットアドレス
.\"O The
.\"O .B AF_X25
.\"O socket address family uses the
.\"O .I struct sockaddr_x25
.\"O for representing network addresses as defined in ITU-T
.\"O recommendation X.121.
.B AF_X25
ソケットアドレスファミリーは、ネットワークアドレスを表すために
.I struct sockaddr_x25
を用いる。これは ITU-T recommendation X.121 で定義されている。
.PP
.in +4n
.nf
struct sockaddr_x25 {
    sa_family_t sx25_family;    /* must be AF_X25 */
    x25_address sx25_addr;      /* X.121 Address */
};
.fi
.in
.PP
.\"O .I sx25_addr
.\"O contains a char array
.\"O .I x25_addr[]
.\"O to be interpreted as a null-terminated string.
.\"O .I sx25_addr.x25_addr[]
.\"O consists of up to 15 (not counting the terminating 0) ASCII
.\"O characters forming the X.121 address.
.\"O Only the decimal digit characters from \(aq0\(aq to \(aq9\(aq are allowed.
.I sx25_addr
には char 配列
.I x25_addr[]
を含まれる。これは 0 で終端する文字列として解釈される。
.I sx25_addr.x25_addr[]
は 15 個までの ASCII 文字を含むことができ (終端の 0 は含まない)、
これが X.121 アドレスをなす。
10 進の数文字、\(aq0\(aq から \(aq9\(aq までだけが許される。
.\"O .SS Socket Options
.SS ソケットオプション
.\"O The following X.25-specific socket options can be set by using
.\"O .BR setsockopt (2)
.\"O and read with
.\"O .BR getsockopt (2)
.\"O with the
.\"O .I level
.\"O argument set to
.\"O .BR SOL_X25 .
以下の X.25 特有のソケットオプションは、
.BR setsockopt (2)
で設定でき、
.BR getsockopt (2)
で取得できる。このとき
.I level
引き数には
.B SOL_X25
を指定する。
.TP
.B X25_QBITINCL
.\"O Controls whether the X.25 Q-bit (Qualified Data Bit) is accessible by the
.\"O user.
.\"O It expects an integer argument.
.\"O If set to 0 (default),
.\"O the Q-bit is never set for outgoing packets and the Q-bit of incoming
.\"O packets is ignored.
.\"O If set to 1, an additional first byte is prepended
.\"O to each message read from or written to the socket.
.\"O For data read from
.\"O the socket, a 0 first byte indicates that the Q-bits of the corresponding
.\"O incoming data packets were not set.
.\"O A first byte with value 1 indicates
.\"O that the Q-bit of the corresponding incoming data packets was set.
.\"O If the first byte of the data written to the socket is 1 the Q-bit of the
.\"O corresponding outgoing data packets will be set.
.\"O If the first byte is 0
.\"O the Q-bit will not be set.
X.25 の Q ビット (Qualified データビット) にユーザーがアクセス
できるかどうかをコントロールする。整数の引数を取る。
0 にセットすると、 Q ビットは発信パケットには決してセットされず、
受信パケットでは無視される (デフォルト)。
1 にセットすると、ソケットから読む、あるいはソケットに送る
メッセージそれぞれに先頭バイトが前置される。
ソケットから読んだデータでは、先頭バイトが 0 だと、
この到着データパケットに対応する Q ビットはセットされていなかったことになる。
先頭バイトが 1 だと、到着データパケットの
Q ビットがセットされていたことになる。
ソケットに書き込むデータの先頭バイトが 1 だと、
その発信パケットの Q ビットをセットする。
0 だと、 Q ビットをセットしない。
.\"O .SH VERSIONS
.SH バージョン
.\"O The AF_X25 protocol family is a new feature of Linux 2.2.
AF_X25 プロトコルファミリは Linux 2.2 の新機能である。
.\"O .SH BUGS
.SH バグ
.\"O Plenty, as the X.25 PLP implementation is
.\"O .BR CONFIG_EXPERIMENTAL .
X.25 PLP 実装は
.B CONFIG_EXPERIMENTAL
なので、たくさんあるだろう。
.PP
.\"O This man page is incomplete.
この man ページは完成していない。
.PP
.\"O There is no dedicated application programmer's header file yet;
.\"O you need to include the kernel header file
.\"O .IR <linux/x25.h> .
.\"O .B CONFIG_EXPERIMENTAL
.\"O might also imply that future versions of the
.\"O interface are not binary compatible.
まだアプリケーションプログラマー用のヘッダファイルがない。
カーネルのヘッダファイル
.I <linux/x25.h>
をインクルードしなければならない。
.B CONFIG_EXPERIMENTAL
なので、将来のバージョンのインターフェースでは
バイナリ互換性が失われるかもしれない。
.PP
.\"O X.25 N-Reset events are not propagated to the user process yet.
.\"O Thus,
.\"O if a reset occurred, data might be lost without notice.
X.25 N-Reset イベントは、まだユーザープロセスに伝播しない。
したがってリセットが起こると、データは通知無しに失われる。
.\"O .SH "SEE ALSO"
.SH 関連項目
.BR socket (2),
.BR socket (7)
.PP
Jonathan Simon Naylor:
.\"O \(lqThe Re-Analysis and Re-Implementation of X.25.\(rq
\(lqX.25 の再分析と再実装\(rq
.\"O The URL is
.RS
URL は
.I ftp://ftp.pspt.fi/pub/ham/linux/ax25/x25doc.tgz
.RE
