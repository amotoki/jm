.\" Copyright (c) 1993 Michael Haardt (michael@moria.de),
.\"   Fri Apr  2 11:32:09 MET DST 1993
.\" and Andries Brouwer (aeb@cwi.nl), Fri Feb 14 21:47:50 1997.
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111,
.\" USA.
.\"
.\" Modified Sun Jul 25 10:45:30 1993 by Rik Faith (faith@cs.unc.edu)
.\" Modified Sun Jul 21 21:25:26 1996 by Andries Brouwer (aeb@cwi.nl)
.\" Modified Mon Oct 21 17:47:19 1996 by Eric S. Raymond (esr@thyrsus.com)
.\" Modified Wed Aug 27 20:28:58 1997 by Nicolas Lichtmaier (nick@debian.org)
.\" Modified Mon Sep 21 00:00:26 1998 by Andries Brouwer (aeb@cwi.nl)
.\" Modified Wed Jan 24 06:37:24 2001 by Eric S. Raymond (esr@thyrsus.com)
.\" Modified Thu Dec 13 23:53:27 2001 by Martin Schulze <joey@infodrom.org>
.\"
.\" nakano 注: Nicolas さんの a はオリジナルでは \'a だが,
.\" キャラクタを壊すので a に変更した.
.\"
.\" Japanese Version Copyright (c) 1997 KURODA Masaru all rights reserved.
.\" Translated May 27, 1997 by KURODA Masaru <kuro@st.rim.or.jp>
.\" Modified Sat 25 Jul 1998 by NAKANO Takeo <nakano@apm.seikei.ac.jp>
.\" Modified Sun 6 Dec 1998 by NAKANO Takeo <nakano@apm.seikei.ac.jp>
.\" Updated & Modified Sat Aug 21 1999
.\"       by NAKANO Takeo <nakano@apm.seikei.ac.jp>
.\" Updated & Modified Sat 18 Mar 2000 by NAKANO Takeo
.\" Updated Sat Dec 22 JST 2001 by Kentaro Shirakata <argrath@ub32.org>
.\" Updated Sat Mar 23 JST 2002 by Kentaro Shirakata <argrath@ub32.org>
.\" Updated 2010-04-11, Akihiro MOTOKI <amotoki@dd.iij4u.or.jp>, LDP v3.24
.\"
.\"WORD:	environment		環境
.\"WORD:	environment variable	環境変数
.\"WORD:	shell variable		シェル変数
.\"WORD:	locale			ロケール
.\"WORD:	locale category		ロケールカテゴリ
.\"
.TH ENVIRON 7 2009-07-25 "Linux" "Linux Programmer's Manual"
.\"O .SH NAME
.\"O environ \- user environment
.SH 名前
environ \- ユーザ環境
.\"O .SH SYNOPSIS
.SH 書式
.nf
.BI "extern char **" environ ;
.br
.fi
.\"O .SH DESCRIPTION
.SH 説明
.\"O The variable
.\"O .I environ
.\"O points to an array of pointers to strings called the "environment".
.\"O The last pointer in this array has the value NULL.
.\"O (This variable must be declared in the user program,
.\"O but is declared in the header file
.\"O .I <unistd.h>
.\"O in case the header files came from libc4 or libc5, and
.\"O in case they came from glibc and
.\"O .B _GNU_SOURCE
.\"O was defined.)
.\"O This array of strings is made available to the process by the
.\"O .BR exec (3)
.\"O call that started the process.
変数
.I environ
は「環境 (environment)」と呼ばれる文字列へのポインタの配列である。
この配列の最後のポインタの値は NULL である。
(この変数はユーザープログラムで宣言しなければならない。
ただし libc4 や libc5 のヘッダーファイルなら
.I <unistd.h>
で宣言されているし、これが glibc 由来のものでも
.B _GNU_SOURCE
が define されていれば宣言済みとなる)。
この文字列配列は、
プロセスを起動する
.BR exec (3)
によって、その起動されたプロセスで利用できるようになる。

.\"O By convention the strings in
.\"O .I environ
.\"O have the form "\fIname\fP\fB=\fP\fIvalue\fP".
.\"O Common examples are:
通例では、
.I environ
の文字列は "\fIname\fP\fB=\fP\fIvalue\fP" という書式をとる。
よく用いられる例を以下に示す。
.TP
.B USER
.\"O The name of the logged-in user (used by some BSD-derived programs).
ユーザのログイン名 (BSD 起源のプログラムなどによって使用される)。
.TP
.B LOGNAME
.\"O The name of the logged-in user (used by some System-V derived programs).
ユーザのログイン名(System V 起源のプログラムなどによって使用される)。
.TP
.B HOME
.\"O A user's login directory, set by
.\"O .BR login (1)
.\"O from the password file
.\"O .BR passwd (5).
ユーザのログインディレクトリ。
.BR login (1)
がパスワードファイル
.BR passwd (5)
から取得して設定する。
.TP
.B LANG
.\"O The name of a locale to use for locale categories when not overridden
.\"O by \fBLC_ALL\fP or more specific environment variables like
.\"O \fBLC_COLLATE\fP, \fBLC_CTYPE\fP, \fBLC_MESSAGES\fP, \fBLC_MONETARY\fP,
.\"O \fBLC_NUMERIC\fP, \fBLC_TIME\fP, cf.
.\"O .BR locale (5).
ロケールの各カテゴリで使用されるロケールの名前。\fBLC_ALL\fP や、
より狭い範囲を対象とする環境変数
.RB ( LC_COLLATE ,
.BR LC_CTYPE ,
.BR LC_MESSAGES ,
.BR LC_MONETARY ,
.BR LC_NUMERIC ,
.B LC_TIME
など)
によって上書きされることもある。
.BR locale (5)
を見よ。
.TP
.B PATH
.\"O The sequence of directory prefixes that
.\"O .BR sh (1)
.\"O and many other
.\"O programs apply in searching for a file known by an incomplete pathname.
.\"O The prefixes are separated by \(aq\fB:\fP\(aq.
.\"O (Similarly one has \fBCDPATH\fP used by some shells to find the target
.\"O of a change directory command, \fBMANPATH\fP used by
.\"O .BR man (1)
.\"O to
.\"O find manual pages, etc.)
.BR sh (1)
や他のプログラムが、フルパスで与えられなかった実行ファイルを検索するとき、
ファイル名に前置されるディレクトリの配列。
各ディレクトリは \(aq\fB:\fP\(aq によって区切られる。
(同じようなものに、
シェルがディレクトリ変更コマンドの変更先を探すために用いる
\fBCDPATH\fP や、
.BR man (1)
がマニュアルページの検索に用いる \fBMANPATH\fP などがある。)
.TP
.B PWD
.\"O The current working directory.
.\"O Set by some shells.
現在のワーキングディレクトリ。いくつかのシェルが設定する。
.TP
.B SHELL
.\"O The pathname of the user's login shell.
ユーザーのログインシェルのパス名。
.TP
.B TERM
.\"O The terminal type for which output is to be prepared.
端末の種類。出力はこれにあわせて用意される。
.TP
.B PAGER
.\"O The user's preferred utility to display text files.
テキストファイルを表示するユーテリティ。ユーザーが好みのものを設定する。
.TP
.BR EDITOR / VISUAL
.\"O The user's preferred utility to edit text files.
テキストファイルを編集するユーテリティ。ユーザーが好みのものを設定する。
.\" .TP
.\" .B BROWSER
.\"O .\" The user's preferred utility to browse URLs. Sequence of colon-separated
.\"O .\" browser commands. See http://www.catb.org/~esr/BROWSER/ .
.\" URL の閲覧に用いるユーティリティ。ユーザーが好みのものを設定する。
.\" コロンで区切ってブラウザコマンドを並べる。
.\" http://www.catb.org/~esr/BROWSER/ を見よ。
.PP
.\"O Further names may be placed in the environment by the \fIexport\fP
.\"O command and "name=value" in
.\"O .BR sh (1),
.\"O or by the \fIsetenv\fP command if you use
.\"O .BR csh (1).
.\"O Arguments may also be placed in the
.\"O environment at the point of an
.\"O .BR exec (3).
.\"O A C program can manipulate its environment using the functions
.\"O .BR getenv (3),
.\"O .BR putenv (3),
.\"O .BR setenv (3),
.\"O and
.\"O .BR unsetenv (3).
環境に名前を追加する場合には、
.BR sh (1)
では \fIexport\fP コマンドと "name=value" を使用する。
.BR csh (1)
では \fIsetenv\fP コマンドを使用する。
.BR exec (3)
の引数としても環境を設定することができる。
C プログラムからは、
.BR getenv (3),
.BR putenv (3),
.BR setenv (3),
.BR unsetenv (3)
などの関数を用いて環境を扱うことができる。

.\"O Note that the behavior of many programs and library routines is
.\"O influenced by the presence or value of certain environment variables.
.\"O A random collection:
プログラムやライブラリルーチンの多くは、それぞれ適当な環境変数の存在
や値によって、動作に影響を受けることがある。以下、適宜挙げてみよう。
.LP
.\"O The variables
.\"O .BR LANG ", " LANGUAGE ", " NLSPATH ", " LOCPATH ", "
.\"O .BR LC_ALL ", " LC_MESSAGES ", "
.\"O etc. influence locale handling, cf.
.\"O .BR locale (5).
.BR LANG ", " LANGUAGE ", " NLSPATH ", " LOCPATH ", "
.BR LC_ALL ", " LC_MESSAGES ", "
などの変数。ロケールの扱いに影響する。
.BR locale (5)
を見よ。
.LP
.\"O .B TMPDIR
.\"O influences the path prefix of names created by
.\"O .BR tmpnam (3)
.\"O and other routines, the temporary directory used by
.\"O .BR sort (1)
.\"O and other programs, etc.
.B TMPDIR
は
.BR tmpnam (3)
などのルーチンによって作成されるファイル名に前置されるパスに影響する。また
.BR sort (1)
の一時ディレクトリに用いられたり、他のプログラムからも利用される。
.LP
.\"O .BR LD_LIBRARY_PATH ", " LD_PRELOAD
.\"O and other LD_* variables influence
.\"O the behavior of the dynamic loader/linker.
.BR LD_LIBRARY_PATH ", " LD_PRELOAD
などの LD_* 変数はダイナミックローダ・リンカの動作に影響する。
.LP
.\"O .B POSIXLY_CORRECT
.\"O makes certain programs and library routines follow
.\"O the prescriptions of POSIX.
.B POSIXLY_CORRECT
が指定されると、ある種のプログラムやライブラリルーチンは
POSIX の規定に従うようになる。
.LP
.\"O The behavior of
.\"O .BR malloc (3)
.\"O is influenced by
.\"O .B MALLOC_*
.\"O variables.
.BR malloc (3)
の動作は
.B MALLOC_*
変数によって影響される。
.LP
.\"O The variable
.\"O .B HOSTALIASES
.\"O gives the name of a file containing aliases
.\"O to be used with
.\"O .BR gethostbyname (3).
.B HOSTALIAS
変数は、
.BR gethostbyname (3)
が用いるエイリアスが書かれているファイル名を与える。
.LP
.\"O .BR TZ " and " TZDIR
.\"O give timezone information used by
.\"O .BR tzset (3)
.\"O and through that by functions like
.\"O .BR ctime (3),
.\"O .BR localtime (3),
.\"O .BR mktime (3),
.\"O .BR strftime (3).
.\"O See also
.\"O .BR tzselect (8).
.BR TZ " と " TZDIR
は
.BR tzset (3)
および、この関数を使う
.BR ctime (3),
.BR localtime (3),
.BR mktime (3),
.BR strftime (3)
といった関数で用いられるタイムゾーンの情報を与える。
.BR tzselect (8)
も参照のこと。
.LP
.\"O .B TERMCAP
.\"O gives information on how to address a given terminal
.\"O (or gives the name of a file containing such information).
.B TERMCAP
は、現在の端末情報の取得先
(あるいはそのような情報が書かれているファイル名) を与える。
.LP
.\"O .BR COLUMNS " and " LINES
.\"O tell applications about the window size, possibly overriding the actual size.
.BR COLUMNS " と " LINES
アプリケーションにウインドウのサイズを伝える。
実際のサイズとは違う値を与えることもできる。
.LP
.\"O .BR PRINTER " or " LPDEST
.BR PRINTER " または " LPDEST
.\"O may specify the desired printer to use.
.\"O See
.\"O .BR lpr (1).
用いたいプリンタを指定する。
.BR lpr (1)
を参照のこと。
.LP
.\"O Etc.
などなど...
.\"O .SH BUGS
.SH バグ
.\"O Clearly there is a security risk here.
.\"O Many a system command has been
.\"O tricked into mischief by a user who specified unusual values for
.\"O .BR IFS " or " LD_LIBRARY_PATH .
これらの中には、明らかにセキュリティ上の危険が存在する。
ユーザーが
.BR IFS " や " LD_LIBRARY_PATH
に異常な値を与えたことによって、
これまで多くのシステムコマンドがだまされて、
システムをひどい目にあわせてきた。

.\"O There is also the risk of name space pollution.
.\"O Programs like
.\"O .I make
.\"O and
.\"O .I autoconf
.\"O allow overriding of default utility names from the
.\"O environment with similarly named variables in all caps.
.\"O Thus one uses
.\"O .B CC
.\"O to select the desired C compiler (and similarly
.\"O .BR MAKE ,
.\"O .BR AR ,
.\"O .BR AS ,
.\"O .BR FC ,
.\"O .BR LD ,
.\"O .BR LEX ,
.\"O .BR RM ,
.\"O .BR YACC ,
.\"O etc.).
名前空間が汚染される危険性も存在する。
.I make
や
.I autoconf
のようなプログラムでは、デフォルトのユーティリティを
環境にある似たような名前の変数で上書きすることができる
(通常はすべて大文字の変数を用いる)。
すなわち、利用したい C コンパイラは
.B CC
で選択できる。また同様に
.BR MAKE ,
.BR AR ,
.BR AS ,
.BR FC ,
.BR LD ,
.BR LEX ,
.BR RM ,
.B YACC
なども用いることができる。
.\"O However, in some traditional uses such an environment variable
.\"O gives options for the program instead of a pathname.
.\"O Thus, one has
.\"O .BR MORE ,
.\"O .BR LESS ,
.\"O and
.\"O .BR GZIP .
.\"O Such usage is considered mistaken, and to be avoided in new
.\"O programs.
.\"O The authors of
.\"O .I gzip
.\"O should consider renaming their option to
.\"O .BR GZIP_OPT .
ところが一方では、このような変数を
(パス名ではなく)
プログラムに対するオプションとして扱うような流儀も存在してきた。
例えば
.BR MORE ,
.BR LESS ,
.B GZIP
などがそうである。
このような利用法は間違っていると考えるべきで、
新しいプログラムでは避けるべきである。
.I gzip
の作者たちは、オプションを与える環境変数を
.B GZIP_OPT
に改名することを考えるほうがよい。
.\"O .SH "SEE ALSO"
.SH 関連項目
.BR bash (1),
.BR csh (1),
.BR login (1),
.BR sh (1),
.BR tcsh (1),
.BR execve (2),
.BR clearenv (3),
.BR exec (3),
.BR getenv (3),
.BR putenv (3),
.BR setenv (3),
.BR unsetenv (3),
.BR locale (5)
