'\" t
.\" Hey Emacs! This file is -*- nroff -*- source.
.\"
.\" Copyright (C) 2008, Linux Foundation, written by Michael Kerrisk
.\" <mtk.manpages@gmail.com>
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one.
.\"
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.
.\"
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and authors of this work.
.\"
.\" Japanese Version Copyright (c) 2008  Akihiro MOTOKI
.\"         all rights reserved.
.\" Translated 2008-08-21, Akihiro MOTOKI <amotoki@dd.iij4u.or.jp>, LDP v3.04
.\"
.TH SHM_OVERVIEW 7 2008-06-25 "Linux" "Linux Programmer's Manual"
.\"O .SH NAME
.SH 名前
.\"O shm_overview \- Overview of POSIX shared memory
shm_overview \- POSIX 共有メモリの概要
.\"O .SH DESCRIPTION
.SH 説明
.\"O The POSIX shared memory API allows processes to communicate information
.\"O by sharing a region of memory.
POSIX 共有メモリ API を使用すると、メモリのある領域を共有して、
プロセス間で情報をやり取りすることができる。

.\"O The interfaces employed in the API are:
この API では以下のインターフェースが採用されている。
.TP 15
.BR shm_open (3)
.\"O Create and open a new object, or open an existing object.
.\"O This is analogous to
.\"O .BR open (2).
.\"O The call returns a file descriptor for use by the other
.\"O interfaces listed below.
新しいオブジェクトを生成しオープンする、もしくは
既存のオブジェクトをオープンする。これは
.BR open (2)
と同じである。下記にある他のインターフェースで使用する
ファイルディスクリプタを返す。
.TP
.BR ftruncate (2)
.\"O Set the size of the shared memory object.
.\"O (A newly created shared memory object has a length of zero.)
共有メモリオブジェクトの大きさを設定する。
.TP
.BR mmap (2)
.\"O Map the shared memory object into the virtual address space
.\"O of the calling process.
呼び出したプロセスの仮想アドレス空間に共有メモリオブジェクトを
マップする。
.TP
.BR munmap (2)
.\"O Unmap the shared memory object from the virtual address space
.\"O of the calling process.
呼び出したプロセスの仮想アドレス空間から
共有メモリオブジェクトをアンマップする。
.TP
.BR shm_unlink (3)
.\"O Remove a shared memory object name.
共有メモリオブジェクト名を削除する。
.TP
.BR close (2)
.\"O Close the file descriptor allocated by
.\"O .BR shm_open (3)
.\"O when it is no longer needed.
.BR shm_open (3)
で割り当てられたファイルディスクリプタが不要になった際に、
そのファイルディスクリプタをクローズする。
.TP
.BR fstat (2)
.\"O Obtain a
.\"O .I stat
.\"O structure that describes the shared memory object.
.\"O Among the information returned by this call are the object's
.\"O size
.\"O .RI ( st_size ),
.\"O permissions
.\"O .RI ( st_mode ),
.\"O owner
.\"O .RI ( st_uid ),
.\"O and group
.\"O .RI ( st_gid ).
その共有メモリオブジェクトについての情報が入った
.I stat
構造体を取得する。
このシステムコールが返す情報には、オブジェクトのサイズ
.RI ( st_size )、
許可属性
.RI ( st_mode )、
所有者
.RI ( st_uid )、
グループ
.RI ( st_gid )
がある。
.TP
.BR fchown (2)
.\"O To change the ownership of a shared memory object.
共有メモリオブジェクトの所有権を変更する。
.TP
.BR fchmod (2)
.\"O To change the permissions of a shared memory object.
共有メモリオブジェクトの許可属性を変更する。
.\"O .SS Versions
.SS バージョン
.\"O POSIX shared memory is supported since Linux 2.4 and glibc 2.2.
POSIX 共有メモリは Linux 2.4 と glibc 2.2 以降でサポートされている。
.\"O .SS Persistence
.SS 持続性
.\"O POSIX shared memory objects have kernel persistence:
.\"O a shared memory object will exist until the system is shut down,
.\"O or until all processes have unmapped the object and it has been deleted with
.\"O .BR shm_unlink (3)
POSIX 共有メモリオブジェクトはカーネル内で保持される。
共有メモリオブジェクトは、システムがシャットダウンされるか、
全てのプロセスがそのオブジェクトをアンマップし、
.BR shm_unlink (3)
で削除されるまで、存在し続ける。
.\"O .SS Linking
.SS リンク
.\"O Programs using the POSIX shared memory API must be compiled with
.\"O .I cc \-lrt
.\"O to link against the real-time library,
.\"O .IR librt .
POSIX 共有メモリ API を使用したプログラムは
.I cc \-lrt
でコンパイルし、リアルタイムライブラリ
.I librt
とリンクしなければならない。
.\"O .SS Accessing shared memory objects via the file system
.SS ファイルシステム経由での共有メモリオブジェクトへのアクセス
.\"O On Linux, shared memory objects are created in a
.\"O .RI ( tmpfs )
.\"O virtual file system, normally mounted under
.\"O .IR /dev/shm .
.\"O Since kernel 2.6.19, Linux supports the use of access control lists (ACLs)
.\"O to control the permissions of objects in the virtual file system.
Linux では、共有メモリオブジェクトは通常
.I /dev/shm
以下にマウントされる仮想ファイルシステム
.RI ( tmpfs )
内に作成される。
カーネル 2.6.19 以降の Linux では、
仮想ファイルシステム内のオブジェクトの許可属性の制御に、
アクセス制御リスト (ACL; access control lists) を使うことができる。
.\"O .SH "CONFORMING TO"
.SH 準拠
POSIX.1-2001.
.\"O .SH NOTES
.SH 注意
.\"O Typically, processes must synchronize their access to a shared
.\"O memory object, using, for example, POSIX semaphores.
通常は、共有メモリオブジェクトにアクセスするプロセスは、
POSIX セマフォなどを使ってプロセス間で同期をとらなければならない。

.\"O System V shared memory
.\"O .RB ( shmget (2),
.\"O .BR shmop (2),
.\"O etc.) is an older semaphore API.
.\"O POSIX shared memory provides a simpler, and better designed interface;
.\"O on the other hand POSIX shared memory is somewhat less widely available
.\"O (especially on older systems) than System V shared memory.
System V 共有メモリ
.RB ( shmget (2),
.BR shmop (2)
など) は古い共有メモリ API である。
.\"O motoki: 原文の semaphore API は shared memory API の間違いだろう。
POSIX 共有メモリは、より簡単で、うまく設計されたインタフェースを提供している。
一方で、POSIX 共有メモリは System V 共有メモリと比べると
利用できるシステムが少ない (特に、古いシステムでは少ない)。
.\"O .SH "SEE ALSO"
.SH 関連項目
.BR fchmod (2),
.BR fchown (2),
.BR fstat (2),
.BR ftruncate (2),
.BR mmap (2),
.BR mprotect (2),
.BR munmap (2),
.BR shmget (2),
.BR shmop (2),
.BR shm_open (3),
.BR shm_unlink (3),
.BR sem_overview (7)
