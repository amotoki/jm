.\" Copyright (C) 2002 Andries Brouwer <aeb@cwi.nl>
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one.
.\"
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.
.\"
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and authors of this work.
.\"
.\" Japanese Version Copyright (c) 2003  Akihiro MOTOKI
.\"         all rights reserved.
.\" Translated Sat Jul 19 03:06:26 JST 2003
.\"         by Akihiro MOTOKI <amotoki@dd.iij4u.or.jp>
.\"
.TH TCGETPGRP 3 2003-01-28 "GNU" "Linux Programmer's Manual"
.\"O .SH NAME
.\"O tcgetpgrp, tcsetpgrp \- get and set terminal foreground process group
.SH 名前
tcgetpgrp, tcsetpgrp \- 端末のフォアグラウンド・プロセス・グループの
取得/設定を行う
.\"O .SH SYNOPSIS
.SH 書式
.B "#include <unistd.h>"
.sp
.BI "pid_t tcgetpgrp(int " fd );
.sp
.BI "int tcsetpgrp(int " fd ", pid_t " pgrp );
.\"O .SH DESCRIPTION
.SH 説明
.\"O The function
.\"O .BR tcgetpgrp ()
.\"O returns the process group ID of the foreground process group on the
.\"O terminal associated to
.\"O .IR fd ,
.\"O which must be the controlling terminal of the calling process.
.\"O .\" The process itself may be a background process.
関数
.BR tcgetpgrp ()
は、
.I fd
に対応する端末のフォアグラウンド・プロセス・グループの
プロセス・グループ ID を返す。
.I fd
で指定された端末は、呼び出しを行うプロセスの制御端末でなければならない。
.\" プロセス自体はバックグラウンド・プロセスであってもよい。
.LP
.\"O The function
.\"O .BR tcsetpgrp ()
.\"O makes the process group with process group ID \fIpgrp\fP
.\"O the foreground process group on the terminal associated to
.\"O .IR fd ,
.\"O which must be the controlling terminal of the calling process,
.\"O and still be associated with its session.
.\"O Moreover, \fIpgrp\fP must be a (nonempty) process group belonging to
.\"O the same session as the calling process.
関数
.BR tcsetpgrp ()
は、プロセス・グループID が \fIpgrp\fP のプロセス・グループを
.I fd
に対応する端末のフォアグラウンド・プロセス・グループにする。
このとき、
.I fd
は
.BR tcsetpgrp ()
を呼び出すプロセスの制御端末でなければならない。
さらに、 \fIpgrp\fP は、呼び出しを行うプロセスと同じセッションに
属する (メンバが空でない) プロセス・グループでなければならない。
.LP
.\"O If
.\"O .BR tcsetpgrp ()
.\"O is called by a member of a background process group in its session,
.\"O and the calling process is not blocking or ignoring
.\"O .BR SIGTTOU ,
.\"O a
.\"O .B SIGTTOU
.\"O signal is sent to all members of this background process group.
.BR tcsetpgrp ()
がセッションに属するバックグラウンド・グループ・プロセスのメンバから
呼び出され、かつ呼び出しを行うプロセスが
.B SIGTTOU
をブロックしたり
無視したりするようになっていない場合、
.B SIGTTOU
シグナルは
バックグラウンド・プロセス・グループの全てのメンバに送られる。
.\"O .SH "RETURN VALUE"
.SH 返り値
.\"O When
.\"O .I fd
.\"O refers to the controlling terminal of the calling process,
.\"O the function
.\"O .BR tcgetpgrp ()
.\"O will return the foreground process group ID of that terminal
.\"O if there is one, and some value larger than 1 that is not
.\"O presently a process group ID otherwise.
.I fd
が呼び出しを行ったプロセスの制御端末を参照している場合、関数
.BR tcgetpgrp ()
は、その制御端末のフォアグラウンド・プロセス・グループがあれば
そのプロセス・グループの ID を返す。
そのようなプロセス・グループがなければ、現在プロセス・グループ ID
として使用されていない、1より大きな何らかの値が返される。
.\"O When
.\"O .I fd
.\"O does not refer to the controlling terminal of the calling process,
.\"O \-1 is returned, and
.\"O .I errno
.\"O is set appropriately.
.I fd
が呼び出しを行ったプロセスの制御端末を参照していない場合、
\-1 が返され、
.I errno
が適切に設定される。
.LP
.\"O When successful,
.\"O .BR tcsetpgrp ()
.\"O returns 0.
.\"O Otherwise, it returns \-1, and
.\"O .I errno
.\"O is set appropriately.
成功した場合、
.BR tcsetpgrp ()
は 0 を返す。そうでない場合、 \-1 を返し、
.I errno
を適切に設定する。
.\"O .SH ERRORS
.SH エラー
.TP
.B EBADF
.\"O .I fd
.\"O is not a valid file descriptor.
.I fd
は有効なファイル記述子でない。
.TP
.B EINVAL
.\"O .I pgrp
.\"O has an unsupported value.
.I pgrp
が無効な値である。
.TP
.B ENOTTY
.\"O The calling process does not have a controlling terminal, or
.\"O it has one but it is not described by
.\"O .IR fd ,
.\"O or, for
.\"O .BR tcsetpgrp (),
.\"O this controlling terminal is no longer associated with the session
.\"O of the calling process.
呼び出しを行ったプロセスが制御端末を持っていない、もしくは
制御端末を持っているが
.I fd
で参照されるものとは異なる、
.BR tcsetpgrp ()
の場合は、
.I fd
で指定された制御端末がすでに呼び出しを行ったプロセスのセッション
と関係のないものになっている際にも、このエラーとなる。
.TP
.B EPERM
.\"O .I pgrp
.\"O has a supported value, but is not the process group ID of a
.\"O process in the same session as the calling process.
.I pgrp
が有効な値だが、呼び出しを行ったプロセスと同じセッションに属する
プロセスのプロセス・グループ ID には該当するものがない。
.\"O .SH "CONFORMING TO"
.SH 準拠
POSIX.1-2001.
.\"O .SH NOTES
.SH 注意
.\"O These functions are implemented via the
.\"O .B TIOCGPGRP
.\"O and
.\"O .B TIOCSPGRP
.\"O ioctls.
この関数は
.B TIOCGPGRP
と
.B TIOCGSID
の ioctl 経由で実現されている。
.\"O .SS History
.SS 歴史
.\"O The ioctls appeared in 4.2BSD.
.\"O The functions are POSIX inventions.
これらの ioctl は 4.2BSD で登場した。
これらの関数は POSIX で考案されたものである。
.\"O .SH "SEE ALSO"
.SH 関連項目
.BR setpgid (2),
.BR setsid (2),
.BR credentials (7)
