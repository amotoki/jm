.\" Copyright 2000 Sam Varshavchik <mrsam@courier-mta.com>
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one.
.\"
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.
.\"
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and authors of this work.
.\"
.\" References: RFC 2553
.\"
.\" Japanese Version Copyright (c) 2001 NAKANO Takeo all rights reserved.
.\" Translated Sun Jan 14 2001 by NAKANO Takeo <nakano@apm.seikei.ac.jp>
.\" Updated Tue Nov 26 2002 by Kentaro Shirakata <argrath@ub32.org>
.\"
.\"WORD:	null pointer	ヌル・ポインター
.\"
.TH GETIPNODEBYNAME 3 2010-09-04 "Linux" "Linux Programmer's Manual"
.\"O .SH NAME
.\"O getipnodebyname, getipnodebyaddr, freehostent \- get network
.\"O hostnames and addresses
.SH 名前
getipnodebyname, getipnodebyaddr, freehostent \- ネットワークホストの名前とアドレスの取得
.\"O .SH SYNOPSIS
.SH 書式
.nf
.B #include <sys/types.h>
.B #include <sys/socket.h>
.B #include <netdb.h>
.sp
.BI "struct hostent *getipnodebyname(const char *" name ", int " af ,
.BI "                                int " flags ", int *" error_num );
.sp
.BI "struct hostent *getipnodebyaddr(const void *" addr ", size_t " len ,
.BI "                                int " af ", int *" "error_num" );
.sp
.BI "void freehostent(struct hostent *" "ip" );
.fi
.\"O .SH DESCRIPTION
.SH 説明
.\"O These functions are deprecated (and unavailable in glibc).
.\"O Use
.\"O .BR getaddrinfo (3)
.\"O and
.\"O .BR getnameinfo (3)
.\"O instead.
これらの関数は非推奨である (glibc では利用できない)。
代わりに
.BR getaddrinfo (3)
と
.BR getnameinfo (3)
を使うこと。
.LP
.\"O The
.\"O .BR getipnodebyname ()
.\"O and
.\"O .BR getipnodebyaddr ()
.\"O functions return the names and addresses of a network host.
.\"O These functions return a pointer to the
.\"O following structure:
.BR getipnodebyname ()
と
.BR getipnodebyaddr ()
は、ネットワークホストの名前とアドレスを返す。
これらの関数は、以下の構造体へのポインタを返す。
.sp
.in +4n
.nf
struct hostent {
    char  *h_name;
    char **h_aliases;
    int    h_addrtype;
    int    h_length;
    char **h_addr_list;
};
.fi
.in
.PP
.\"O These functions replace the
.\"O .BR gethostbyname (3)
.\"O and
.\"O .BR gethostbyaddr (3)
.\"O functions, which could only access the IPv4 network address family.
.\"O The
.\"O .BR getipnodebyname ()
.\"O and
.\"O .BR getipnodebyaddr ()
.\"O functions can access multiple network address families.
これらの関数は、 IPv4 ネットワークアドレスファミリにしかアクセスできない
.BR gethostbyname (3)
や
.BR gethostbyaddr (3)
を置き換えるものである。
.BR getipnodebyname ()
関数と
.BR getipnodebyaddr ()
関数は複数のネットワークアドレスファミリーにアクセス可能になっている。
.PP
.\"O Unlike the
.\"O .B gethostby
.\"O functions,
.\"O these functions return pointers to dynamically allocated memory.
.\"O The
.\"O .BR freehostent ()
.\"O function is used to release the dynamically allocated memory
.\"O after the caller no longer needs the
.\"O .I hostent
.\"O structure.
これらの関数は、
.B gethostby
の関数群と異なり、動的に割り当てられたメモリへのポインタを返す。
呼び出し元がこれらの
.I hostent
構造体を必要としなくなった後は、
.BR freehostent ()
関数を用いれば動的な割り当てメモリを解放できる。
.\"O .SS getipnodebyname() arguments
.SS getipnodebyname() の引き数
.\"O The
.\"O .BR getipnodebyname ()
.\"O function
.\"O looks up network addresses for the host
.\"O specified by the
.\"O .I name
.\"O argument.
.\"O The
.\"O .I af
.\"O argument specifies one of the following values:
.BR getipnodebyname ()
関数は
.I name
引き数で指定されたホストのネットワークアドレスを引く。
.I af
引き数には以下の値のいずれかを指定する。
.TP
.B AF_INET
.\"O The
.\"O .I name
.\"O argument points to a dotted-quad IPv4 address or a name
.\"O of an IPv4 network host.
.I name
引き数は、ドットで 4 つに区切られた IPv4 アドレスか、
IPv4 ネットワークホストの名前へのポインタである。
.TP
.B AF_INET6
.\"O The
.\"O .I name
.\"O argument points to a hexadecimal IPv6 address or a name
.\"O of an IPv6 network host.
.I name
引き数は、16 進の IPv6 アドレスか、
IPv6 ネットワークホストの名前へのポインタである。
.PP
.\"O The
.\"O .I flags
.\"O argument specifies additional options.
.\"O More than one option can be specified by bitwise OR-ing
.\"O them together.
.\"O .I flags
.\"O should be set to 0
.\"O if no options are desired.
.I flags
パラメータには追加のオプションを指定する。
複数のフラグを指定するには、それらのビット単位の OR をとって指定すればよい。
オプションをひとつも指定したくないときには、
.I flags
に 0 を設定する必要がある。
.TP
.B AI_V4MAPPED
.\"O This flag is used with
.\"O .B AF_INET6
.\"O to request a query for IPv4 addresses instead of
.\"O IPv6 addresses; the IPv4 addresses will
.\"O be mapped to IPv6 addresses.
このフラグは
.B AF_INET6
と共に用いられ、IPv6 アドレスの代わりに IPv4 アドレスを問い合わせる。
問い合わせる IPv4 アドレスは IPv6 アドレスにマップされる。
.TP
.B AI_ALL
.\"O This flag is used with
.\"O .B AI_V4MAPPED
.\"O to request a query for both IPv4 and IPv6 addresses.
.\"O Any IPv4 address found will be mapped to an IPv6 address.
このフラグは
.B AI_V4MAPPED
と共に用いられ、IPv4 アドレスと IPv6 アドレスの両方を問い合わせる。
見つかった IPv4 アドレスは、すべて IPv6 アドレスにマップされる。
.TP
.B AI_ADDRCONFIG
.\"O This flag is used with
.\"O .B AF_INET6
.\"O to
.\"O further request that queries for IPv6 addresses should not be made unless
.\"O the system has at least one IPv6 address assigned to a network interface,
.\"O and that queries for IPv4 addresses should not be made unless the
.\"O system has at least one IPv4 address assigned to a network interface.
.\"O This flag may be used by itself or with the
.\"O .B AI_V4MAPPED
.\"O flag.
このフラグは
.B AF_INET6
と共に用いられ、
IPv6 が割り当てられたネットワークインターフェースが
システムにひとつもなければ IPv6 アドレスの問い合わせを行わず、
IPv4 が割り当てられたネットワークインターフェースが
システムにひとつもなければ IPv4 アドレスの問い合わせを行わないように要求する。
このフラグは単独でも、あるいは
.B AI_V4MAPPED
フラグと共にでも用いることができる。
.TP
.B AI_DEFAULT
.\"O This flag is equivalent to
.\"O .BR "(AI_ADDRCONFIG | AI_V4MAPPED)" .
このフラグは
.BR (AI_ADDRCONFIG | AI_V4MAPPED)
と等価である。
.\"O .SS getipnodebyaddr() arguments
.SS "getipnodebyaddr() の引き数"
.\"O The
.\"O .BR getipnodebyaddr ()
.\"O function
.\"O looks up the name of the host whose
.\"O network address is
.\"O specified by the
.\"O .I addr
.\"O argument.
.\"O The
.\"O .I af
.\"O argument specifies one of the following values:
.BR getipnodebyaddr ()
関数は、ネットワークアドレスが
.I addr
引き数で指定されたホストの名前を引く。
.I af
引き数には以下の値のいずれかを指定する。
.TP
.B AF_INET
.\"O The
.\"O .I addr
.\"O argument points to a
.\"O .I struct in_addr
.\"O and
.\"O .I len
.\"O must be set to
.\"O .IR "sizeof(struct in_addr)" .
.I addr
引き数は
.I struct in_addr
へのポインターであり、
.I len
引き数は
.I sizeof(struct in_addr)
に設定しなければならない。
.TP
.B AF_INET6
.\"O The
.\"O .I addr
.\"O argument points to a
.\"O .I struct in6_addr
.\"O and
.\"O .I len
.\"O must be set to
.\"O .IR "sizeof(struct in6_addr)" .
.I addr
引き数は
.I struct in6_addr
へのポインターであり、
.I len
引き数は
.I sizeof(struct in6_addr)
に設定しなければならない。
.\"O .SH "RETURN VALUE"
.SH 返り値
.\"O A NULL pointer is returned if an error occurred, and
.\"O .I error_num
.\"O will contain an error code from the following list:
エラーが起こるとヌル・ポインターが返され、
.I error_num
に以下にリストされたエラーコードのいずれかが設定される。
.TP
.B HOST_NOT_FOUND
.\"O The hostname or network address was not found.
ホスト名またはネットワークアドレスが見つからなかった。
.TP
.B NO_ADDRESS
.\"O The domain name server recognized the network address or name,
.\"O but no answer was returned.
.\"O This can happen if the network host has only IPv4 addresses and
.\"O a request has been made for IPv6 information only, or vice versa.
ドメインネームサーバーは
そのネットワークアドレスまたはネットワーク名を認識したが、
返事が返ってこなかった。原因としては、
例えば IPv4 アドレスしか持たないネットワークホストに対して
IPv6 の情報の問い合わせが行われた (およびその逆) などが考えられる。
.TP
.B NO_RECOVERY
.\"O The domain name server returned a permanent failure response.
ドメインネームサーバーから恒久的な失敗 (permanent failure)
を意味する返事が返された。
.TP
.B TRY_AGAIN
.\"O The domain name server returned a temporary failure response.
.\"O You might have better luck next time.
ネームサーバーから一時的な失敗 (temporary failure)
を意味する返事が返された。次にはもうちょっと運が必要かも。
.PP
.\"O A successful query returns a pointer to a
.\"O .I hostent
.\"O structure that contains the following fields:
問い合わせに成功すると、
.I hostent
構造体へのポインタが返される。
この構造体は以下のフィールドからなる。
.TP
.I h_name
.\"O This is the official name of this network host.
これはこのネットワークホストのオフィシャルな名前である。
.TP
.I h_aliases
.\"O This is an array of pointers to unofficial aliases for the same host.
.\"O The array is terminated by a NULL pointer.
これは、そのホストのオフィシャルでない別名へのポインターの配列である。
配列はヌル・ポインターで終端する。
.TP
.I h_addrtype
.\"O This is a copy of the
.\"O .I af
.\"O argument to
.\"O .BR getipnodebyname ()
.\"O or
.\"O .BR getipnodebyaddr ().
.\"O .I h_addrtype
.\"O will always be
.\"O .B AF_INET
.\"O if the
.\"O .I af
.\"O argument was
.\"O .BR AF_INET .
.\"O .I h_addrtype
.\"O will always be
.\"O .B AF_INET6
.\"O if the
.\"O .I af
.\"O argument was
.\"O .BR AF_INET6 .
これは
.BR getipnodebyname ()
または
.BR getipnodebyaddr ()
に与えられた
.I af
引き数のコピーである。
.I af
引き数が
.B AF_INET
なら
.I h_addrtype
は常に
.B AF_INET
になり、
.I af
引き数が
.B AF_INET6
なら
.I h_addrtype
も常に
.B AF_INET6
になる。
.TP
.I h_length
.\"O This field will be set to
.\"O .I sizeof(struct in_addr)
.\"O if
.\"O .I h_addrtype
.\"O is
.\"O .BR AF_INET ,
.\"O and to
.\"O .I sizeof(struct in6_addr)
.\"O if
.\"O .I h_addrtype
.\"O is
.\"O .BR AF_INET6 .
このフィールドは、
.I h_addrtype
が
.B AF_INET
なら
.I sizeof(struct in_addr)
に、
.I h_addrtype
が
.B AF_INET6
なら
.I sizeof(struct in6_addr)
に設定される。
.TP
.I h_addr_list
.\"O This is an array of one or more pointers to network address structures for the
.\"O network host.
.\"O The array is terminated by a NULL pointer.
これはひとつ以上のポインターの配列で、
それぞれのポインターは、
そのネットワークホストに対応するネットワークアドレス構造体を指す。
この配列はヌル・ポインターで終端する。
.\"O .SH "CONFORMING TO"
.SH 準拠
RFC\ 2553.
.\"O .\" Not in POSIX.1-2001.
.\" POSIX.1-2001 にはない。
.\"O .SH NOTES
.SH 注意
.\"O These functions were present in glibc 2.1.91-95, but were
.\"O removed again.
.\"O Several UNIX-like systems support them, but all
.\"O call them deprecated.
これらの関数は glibc 2.1.91-95 に存在したが、再び削除された。
いくつかの UNIX 風システムはこれらの関数に対応しているが、
これらの関数は全て推奨されない。
.\"O .SH "SEE ALSO"
.SH 関連項目
.BR getaddrinfo (3),
.BR getnameinfo (3),
.BR inet_ntop (3),
.BR inet_pton (3)
