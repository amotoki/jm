.\" Copyright (c) Bruno Haible <haible@clisp.cons.org>
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" References consulted:
.\"   GNU glibc-2 source code and manual
.\"   Dinkumware C library reference http://www.dinkumware.com/
.\"   OpenGroup's Single UNIX specification http://www.UNIX-systems.org/online.html
.\"   ISO/IEC 9899:1999
.\"
.\" Japanese Version Copyright (c) 1999 HANATAKA Shinya
.\"         all rights reserved.
.\" Translated Tue Jan 11 00:56:19 JST 2000
.\"         by HANATAKA Shinya <hanataka@abyss.rim.or.jp>
.\"
.TH MBRLEN 3 1999-07-25 "GNU" "Linux Programmer's Manual"
.\"O .SH NAME
.SH 名前
.\"O mbrlen \- determine number of bytes in next multibyte character
mbrlen \- 次のマルチバイト文字の長さをバイト数で返す
.\"O .SH SYNOPSIS
.SH 書式
.nf
.B #include <wchar.h>
.sp
.BI "size_t mbrlen(const char *" s ", size_t " n ", mbstate_t *" ps );
.fi
.\"O .SH DESCRIPTION
.SH 説明
.\"O The
.\"O .BR mbrlen ()
.\"O function inspects at most \fIn\fP bytes of the multibyte
.\"O string starting at \fIs\fP and extracts the next complete multibyte character.
.\"O It updates the shift state \fI*ps\fP.
.\"O If the multibyte character is not the
.\"O null wide character, it returns the number of bytes that were consumed from
.\"O \fIs\fP.
.\"O If the multibyte character is the null wide character, it resets the
.\"O shift state \fI*ps\fP to the initial state and returns 0.
.BR mbrlen ()
関数は \fIs\fP から始まるマルチバイト文字列を
最大 \fIn\fP バイト調べて次の完全なマルチバイト文字を取り出す。
同時にシフト状態 \fI*ps\fP を更新する。
マルチバイト文字がナルワイド文字でなければ \fIs\fP から
消費するバイト数を返す。ナルワイド文字ならばシフト状態 \fI*ps\fP を
初期状態に戻して、0 を返す。
.PP
.\"O If the \fIn\fP bytes starting at \fIs\fP do not contain a complete multibyte
.\"O character,
.\"O .BR mbrlen ()
.\"O returns \fI(size_t)\ \-2\fP.
.\"O This can happen even if
.\"O \fIn\fP >= \fIMB_CUR_MAX\fP, if the multibyte string contains redundant shift
.\"O sequences.
\fIs\fP から始まる \fIn\fP バイトの文字列が完全なマルチバイト文字を含んで
いない場合には
.BR mbrlen ()
は \fI(size_t)\ \-2\fP を返す。
マルチバイト文字列に冗長なシフトシーケンスを含まれていると
\fIn\fP >= \fIMB_CUR_MAX\fP の時にもこのようなことが起こりえる。
.PP
.\"O If the multibyte string starting at \fIs\fP contains an invalid multibyte
.\"O sequence before the next complete character,
.\"O .BR mbrlen ()
.\"O returns
.\"O \fI(size_t)\ \-1\fP and sets \fIerrno\fP to \fBEILSEQ\fP.
.\"O In this case,
.\"O the effects on \fI*ps\fP are undefined.
\fIs\fP から始まるマルチバイト文字列が、次の完全な文字の前に
不正なマルチバイト列を含んでいる場合には、
.BR mbrlen ()
は
\fI(size_t)\ \-1\fP を返し \fIerrno\fP に \fBEILSEQ\fP が設定される。
この場合の \fI*ps\fP への影響は未定義である。
.PP
.\"O If \fIps\fP is a NULL pointer, a static anonymous state only known to the
.\"O .BR mbrlen ()
.\"O function is used instead.
\fIps\fP が NULL ポインターならば、代りに
.BR mbrlen ()
関数のみが使用する静的で名前のない状態が使用される。
.\"O .SH "RETURN VALUE"
.SH 返り値
.\"O The
.\"O .BR mbrlen ()
.\"O function returns the number of bytes
.\"O parsed from the multibyte
.\"O sequence starting at \fIs\fP, if a non-null wide character was recognized.
ナルワイド文字以外の文字を確認した場合には、
.BR mbrlen ()
関数は \fIs\fP
から始まるマルチバイト列から使用したバイト数を返す。
.\"O It returns 0, if a null wide character was recognized.
.\"O It returns
.\"O .I "(size_t)\ \-1"
.\"O and sets \fIerrno\fP to \fBEILSEQ\fP, if an invalid multibyte sequence was
.\"O encountered.
.\"O It returns \fI(size_t)\ \-2\fP if it couldn't parse a complete multibyte
.\"O character, meaning that \fIn\fP should be increased.
ナルワイド文字が確認された場合にはゼロを返す。
不正なマルチバイト列に遭遇した場合には
.I "(size_t)\ \-1"
を返し
\fIerrno\fP に \fBEILSEQ\fP を設定する。
完全なマルチバイト文字を解析できなかった場合には \fI(size_t)\ \-2\fP を返す。
これは \fIn\fP を増さなければならないことを意味する。
.\"O .SH "CONFORMING TO"
.SH 準拠
C99.
.\"O .SH NOTES
.SH 注意
.\"O The behavior of
.\"O .BR mbrlen ()
.\"O depends on the
.\"O .B LC_CTYPE
.\"O category of the
.\"O current locale.
.BR mbrlen ()
の動作は現在のロケールの
.B LC_CTYPE
カテゴリに依存している。
.\"O .SH "SEE ALSO"
.SH 関連項目
.BR mbrtowc (3)
