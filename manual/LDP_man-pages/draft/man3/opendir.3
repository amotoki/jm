.\" Copyright (C) 1993 David Metcalfe (david@prism.demon.co.uk)
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one.
.\"
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.
.\"
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and authors of this work.
.\"
.\" References consulted:
.\"     Linux libc source code
.\"     Lewine's _POSIX Programmer's Guide_ (O'Reilly & Associates, 1991)
.\"     386BSD man pages
.\" Modified Sat Jul 24 18:46:01 1993 by Rik Faith (faith@cs.unc.edu)
.\" Modified 11 June 1995 by Andries Brouwer (aeb@cwi.nl).
.\" 2007-07-30 Ulrich Drepper <drepper@redhat.com>: document fdopendir().
.\"
.\" Japanese Version Copyright (c) 1997 Seiichi Yoshida
.\"       all rights reserved.
.\" Translated Fri Feb 14 14:53:20 JST 1997
.\"         by Seiichi Yoshida <seiichi@muraoka.info.waseda.ac.jp>
.\" Updated & Modified Thu Feb 17 00:37:46 JST 2005
.\"         by Yuichi SATO <ysato444@yahoo.co.jp>
.\"
.\"WORD:    directory stream            ディレクトリストリーム
.\"WORD:    entry                       エントリ
.\"WORD:    Permission denied           アクセス権限がない
.\"WORD:    file descriptor             ファイルディスクリプタ
.\"
.TH OPENDIR 3  2010-06-20 "" "Linux Programmer's Manual"
.\"O .SH NAME
.SH 名前
.\"O opendir, fdopendir \- open a directory
opendir, fdopendir \- ディレクトリをオープンする
.\"O .SH SYNOPSIS
.SH 書式
.nf
.B #include <sys/types.h>
.br
.B #include <dirent.h>
.sp
.BI "DIR *opendir(const char *" name );
.BI "DIR *fdopendir(int " fd );
.fi
.sp
.in -4n
.\"O Feature Test Macro Requirements for glibc (see
.\"O .BR feature_test_macros (7)):
glibc 向けの機能検査マクロの要件
.RB ( feature_test_macros (7)
参照):
.in
.sp
.BR fdopendir ():
.PD 0
.ad l
.RS 4
.TP 4
.\"O Since glibc 2.10:
glibc 2.10 以降:
_XOPEN_SOURCE\ >=\ 700 || _POSIX_C_SOURCE\ >=\ 200809L
.TP
.\"O Before glibc 2.10:
glibc 2.10 より前:
_GNU_SOURCE
.RE
.ad
.PD
.\"O .SH DESCRIPTION
.SH 説明
.\"O The
.\"O .BR opendir ()
.\"O function opens a directory stream corresponding to the
.\"O directory \fIname\fP, and returns a pointer to the directory stream.
.\"O The stream is positioned at the first entry in the directory.
.BR opendir ()
関数はディレクトリ \fIname\fP に対応する
ディレクトリストリームをオープンし、そのストリームへのポインタを返す。
ストリームの位置はディレクトリの先頭のエントリに設定される。

.\"O The
.\"O .BR fdopendir ()
.\"O function
.\"O is like
.\"O .BR opendir (),
.\"O but returns a directory stream for the directory referred
.\"O to by the open file descriptor
.\"O .IR fd .
.\"O After a successful call to
.\"O .BR fdopendir (),
.\"O .I fd
.\"O is used internally by the implementation,
.\"O and should not otherwise be used by the application.
.BR fdopendir ()
関数は
.BR opendir ()
と同様だが、オープン済みのファイルディスクリプタ
.I fd
により参照されるディレクトリに対する
ディレクトリストリームを返す。
.BR fdopendir ()
の呼び出しが成功した後は、
.I fd
は実装の内部で使用される。アプリケーションは
.I fd
を他の場面で使用すべきではない。
.\"O .SH "RETURN VALUE"
.SH 返り値
.\"O The
.\"O .BR opendir ()
.\"O and
.\"O .BR fdopendir ()
.\"O functions return a pointer to the directory stream.
.\"O On error, NULL is returned, and
.\"O .I errno
.\"O is set appropriately.
関数
.BR opendir ()
と
.BR fdopendir ()
はディレクトリストリームへのポインタを返す。
エラーの場合は、NULL が返されて、
.I errno
が適切に設定される。
.\"O .SH ERRORS
.SH エラー
.TP
.B EACCES
.\"O Permission denied.
アクセス権限がない。
.TP
.B EBADF
.\"O .I fd
.\"O is not a valid file descriptor opened for reading.
.I fd
が読み出し用にオープンされた、有効なファイルディスクリプタではない。
.TP
.B EMFILE
.\"O Too many file descriptors in use by process.
プロセスが使用中のファイルディスクリプタが多すぎる。
.TP
.B ENFILE
.\"O Too many files are currently open in the system.
システムでオープンされているファイルが多すぎる。
.TP
.B ENOENT
.\"O Directory does not exist, or \fIname\fP is an empty string.
ディレクトリが存在しないか、または \fIname\fP が空文字列である。
.TP
.B ENOMEM
.\"O Insufficient memory to complete the operation.
命令を実行するのに充分なメモリがない。
.TP
.B ENOTDIR
.\"O \fIname\fP is not a directory.
\fIname\fP はディレクトリではない。
.\"O .SH VERSIONS
.SH バージョン
.\"O .BR fdopendir ()
.\"O is available in glibc since version 2.4.
.BR fdopendir ()
は glibc 2.4 以降で利用可能である。
.\"O .SH "CONFORMING TO"
.SH 準拠
.\"O .BR opendir ()
.\"O is present on SVr4, 4.3BSD, and specified in POSIX.1-2001.
.BR opendir ()
は SVr4 と 4.3BSD に存在し、
POSIX.1-2001 で規定されている。
.\"O .BR fdopendir ()
.\"O is specified in POSIX.1-2008.
.BR fdopendir ()
は POSIX.1-2008 で規定されている。
.\"O .SH NOTES
.SH 注意
.\"O The underlying file descriptor of the directory stream can be obtained using
.\"O .BR dirfd (3).
ディレクトリストリームに対応するファイルディスクリプタは
.BR dirfd (3)
を使用して得ることができる。

.\"O The
.\"O .BR opendir ()
.\"O function sets the close-on-exec flag for the file descriptor underlying the
.\"O .IR "DIR *" .
.\"O The
.\"O .BR fdopendir ()
.\"O function leaves the setting of the close-on-exec
.\"O flag unchanged for the file descriptor,
.\"O .IR fd .
.BR opendir ()
関数は、
.I "DIR *"
の背後にあるファイルディスクリプタの close-on-exec フラグを設定する。
.BR fdopendir ()
関数は、ファイルディスクリプタの close-on-exec フラグの設定を変更しない。
.\"O POSIX.1-200x leaves it unspecified whether a successful call to
.\"O .BR fdopendir ()
.\"O will set the close-on-exec flag for the file descriptor,
.\"O .IR fd .
.BR fdopendir ()
の呼び出しが成功した際に、ファイルディスクリプタ
.I fd
の close-on-exec を設定するかどうかは、
POSIX.1-200x では規定されていない。
.\"O .SH "SEE ALSO"
.SH 関連項目
.BR open (2),
.BR closedir (3),
.BR dirfd (3),
.BR readdir (3),
.BR rewinddir (3),
.BR scandir (3),
.BR seekdir (3),
.BR telldir (3)
